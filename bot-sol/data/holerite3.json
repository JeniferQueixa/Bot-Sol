{
    "flow": {
        "onboarding": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "2d409d83-be96-49d2-a30d-3685c0240789",
                                "type": "text/plain",
                                "content": "User input"
                            },
                            "editable": false,
                            "deletable": false,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "stateId": "11eaf4c2-d44c-4306-9d44-ebadda2d3a18",
                    "typeOfStateId": "state",
                    "$connId": "con_3",
                    "$id": "f780fd15-312b-4c6d-a104-5475b0bba8fd",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "contains",
                            "values": [
                                "@wa.gw.msging.net"
                            ],
                            "variable": "contact.identity"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "8efe123b-14d0-427a-8165-7e865e087ab2",
                    "typeOfStateId": "state",
                    "$connId": "con_8",
                    "$id": "b2d97261-de2d-4135-a91c-dbcf29d5d4f3",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "cameFrom_ath_sair"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "ff315329-e13e-4beb-af24-ff684ff74894",
                    "typeOfStateId": "state",
                    "$connId": "con_13",
                    "$id": "87d88efe-9a3f-433b-8194-152b90c3fcba",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "cameFrom_aifaq_menu",
                                "cameFrom_aifaq_regexIntent:menu"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "$id": "DWNTd662-4d1f-4081-9ea2-d951ebf7b5ab",
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "startsWith",
                            "values": [
                                "#debug",
                                "#goto"
                            ]
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "0c495718-1cd2-4f37-93eb-4be55a5272da",
                    "typeOfStateId": "state",
                    "$connId": "con_18",
                    "$id": "4d054ce4-8772-4dfc-a51d-63f55848d15c",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#ia"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "982ae9bd-cc54-4b59-9f33-f2d9dbfcbe55",
                    "typeOfStateId": "state",
                    "$connId": "con_23",
                    "$id": "aba67c1d-1b87-46ed-a6b4-c6e69ef9ae3f",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#link",
                                "#homolog:25",
                                "#hml:25"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "2c52fe13-a787-4623-9c7b-750f93b50447",
                    "typeOfStateId": "state",
                    "$connId": "con_28",
                    "$id": "cfd9454a-b7cb-4569-9de2-7ba83854c959",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#prd:25"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "welcome",
                    "typeOfStateId": "state",
                    "$connId": "con_33",
                    "$id": "bd01e1be-3cf9-49ba-93d1-af2bc73db63b",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#hml@reiniciar"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "140708a7-0021-461f-8234-a2dbd4e5f9dc",
                    "typeOfStateId": "state",
                    "$connId": "con_38",
                    "$id": "2888711d-6b4d-44c0-8736-1b3dbee4c676",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "dwn@user.allowed"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "DWNT@contact.new",
                            "values": [
                                "false"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "welcome",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "DWNT@contact.new"
                        }
                    ],
                    "$id": "d5fbd72e-bac0-4258-8892-e1426c468914",
                    "$connId": "con_43",
                    "$invalid": false
                },
                {
                    "stateId": "f82ec425-ffd4-426b-b892-2f45131139a7",
                    "typeOfStateId": "state",
                    "$connId": "con_48",
                    "$id": "fd7a19b5-56ec-49a9-be62-3336d7c8032e",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "cameFrom_aifaq_regexIntent"
                            ]
                        },
                        {
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "source": "context",
                            "variable": "dwn@user.allowed"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "f82ec425-ffd4-426b-b892-2f45131139a7",
                    "typeOfStateId": "state",
                    "$connId": "con_53",
                    "$id": "6a0c239b-7d25-43e2-b85c-95213e574d3a",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "cameFrom_aifaq_regexIntent"
                            ]
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "isTheSameUserSkackLG"
                        },
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "isTheSameUserSkackLG",
                            "values": [
                                "false"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "140708a7-0021-461f-8234-a2dbd4e5f9dc",
                    "typeOfStateId": "state",
                    "$connId": "con_58",
                    "$id": "42ec1839-7012-4037-b6c7-e2793ceaba86",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "isTheSameUserSkackLG"
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "isTheSameUserSkackLG"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "140708a7-0021-461f-8234-a2dbd4e5f9dc",
                    "typeOfStateId": "state",
                    "$connId": "con_63",
                    "$id": "f4ded10c-c630-467d-abb2-2e781034a8a9",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "BLIP_CHAT"
                            ],
                            "variable": "DWNT@contact.source"
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "variable": "cpf",
                            "comparison": "notEquals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "DWN/ONB_RST_SCT#a9066fd9-e7dd-456c-8d93-be2777fa9969",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "DWN [SETTINGS] Reset",
                    "settings": {
                        "function": "dwnRun",
                        "source": "\nvar RESET_CONFIG = {\n  journey: true,\n  errors: true,\n  checkpoints: true,\n  intents: true,\n  services: true,\n  visits: true,\n  group: true\n};\nvar ONLY_ON_MAIN = true;\nasync function dwnRun(coreStr, configStr, errorStr) {\n  coreStr = coreStr || \"\";\n  configStr = configStr || \"\";\n  errorStr = errorStr || \"\";\n  let core = null;\n  let config = null;\n  let error = DwnError.fromDwnError(errorStr);\n  try {\n    core = JSON.parse(coreStr || \"{}\");\n    if (error) {\n      throw error;\n    }\n    try {\n      config = JSON.parse(configStr || \"\");\n    } catch (err) {\n      throw new Error(`config parsing ${String(err)}`);\n    }\n    const IS_MAIN = config.service.current === config.service.main;\n    const allow = ONLY_ON_MAIN ? IS_MAIN : true;\n    if (allow && RESET_CONFIG.journey) {\n      core.journey = \"{{random.guid}}\";\n      core.sessions = (core.sessions || 0) + 1;\n    }\n    if (allow && RESET_CONFIG.errors) {\n      core.errors = [];\n    }\n    if (allow && RESET_CONFIG.checkpoints) {\n      core.checkpoints = [];\n    }\n    if (allow && RESET_CONFIG.intents) {\n      core.intents = { stack: [], groups: [] };\n    }\n    if (allow && RESET_CONFIG.services) {\n      core.services = [];\n    }\n    if (allow && RESET_CONFIG.group) {\n      const GROUP_SEED_RESOLUTION = 1e7;\n      let groups = config.groups || [];\n      let sum = groups.reduce((acc, val) => acc + val, 0);\n      let seed = Math.floor(Math.random() * GROUP_SEED_RESOLUTION);\n      const groupIndex = groups.findIndex((val) => {\n        seed -= val * GROUP_SEED_RESOLUTION / sum;\n        return seed < 0;\n      });\n      const group = groupIndex === -1 ? 0 : groupIndex;\n      core.group = String.fromCharCode(65 + group);\n    }\n    if (allow && RESET_CONFIG.visits) {\n      core.visits = [];\n    }\n    if (IS_MAIN) {\n      core.warnings = [];\n    }\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[entrypoint-core] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\"RUNTIME_ERROR\", description, {\n        stack,\n        goto: null\n      });\n    }\n    error = err;\n  } finally {\n    if (!core || typeof core !== \"object\") {\n      core = null;\n    }\n    coreStr = JSON.stringify(core);\n  }\n  if (error && error.toString() !== errorStr) {\n    await context.setVariableAsync(\"dwnError\", error.toString());\n  }\n  return coreStr;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n",
                        "inputVariables": [
                            "dwnCore",
                            "dwnConfig",
                            "dwnError"
                        ],
                        "outputVariable": "dwnCore"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWN/ONB_SET_CNT_PHN#01d0a0d8-3f0c-48a4-8531-dc0118b12828",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "DWN Contact defaults",
                    "settings": {
                        "phoneNumber": "{{dwn@user.phone}}",
                        "extras": {
                            "debug": "",
                            "intent": "",
                            "journey": "{{dwn@journey}}",
                            "sessions": "{{dwn@user.sessions}}"
                        }
                    },
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "dwnCore@main"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/ONB_TRK_CNT_SES#164e19af-1cb6-4d1f-9bd2-098919787ee3",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Contact Sessions",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-contact-sessions",
                        "action": "{{dwnCore@sessions}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwnCore@sessions"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwnCore@main"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/ONB_TRK_ACC_HR#4329f3b0-6d92-4949-a557-b6cd77d652a9",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Contact Hour",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-{{dwnCore@service}}-contact-hour",
                        "action": "{{dwn@calendar.hour}}h"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@calendar.hour"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "dad47758-8efc-47cd-bd74-5e2da3c1576e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'firstContent'",
                    "$invalid": false,
                    "settings": {
                        "variable": "firstContent",
                        "value": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNTd5ab-b792-4d05-8a57-fe9d0bd1486b",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Update SDK (main)",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, contact_identity, tunnel_originator, random_guid) {\n    try {\n        DWNT = JSON.parse(DWNT|| \"{}\");\n\n        DWNT.journey = random_guid;\n\n        if (!DWNT.contact) DWNT.contact = {};\n        DWNT.contact.source = contact__source(contact_identity);\n        DWNT.contact.cellphone = contact__cellphone(contact_identity);\n        DWNT.contact.phone = contact__phone(contact_identity);\n        DWNT.contact.DDD = contact__DDD(contact_identity);\n        DWNT.contact.id = tunnel_originator ? tunnel_originator : contact_identity;\n\n        DWNT.contact.new = DWNT.contact.new === undefined;\n\n\t\tDWNT.error = null;\n        DWNT.checkpoints = [];\n\n    } catch(err) {}\n    return JSON.stringify(DWNT);\n}\n\nfunction contact__source(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    if (contactIdentity.includes(\"wa.gw.msging.net\")) {\n        return \"WHATSAPP\";\n    } else if (contactIdentity.includes(\"messenger\")) {\n        return \"FACEBOOK\";\n    } else if (contactIdentity.includes(\"instagram\")) {\n        return \"INSTAGRAM\";\n    } else if (contactIdentity.includes(\"businessmessages\")) {\n        return \"GOOGLE_BUSINESS_MESSAGE\";\n    } else if (contactIdentity.includes(\"mailgun\")) {\n        return \"E_MAIL\";\n    } else if (contactIdentity.includes(\"0mn\") || contactIdentity.includes(\"blip\")) {\n        return \"BLIP_CHAT\";\n    } else {\n        return \"OUTRO\";\n    }\n}\n\nfunction contact__phone(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0];\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n\nfunction contact__cellphone(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0].substring(2);\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n\nfunction contact__DDD(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0].substring(2, 4);\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n",
                        "inputVariables": [
                            "DWNT",
                            "contact.identity",
                            "tunnel.originator",
                            "random.guid"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "source": "input",
                            "comparison": "notEquals",
                            "values": [
                                "cameFrom_ath_sair"
                            ]
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "81316637-3794-48a7-ac9d-7cedc1a6144a",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "'Time' to 'false'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "false"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "source": "input",
                            "comparison": "notEquals",
                            "values": [
                                "cameFrom_ath_sair"
                            ]
                        }
                    ]
                },
                {
                    "$id": "DWNT4402-366e-4519-9167-04fe429601cf",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DWNT] Hora de acesso",
                    "settings": {
                        "extras": {},
                        "category": "DWNT-HOUR-{{DWNT@application.bot}}-Onboarding",
                        "action": "{{DWNT@calendar.hour}}h"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "b87146ee-86ee-48dc-90e0-50c3fdde33f2",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'userId'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(email) {\n    return email.split(\"@\")[0];\n}\n",
                        "inputVariables": [
                            "contact.identity"
                        ],
                        "outputVariable": "userId",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "8dd2f574-bf87-4163-84f3-99bb9d4f458b",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Merge 'Source' to Slack",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Authorization": "{{config.routerKey}}"
                        },
                        "method": "POST",
                        "body": "{\n  \"id\": \"{{random.guid}}\",\n  \"to\": \"postmaster@crm.msging.net\",\n  \"method\": \"merge\",\n  \"uri\": \"/contacts\",\n  \"type\": \"application/vnd.lime.contact+json\",\n  \"resource\": {\n    \"identity\": \"{{contact.identity}}\",\n    \"source\": \"Slack\"\n  }\n}",
                        "uri": "{{config.commands}}",
                        "responseStatusVariable": "mergeStatus",
                        "responseBodyVariable": "mergeResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [
                                "@custom.gw.msging.net"
                            ],
                            "source": "context",
                            "variable": "contact.identity",
                            "comparison": "contains"
                        }
                    ]
                },
                {
                    "$id": "7ab3b8fc-c441-454f-ad55-7083c9509330",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "GET user by ID",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Authorization": "{{config.SlackToken}}"
                        },
                        "method": "GET",
                        "uri": "{{config.SlackBaseUrl}}/users.info?user={{userId}}",
                        "responseStatusVariable": "statusUserId",
                        "responseBodyVariable": "responseUserId"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [
                                "Slack"
                            ],
                            "source": "context",
                            "variable": "contact.source",
                            "comparison": "equals"
                        }
                    ]
                },
                {
                    "$id": "de48b2a5-a590-4a71-aff8-18f32d50eb2c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'userData'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n  const { email, first_name, display_name } = JSON.parse(response).user.profile;\n  return {\n    first_name,\n    display_name,\n    email,\n  };\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'userData'] \"+String(err);}}",
                        "inputVariables": [
                            "responseUserId"
                        ],
                        "outputVariable": "userData",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "Slack"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "contact.source"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "welcome",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#1060FD",
                    "label": "Main Bot",
                    "id": "DWNT9c38-c025-4181-9bbd-966ff8ff9bb0",
                    "canChangeBackground": false
                }
            ],
            "id": "onboarding",
            "root": true,
            "$title": "Onboarding - Main - HML",
            "$position": {
                "top": "149px",
                "left": "543px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "fallback": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-01",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                            "type": "text/plain",
                            "content": "<b>ðŸš¨ Debug DWN Error Report ðŸš¨</b>\n\n<b>ðŸ“„ Error Summary</b>\n- <b>Type:</b> {{dwn@error.type}}\n- <b>Description:</b> {{dwn@error.description}}\n- <b>Message:</b> {{dwn@error.message}}\n- <b>Intent:</b> {{dwn@error.intent}}\n- <b>Recurrence:</b> {{dwn@error.recurrence.combined}}\n",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                                "type": "text/plain",
                                "content": "<b>ðŸš¨ Debug DWN Error Report ðŸš¨</b>\n\n<b>ðŸ“„ Error Summary</b>\n- <b>Type:</b> {{dwn@error.type}}\n- <b>Description:</b> {{dwn@error.description}}\n- <b>Message:</b> {{dwn@error.message}}\n- <b>Intent:</b> {{dwn@error.intent}}\n- <b>Recurrence:</b> {{dwn@error.recurrence.combined}}\n"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-02",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "111c9658-e7f7-4b84-abd0-8526ae1fd1d5",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 250
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "111c9658-e7f7-4b84-abd0-8526ae1fd1d5",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 250
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-03",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                            "type": "text/plain",
                            "content": "<b>ðŸ“œ Stack Trace</b>\n  {{dwn@error.stack}}\n",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                                "type": "text/plain",
                                "content": "<b>ðŸ“œ Stack Trace</b>\n  {{dwn@error.stack}}\n"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-04",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "ab528df8-642d-49f0-804a-2e2b86631768",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 250
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "ab528df8-642d-49f0-804a-2e2b86631768",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 250
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-05",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                            "type": "text/plain",
                            "content": "<b>âš™ï¸ Execution Context</b>\n- <b>ID:</b> {{dwn@error.state.id}}\n- <b>Service:</b> {{dwn@error.state.service}}\n- <b>State:</b> {{dwn@error.state.name}}\n\n<b>â†ªï¸ Return Context</b>\n- <b>ID:</b> {{dwn@error.goto.id}}\n- <b>Service:</b> {{dwn@error.goto.service}}\n- <b>State:</b> {{dwn@error.goto.name}}\n",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                                "type": "text/plain",
                                "content": "<b>âš™ï¸ Execution Context</b>\n- <b>ID:</b> {{dwn@error.state.id}}\n- <b>Service:</b> {{dwn@error.state.service}}\n- <b>State:</b> {{dwn@error.state.name}}\n\n<b>â†ªï¸ Return Context</b>\n- <b>ID:</b> {{dwn@error.goto.id}}\n- <b>Service:</b> {{dwn@error.goto.service}}\n- <b>State:</b> {{dwn@error.goto.name}}\n"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/FALL_ERR_RPT#cf5f146e-0c28-4571-94af-e9c4bceda19c-06",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "fd421090-dbfc-4eb9-87fa-f485bdf4628b",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 250
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "fd421090-dbfc-4eb9-87fa-f485bdf4628b",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 250
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwn@user.debug",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "53d9b776-4c6a-4326-b27a-e7cbae6d9a1a",
                                "type": "text/plain",
                                "content": "User input"
                            },
                            "editable": false,
                            "deletable": false,
                            "position": "right"
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "stateId": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
                    "typeOfStateId": "state",
                    "$connId": "con_68",
                    "$id": "e29b5bf2-f726-4e8f-add6-dadd8ac63d77",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "menu",
                                "menu principal",
                                "#menu"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "ed96a1fe-5177-4471-b412-ed7d3450eab0",
                    "typeOfStateId": "state",
                    "$connId": "con_73",
                    "$id": "c6b364ab-7989-433b-94f7-b6aa37d84853",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "INACTIVITY"
                            ],
                            "variable": "dwn@error.type"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
                    "typeOfStateId": "state",
                    "$connId": "con_78",
                    "$id": "b933936f-6cc8-4196-9149-fc4ba628e158",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "MENU"
                            ],
                            "variable": "error@type"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
                    "typeOfStateId": "state",
                    "$connId": "con_83",
                    "$id": "9d6546d8-e813-4d35-851c-d6d29e6ab9be",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "GO_BACK"
                            ],
                            "variable": "error@type"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@return.bot",
                            "values": [
                                "null"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "regular-error",
                    "typeOfStateId": "state",
                    "$connId": "con_88",
                    "$id": "88fd1311-7300-4206-8fb3-581dde2b534e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "GO_BACK"
                            ],
                            "variable": "error@type"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "$id": "DWNT94d2-cff0-46cc-ae50-491089fc7b88",
                    "stateId": "DWNT2ed1-aada-425e-a805-2558a70a1dbf",
                    "typeOfStateId": "state",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "startsWith",
                            "values": [
                                "#debug"
                            ]
                        }
                    ],
                    "$connId": "con_93",
                    "$invalid": false
                },
                {
                    "stateId": "72db954c-7595-42de-8c3c-00813d133f9c",
                    "typeOfStateId": "state",
                    "$connId": "con_98",
                    "$id": "8c698e1c-51a8-46f3-bca7-6b59e188e507",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "ID_SLACK_UNRECONIZED",
                                "CPF_NAO_ENCONTRADO"
                            ],
                            "variable": "error@type"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@recurrence.state",
                            "values": [
                                "2"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "2f9035ce-4a81-4f1c-bb45-aec2117a96f8",
                    "typeOfStateId": "state",
                    "$connId": "con_103",
                    "$id": "d66db6e6-38af-46d7-a006-a5f6e51d289d",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "2"
                            ],
                            "variable": "error@recurrence.state"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@recurrence.type",
                            "values": [
                                "2"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "$id": "DWNT36e7-2ee6-4a4d-a26a-36f537de8619",
                    "stateId": "2445bfcc-a50e-4c2e-adc7-176f78a0f1bc",
                    "typeOfStateId": "state",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "error@type",
                            "values": [
                                "CPF_NAO_ENCONTRADO"
                            ]
                        },
                        {
                            "source": "context",
                            "variable": "error@type",
                            "comparison": "notEquals",
                            "values": [
                                "ID_SLACK_UNRECONIZED"
                            ]
                        }
                    ],
                    "$connId": "con_108",
                    "$invalid": false
                },
                {
                    "stateId": "81e8919b-9bde-4a27-8652-fa2005132dd0",
                    "typeOfStateId": "state",
                    "$connId": "con_113",
                    "$id": "6d9de0c4-e88d-4904-9ec6-448867eb9e71",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": [],
                            "variable": "error@recurrence.state"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "$id": "DWN#a9e4d6a6-e91a-4eea-97ce-ed4ddb07d6ba",
                    "stateId": "DWN/ERR_BLK#dbaa315a-b338-43cb-bd45-1e24881760fd",
                    "typeOfStateId": "state",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error",
                            "values": []
                        }
                    ],
                    "$connId": "con_118",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "DWN/ERR_SCT#39458ff2-7ec8-426e-bc3b-6ef4f9bac8a7",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "DWN Create Error",
                    "settings": {
                        "function": "dwnRun",
                        "source": "/**\n * @author     [Beuren Bechlin] <beuren.bechlin@dawntech.dev>\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n *\n * ---\n *\n * This software is the proprietary property of Dawntech.\n * Possession, use, duplication, or dissemination of this software is strictly\n * prohibited unless you have received prior written permission from\n * Dawntech.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nasync function dwnRun(dwnStr, coreStr, configStr, statesStr, errorStr) {\n  dwnStr = dwnStr || \"\";\n  coreStr = coreStr || \"\";\n  configStr = configStr || \"\";\n  statesStr = statesStr || \"\";\n  errorStr = errorStr || \"\";\n  let warnings = [];\n  let error = DwnError.fromDwnError(errorStr);\n  let core = null;\n  let dwn = null;\n  let states = {};\n  let config = null;\n  try {\n    if (error && SYSTEM_DWN_ERRORS.includes(error.type)) {\n      throw error;\n    }\n    try {\n      core = JSON.parse(coreStr);\n    } catch (err) {\n      warnings.push(`[create-error] Unexpected core JSON ${String(err)}`);\n      throw new Error(`core parsing ${String(err)}`);\n    }\n    warnings = core.warnings;\n    try {\n      dwn = JSON.parse(dwnStr);\n    } catch (err) {\n      warnings.push(`[create-error] Unexpected dwn JSON ${String(err)}`);\n      throw new Error(`dwn parsing ${String(err)}`);\n    }\n    try {\n      states = JSON.parse(statesStr);\n    } catch (err) {\n      warnings.push(`[create-error] Unexpected states JSON ${String(err)}`);\n      throw new Error(`states parsing ${String(err)}`);\n    }\n    try {\n      config = JSON.parse(configStr);\n    } catch (err) {\n      warnings.push(`[create-error] Unexpected config JSON ${String(err)}`);\n      throw new Error(`config parsing ${String(err)}`);\n    }\n    let type = config.error.default;\n    let intent = dwn.intent ? dwn.intent.id : null;\n    let description = undefined;\n    let messages = core.messages;\n    let state = enforceState(\n      \"{{state.previous.id}}\",\n      core.service,\n      states\n    );\n    let goto = null;\n    if (error) {\n      type = error.type;\n      description = error.description;\n      messages = error.messages || [];\n      if (error.message) {\n        messages = [error.message];\n      }\n      if (error.goto === undefined) {\n        goto = state;\n      } else {\n        goto = error.goto;\n      }\n    } else {\n      error = new DwnError(type, \"Default error\");\n      description = \"Default error\";\n      goto = state;\n    }\n    if (intent === \"CHECKPOINT_BACK\") {\n      const checkpointIndex = core.checkpoints.findIndex(\n        (checkpoint) => checkpoint.id === core.state.id && checkpoint.service === core.service\n      );\n      if (checkpointIndex >= 0) {\n        core.checkpoints.splice(0, checkpointIndex + 1);\n      }\n    } else if (core.checkpoint) {\n      if (!(dwn.intent && dwn.intent.id && dwn.intent.scope === \"prepare\")) {\n        core.checkpoints.splice(0, 1);\n      }\n    }\n    if (dwn.intent && dwn.intent.scope === \"stack\") {\n      const stackIndex = core.intents.stack.findIndex(\n        (intentsGroup) => intentsGroup.id === dwn.intent.event\n      );\n      if (stackIndex >= 0) {\n        core.intents.stack.splice(0, stackIndex + 1);\n      }\n    }\n    if (type === \"PROPAGATE\") {\n      throw DwnError.fromJson(dwn.error);\n    }\n    if (type === \"RUNTIME_ERROR\") {\n      throw error;\n    }\n    const recurrence = error.recurrence;\n    const lastError = core.errors[0];\n    if (lastError && recurrence.combined > 0) {\n      if (lastError.state.id == state.id) {\n        recurrence.state = lastError.recurrence.state + 1;\n      }\n      if (lastError.type == type) {\n        recurrence.type = lastError.recurrence.type + 1;\n      }\n      recurrence.combined = Math.min(recurrence.state, recurrence.type);\n    }\n    error.type = type;\n    error.at = dwn.calendar.datetime;\n    error.content = dwn.input.content;\n    error.state = state;\n    error.recurrence = recurrence;\n    error.goto = enforceState(goto, core.service, states);\n    error.intent = intent;\n    error.description = description;\n    error.message = error.message || undefined;\n    if (messages.length === 0 && error.intent && error.intent in config.messages.intent) {\n      messages = config.messages.intent[error.intent];\n    }\n    if (messages.length === 0 && dwn.input.type in config.messages.type) {\n      messages = config.messages.type[dwn.input.type];\n    }\n    if (messages.length === 0 && error.type in config.messages.error) {\n      messages = config.messages.error[error.type];\n    }\n    core.messages = messages;\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[create-error] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\"RUNTIME_ERROR\", description, {\n        stack,\n        goto: null\n      });\n    }\n    error = err;\n  } finally {\n    if (!core || typeof core !== \"object\") {\n      core = {};\n    }\n    if (error) {\n      core.error = error.toJson();\n    }\n    core.warnings = warnings;\n    coreStr = JSON.stringify(core);\n  }\n  if (error) {\n    await context.deleteVariableAsync(\"dwnError\");\n  }\n  return coreStr;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n\n\nfunction enforceState(state, currentService, states) {\n  if (!state && typeof state !== \"string\") {\n    return state;\n  }\n  const id = typeof state === \"string\" ? state : state.id;\n  if (!id) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `State ${JSON.stringify(state)} must have 'id' property.`\n    );\n  }\n  const key = `${id}@${currentService}`;\n  let service = typeof state === \"string\" ? currentService : state.service;\n  if (!service) {\n    service = currentService;\n  }\n  let name = typeof state === \"string\" ? \"\" : state.name;\n  if (!name) {\n    name = states[key] || undefined;\n  }\n  return { id, service, name };\n}\n",
                        "inputVariables": [
                            "dwn",
                            "dwnCore",
                            "dwnConfig",
                            "dwnStates",
                            "dwnError"
                        ],
                        "outputVariable": "dwnCore"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWN/ERR_CLR_TYP#47e331dc-b1f6-4e99-a62f-81f0e7d4953a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "DWN [SETTINGS] Process Error",
                    "settings": {
                        "function": "dwnRun",
                        "source": "/**\n * @author     [Beuren Bechlin] <beuren.bechlin@dawntech.dev>\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n *\n * ---\n *\n * This software is the proprietary property of Dawntech.\n * Possession, use, duplication, or dissemination of this software is strictly\n * prohibited unless you have received prior written permission from\n * Dawntech.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nasync function processError(error, errors, dwn, core, config) {\n  if (error.type !== \"INTENT\" && error.recurrence.combined >= 3) {\n    const messages = config.messages.error[\"RECURRENT_ERROR\"] || [];\n    error.type = \"RECURRENT_ERROR\";\n    error.message = rotateMessages(messages, errors);\n    error.description = \"Recurrence detected\";\n    error.goto = null;\n    return error;\n  }\n  if (error.type === \"INACTIVITY\" && config.messages.error[\"INACTIVITY\"] && config.messages.error[\"INACTIVITY\"].length > 1) {\n    const isFinal = error.recurrence.combined === config.messages.error[\"INACTIVITY\"].length;\n    if (!isFinal) {\n      error.description = \"Intermidiate inactivity message, waiting for user.\";\n      error.goto = error.state;\n    } else {\n      error.description = \"Final inactivity message, closing conversation.\";\n      error.goto = null;\n    }\n    error.message = rotateMessages(\n      config.messages.error[\"INACTIVITY\"],\n      errors\n    );\n    return error;\n  }\n  switch (error.type) {\n    // Exemplo de tratamento de erro especÃ­fico\n    case \"BLOCKED_CONTACT\":\n      error.message = rotateMessages(\n        [\n          \"Desculpe, vocÃª nÃ£o pode interagir com este serviÃ§o. Entre em contato com o suporte para mais informaÃ§Ãµes.\",\n          \"Desculpe, vocÃª foi bloqueado de interagir com este serviÃ§o. Entre em contato com o suporte para mais informaÃ§Ãµes.\"\n        ],\n        errors\n      );\n      error.goto = null;\n      break;\n  }\n  return error;\n}\nfunction rotateMessages(messages, errors) {\n  if (!messages || !Array.isArray(messages) || messages.length === 0) {\n    return undefined;\n  }\n  if (!errors || !Array.isArray(errors) || errors.length === 0) {\n    return messages[0] || undefined;\n  }\n  const lastErrorMessage = errors[0] ? errors[0].message : \"\";\n  const lastMessageIndex = messages.findIndex((m) => m === lastErrorMessage);\n  return messages[(lastMessageIndex + 1) % messages.length] || undefined;\n}\nasync function dwnRun(dwnStr, coreStr, configStr, statesStr, errorStr) {\n  dwnStr = dwnStr || \"\";\n  coreStr = coreStr || \"\";\n  configStr = configStr || \"\";\n  statesStr = statesStr || \"\";\n  errorStr = errorStr || \"\";\n  let service = {\n    current: \"Main - HML\",\n    main: \"Main\"\n  };\n  let propagate = service.current !== service.main ? service.main : undefined;\n  let warnings = [];\n  let error = new DwnError(\n    \"RUNTIME_ERROR\",\n    \"Default error\",\n    { goto: null }\n  );\n  let core = null;\n  let dwn = null;\n  let states = {};\n  let config = null;\n  try {\n    try {\n      core = JSON.parse(coreStr);\n    } catch (err) {\n      warnings.push(`[process-error] Unexpected core JSON ${String(err)}`);\n      throw new Error(`core parsing ${String(err)}`);\n    }\n    warnings = core.warnings;\n    try {\n      dwn = JSON.parse(dwnStr);\n    } catch (err) {\n      warnings.push(`[process-error] Unexpected dwn JSON ${String(err)}`);\n      throw new Error(`dwn parsing ${String(err)}`);\n    }\n    try {\n      states = JSON.parse(statesStr);\n    } catch (err) {\n      warnings.push(`[process-error] Unexpected states JSON ${String(err)}`);\n      throw new Error(`states parsing ${String(err)}`);\n    }\n    if (!core.error) {\n      warnings.push(`[process-error] core error is not defined`);\n      throw new Error(\"core error is not defined\");\n    }\n    try {\n      const error2 = DwnError.fromJson(core.error);\n      if (!error2) throw new Error(\"core error is not defined\");\n      if (error2 && SYSTEM_DWN_ERRORS.includes(error2.type)) {\n        throw error2;\n      }\n      config = JSON.parse(configStr);\n    } catch (error2) {\n      warnings.push(`[process-error] Unexpected error ${String(error2)}`);\n      throw error2;\n    }\n    service = config.service;\n    propagate = core.propagate;\n    let _error = core.error;\n    _error.message = rotateMessages(core.messages, core.errors);\n    _error = await processError(_error, core.errors, dwn, core, config);\n    _error.goto = enforceState(_error.goto, service.current, states);\n    core.errors = core.errors.slice(0, config.stackSize.errors);\n    core.errors.unshift(_error);\n    error = DwnError.fromJson(_error);\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[process-error] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\"RUNTIME_ERROR\", description, {\n        stack,\n        goto: null\n      });\n    }\n    error = err;\n  } finally {\n    if (!dwn || typeof dwn !== \"object\") {\n      dwn = {};\n    }\n    if (!core || typeof core !== \"object\") {\n      core = {};\n    }\n    core.propagate = propagate;\n    if (SYSTEM_DWN_ERRORS.includes(error.type)) {\n      error = systemErrorRecovery(error, service);\n    }\n    if (error.code && error.message) {\n      error.message = error.message.replace(\"{{code}}\", error.code);\n    }\n    if (error.goto) {\n      if (!error.goto.service) {\n        error.goto.service = service.current;\n      }\n      if (!error.goto.id) {\n        error.goto.id = \"onboarding\";\n      }\n      if (error.goto.service !== service.current) {\n        core.redirect = true;\n      }\n      errorStr = \"\";\n    } else {\n      if (core.propagate) {\n        core.redirect = true;\n        errorStr = \"PROPAGATE\";\n      }\n      error.goto = undefined;\n    }\n    core.error = error.toJson();\n    dwn.error = error.toJson();\n    core.warnings = warnings;\n    if (core.warnings.length > 0) {\n      dwn.warnings = core.warnings.join(\"\\n\");\n    }\n    dwnStr = JSON.stringify(dwn);\n  }\n  if (errorStr === \"PROPAGATE\") {\n    await context.setVariableAsync(\"dwnError\", errorStr);\n  }\n  if (core && typeof core === \"object\") {\n    await context.setVariableAsync(\"dwnCore\", JSON.stringify(core));\n  }\n  return dwnStr;\n}\nfunction systemErrorRecovery(error, services) {\n  const messages = {\n    [\"RUNTIME_ERROR\"]: \"Desculpe, houve um erro inesperado. Por favor, tente novamente mais tarde.\",\n    [\"MISCONFIGURATION_ERROR\"]: \"Desculpe, houve uma falha inesperada. Por favor, tente novamente mais tarde.\"\n  };\n  if (messages[error.type]) {\n    error.message = messages[error.type];\n  } else {\n    error.message = messages[\"RUNTIME_ERROR\"];\n  }\n  if (services.current === services.main) {\n    error.goto = undefined;\n  } else {\n    error.goto = {\n      id: \"onboarding\",\n      service: services.main\n    };\n  }\n  return error;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n\n\nfunction enforceState(state, currentService, states) {\n  if (!state && typeof state !== \"string\") {\n    return state;\n  }\n  const id = typeof state === \"string\" ? state : state.id;\n  if (!id) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `State ${JSON.stringify(state)} must have 'id' property.`\n    );\n  }\n  const key = `${id}@${currentService}`;\n  let service = typeof state === \"string\" ? currentService : state.service;\n  if (!service) {\n    service = currentService;\n  }\n  let name = typeof state === \"string\" ? \"\" : state.name;\n  if (!name) {\n    name = states[key] || undefined;\n  }\n  return { id, service, name };\n}\n",
                        "inputVariables": [
                            "dwn",
                            "dwnCore",
                            "dwnConfig",
                            "dwnStates",
                            "dwnError"
                        ],
                        "outputVariable": "dwn"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNT9690-d4f6-4cc5-a103-abb28f0cb1bb",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Create error",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(DWNT, errorType, errorMessage, stateId, stateName, inputContent) {\n\tlet error = {};\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || \"\");\n\t\tlet errorDescription = \"Not defined\";\n\t\tif (String(errorType).startsWith(\"SCRIPT_ERROR\")) {\n\t\t\terrorDescription = errorType.replace(\"SCRIPT_ERROR \", \"\");\n\t\t\terrorType = \"SCRIPT_ERROR\";\n\t\t}\n\t\terror[\"type\"] = errorType || \"UNEXPECTED_INPUT\";\n\t\terror[\"message\"] = errorMessage || null;\n\t\terror[\"description\"] = errorDescription;\n\t\terror[\"state\"] = {\n\t\t\t\"id\": stateId, \n\t\t\t\"name\": stateName, \n\t\t\t\"bot\": DWNT.application[\"bot\"],\n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\terror[\"input\"] = DWNT.input;\n\t\terror[\"return\"] = {\"state\": stateId, \"bot\": null, \"service\": DWNT.application[\"service\"]};\n\t\tconst recurrence = {\"state\": 1, \"type\": 1};\n\t\tif (DWNT.error && DWNT.error[\"state\"] && DWNT.error[\"type\"]) {\n\t\t\tif (DWNT.error[\"state\"][\"id\"] == error[\"state\"][\"id\"]) {\n\t\t\t\trecurrence[\"state\"] = DWNT.error[\"recurrence\"][\"state\"] + 1;\n\t\t\t}\n\t\t\tif (DWNT.error[\"type\"] == error[\"type\"]) {\n\t\t\t\trecurrence[\"type\"] = DWNT.error[\"recurrence\"][\"type\"] + 1;\n\t\t\t}\n\t\t}\n\t\terror[\"recurrence\"] = recurrence;\n\n\t\t// Checkpoints\n\t\tif (error[\"type\"] == \"GO_BACK\") {\n\t\t\terror[\"return\"] = get_last_checkpoint(DWNT, error);\n\t\t\tif (DWNT[\"application\"][\"bot\"] == error[\"return\"][\"bot\"]) {\n\t\t\t\terror[\"return\"][\"bot\"] = null;\n\t\t\t}\n\t\t\terror[\"message\"] = null;\n\t\t}\n\n\t\tif (inputContent.startsWith(\"#goto\")) {\n\t\t\tconst id = inputContent.replace(\"#goto \", \"\");\n\t\t\terror[\"type\"] = \"GO_TO\";\n\t\t\terror[\"message\"] = null;\n\t\t\terror[\"return\"][\"state\"] = id;\n\t\t}\n\t\t\n\t} catch(err) {\n\t\terror = {\n\t\t\t\"type\": \"UNEXPECTED_INPUT\",\n\t\t\t\"message\": null,\n\t\t\t\"return\": {\"state\": stateId, \"bot\": null},\n\t\t\t\"err\": String(err)\n\t\t};\n\t}\n\treturn JSON.stringify(error);\n}\n\n\nfunction get_last_checkpoint(DWNT, error) {\n\tlet return_info = error[\"return\"];\n\tif (Array.isArray(DWNT.checkpoints) && DWNT.checkpoints.length > 0) {\n\t\treturn_info = DWNT.checkpoints[0];\n\t}\n\treturn return_info;\n}\n",
                        "inputVariables": [
                            "DWNT",
                            "errorType",
                            "errorMessage",
                            "state.previous.id",
                            "state.previous.name",
                            "input.content"
                        ],
                        "outputVariable": "error",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNT54dd-5acd-4825-bf2c-4eecf680f28d",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "[DWNT] Delete 'ErrorType'",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "delete",
                        "uri": "/contexts/{{contact.identity}}/errorType",
                        "variable": "deleteErrorTypeCmdResp"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "errorType"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWNTfc8a-dfd0-4df0-8ce9-c6225f4054ba",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "[DWNT] Delete 'ErrorMessage'",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "delete",
                        "uri": "/contexts/{{contact.identity}}/errorMessage",
                        "variable": "deleteErrorMessageCmdResp"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "errorMessage"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWNTba8a-3d8e-49b9-a997-c8e4d3a0175f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] Set fromError",
                    "settings": {
                        "variable": "fromError",
                        "value": "true"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNTc3a6-77e7-4681-b3a6-3e8d97c4c6f3",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "<ALTERAR> [DWNT] Process error",
                    "settings": {
                        "function": "run",
                        "source": "/**\n * Decodifica o erro registrado em informaÃ§Ãµes de:\n * - Mensagem que serÃ¡ mostrada\n * - Necessidade de parada do fluxo\n * - Id de retorno caso em caso de reentrada\n * \n * @param {{type: string, message: string, input: {content: string, type: string, group: string}, state: {id: string, name: string}, recurrence: {state: number, type: number}, return: {state: string, bot: string}}} error Error prÃ©-preenchido.\n * \n * @returns {{type: string, message: string, input: {content: string, type: string, group: string}, state: {id: string, name: string}, recurrence: {state: number, type: number}, return: {state: string, bot: string}}} Erro final\n */\nfunction process_error(error) {\n\n\tif (error.message == null) {\n\t\terror[\"message\"] = get_content_message(error.input.group);\n\t}\n\n\tswitch(error.type) {\n\t\tcase \"GO_BACK\":\n\t\tcase \"GO_TO\":\n\t\t\terror[\"message\"] = null;\n\t\t\tbreak;\n\t\tcase \"CLOSE\":\n\t\t\terror[\"message\"] = \"Obrigado por nos contatar! ðŸ˜Š Se precisar de mais ajuda, nÃ£o hesite em nos procurar novamente.\";\n\t\t\terror[\"return\"][\"state\"] = null;\n\t\t\tbreak;\n\t\tcase \"API\":\n\t\t\terror[\"message\"] = \"\";\n\t\t\terror[\"return\"][\"state\"] = \"d2a50ed0-870e-47bd-a4dc-d2c3d6f2aac8\";\n\t\t\tbreak;\n\t\tcase \"SCRIPT_ERROR\":\n\t\t\terror[\"message\"] = \"Desculpe, algo inesperado aconteceu. ðŸ™ Estamos resolvendo! Por favor, tente novamente em alguns minutos.\";\n\t\t\terror[\"return\"][\"state\"] = null;\n\t\t\tbreak;\n\t\tcase \"ID_SLACK_UNRECONIZED\":\n\t\t\terror[\"message\"] = \"Ei! Parece que seu usuÃ¡rio do Slack nÃ£o estÃ¡ ligado a esse CPF. DÃ¡ uma conferida e, se precisar, contate o *time de Pops*.\";\n\t\t\terror[\"return\"][\"state\"] = null;\n\t\t\tbreak;\n\t\tcase \"CPF_NAO_ENCONTRADO\":\n\t\t\terror[\"message\"] = \"Ops, nÃ£o encontrei aqui! ðŸ¤”\\n\\nTenta digitar de novo pra mim (sÃ³ os nÃºmeros, tÃ¡?)\";\n\t\t\terror[\"return\"][\"state\"] = \"a808db71-41e9-4e7b-aed1-409bcad915a7\";\n\t\t\tbreak;\n\t\tcase \"MARCAR_PONTO\":\n\t\t\terror[\"message\"] = \"NÃ£o consegui marcar o seu ponto, mas nÃ£o se preocupe! VocÃª pode registrar pelo portal, Ã© sÃ³ clicar no <https://login.lg.com.br/saml/auto/neonf=4C793534445346586E766C42707655476979446776513D3D|link>.\";\n\t\t\terror[\"return\"][\"state\"] = \"9c8fcb9f-5329-4bd4-8147-16158b790fd4\";\n\t\t\tbreak;\n\t\tcase \"SALDO_HORAS\":\n\t\t\terror[\"message\"] = \"NÃ£o consegui encontrar as informaÃ§Ãµes do saldo do banco de horas, peÃ§o que tente novamente mais tarde.\";\n\t\t\terror[\"return\"][\"state\"] = \"9c8fcb9f-5329-4bd4-8147-16158b790fd4\";\n\t\t\tbreak;\n\t\tcase \"LINK_ESPELHO\":\n\t\t\terror[\"message\"] = \"Ops! Parece que houve um problema ao tentar gerar o espelho de ponto. Por favor, tente novamente mais tarde ou acesse a plataforma pelo <https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=2824&uid=1283037876&tipo=1|link>\";\n\t\t\terror[\"return\"][\"state\"] = \"9c8fcb9f-5329-4bd4-8147-16158b790fd4\";\n\t\t\tbreak;\n\t}\n\treturn error;\n}\n\nfunction get_content_message(group) {\n\tlet message;\n\tif (group == \"audio\") {\n\t\tmessage = \"Oops! *NÃ£o consigo escutar seu Ã¡udio agora*...â˜¹ï¸\\n\\nPor favor, escolha uma opÃ§Ã£o no menu.\"\n\t} else if (group == \"image\") {\n\t\tmessage = \"Oops! *NÃ£o consigo receber imagens agora*...â˜¹ï¸\\n\\nPor favor, escolha uma opÃ§Ã£o no menu.\"\n\t} else if (group == \"video\") {\n\t\tmessage = \"Oops! *NÃ£o consigo receber vÃ­deos agora*...â˜¹ï¸\\n\\nPor favor, escolha uma opÃ§Ã£o no menu.\"\n\t} else if (group == \"document\") {\n\t\tmessage = \"Oops! *NÃ£o consigo receber documentos agora*...â˜¹ï¸\\n\\nPor favor, escolha uma opÃ§Ã£o no menu.\"\n\t} else if (group == \"location\") {\n\t\tmessage = \"NÃ£o consigo receber localizaÃ§Ã£o ainda! Por favor, responda apenas com texto ou toque em uma das opÃ§Ãµes do menu.\"\n\t} else {\n\t\tmessage = \"\"//\"Oops! NÃ£o consegui entender sua pergunta. Tente de novo!\\n\\nPor favor, reformule sua dÃºvida com outras palavras ou escolha uma opÃ§Ã£o no menu.\"\n\t}\n\treturn message;\n}\n\nfunction run(error, stateId) {\n\ttry {\n\t\terror = JSON.parse(error || '');\n\t\terror = process_error(error);\n\t} catch(err) {\n\t\terror = {\n\t\t\t\"type\": \"UNEXPECTED_INPUT\",\n\t\t\t\"message\": \"Desculpe, nÃ£o consegui compreender.\",\n\t\t\t\"return\": {\"state\": stateId, \"bot\": null},\n\t\t\t\"description\": String(err)\n\t\t};\n\t}\n\treturn JSON.stringify(error);\n}\n",
                        "inputVariables": [
                            "error",
                            "state.previous.id"
                        ],
                        "outputVariable": "error",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNTc07c-b96a-498b-8b8e-a419de261dea",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Update SDK (fallback)",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(DWNT, error) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT);\n\t\terror = JSON.parse(error);\n\t\tDWNT.error = error;\n\t\tDWNT.fromError = true;\n\t\t// checkpoint\n\t\tif (error[\"type\"] == \"GO_BACK\") {\n\t\t\tDWNT.checkpoints.shift();\n\t\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t}\n\t} catch(err) {\n\t\tDWNT = {err: String(err)};\n\t}\n\treturn JSON.stringify(DWNT);\n}\n\n",
                        "inputVariables": [
                            "DWNT",
                            "error"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNT1209-129c-4c9e-98f6-f8a69315dc84",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DWNT] Track Error",
                    "settings": {
                        "extras": {
                            "type": "{{error@type}}",
                            "bot": "{{error@state.bot}}",
                            "stateName": "{{error@state.name}}",
                            "stateId": "{{error@state.id}}",
                            "journey": "{{DWNT@journey}}"
                        },
                        "category": "DWNT-ERROR",
                        "action": "{{DWNT@datetime}} | {{contact.identity}} | {{error@type}} | {{error@state.bot}} | {{error@state.name}} | {{input.content}}"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNT4400-3f6c-4147-97f7-af7e0d5f415b",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DWNT] Track Script-Error",
                    "settings": {
                        "extras": {
                            "error": "{{error@description}}",
                            "bot": "{{error@state.bot}}",
                            "stateName": "{{error@state.name}}",
                            "stateId": "{{error@state.id}}",
                            "journey": "{{DWNT@journey}}"
                        },
                        "category": "DWNT-SCRIPT-ERROR",
                        "action": "{{DWNT@datetime}} | {{contact.identity}} | {{error@description}} | {{error@state.bot}} | {{error@state.name}}"
                    },
                    "conditions": [
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@type"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWNT9a73-2ed4-45ea-becc-8fb97483ba0d",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DWNT] Track Error Block",
                    "settings": {
                        "extras": {},
                        "category": "DWNT-ERROR-BLOCK",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [],
                    "$invalid": false
                },
                {
                    "$id": "DWNT3cf6-f18c-49f1-bca7-3ffc8d9efef2",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DWNT] Track Inactivity Block",
                    "settings": {
                        "extras": {},
                        "category": "DWNT-INACTIVITY-BLOCK",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "values": [
                                "INACTIVITY"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "DWNT@error.type"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": []
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": []
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    }
                },
                {
                    "$id": "c43457e7-9019-44f6-92a1-b0c1b3ae5554",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Erro por assunto",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[Erro por assunto] {{subfluxo}}",
                        "action": "{{calendar.datetime}} | {{contact.email}} | {{subfluxo}} | {{error@type}}"
                    },
                    "conditions": []
                },
                {
                    "$id": "5d8ae958-0214-4325-8c90-e495d4557969",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Erro em assunto geral",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Erro em assunto geral",
                        "action": "{{calendar.datetime}} | {{contact.email}} | {{subfluxo}} | {{error@type}}"
                    },
                    "conditions": []
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWN/FALL_DBG_CNT#11e810a3-50f8-4b42-85f8-cd4fd41fb4e4",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "DWN Invert user debug",
                    "settings": {
                        "extras": {
                            "debug": "{{dwn@user.debug}}"
                        }
                    },
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "dwnError"
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "dwn@error"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "dwn@error.type",
                            "values": [
                                "DEBUG"
                            ]
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_GLB#a4abfb08-d1bd-4eb4-87f6-4eb5b7e45b72",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Global errors by type",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-global-errors-by-type",
                        "action": "{{dwn@error.type}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.type"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_LOC#0546eab9-37c2-48cf-a307-203ed426f837",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Local errors by type",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-{{dwnCore@service}}-errors-by-type",
                        "action": "{{dwn@error.type}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.type"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_GLB_NO_UNX#6f2b8f0e-cfc3-40ea-8c49-7654b4ba23f4",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Global errors by type excluding unexpected",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-global-errors-by-type-no-unexpected",
                        "action": "{{dwn@error.type}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.type"
                        },
                        {
                            "values": [
                                "UNEXPECTED_INPUT"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error.type"
                        },
                        {
                            "values": [
                                "UNEXPECTED_OPTION"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error.type"
                        },
                        {
                            "values": [
                                "INTENT"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error.type"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_LOC_NO_UNX#df8f13b4-01af-45cd-be48-71e32fd58bfe",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Local errors by type excluding unexpected",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-{{dwnCore@service}}-errors-by-type-no-unexpected",
                        "action": "{{dwn@error.type}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.type"
                        },
                        {
                            "values": [
                                "UNEXPECTED_INPUT"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [
                                "UNEXPECTED_OPTION"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [
                                "INTENT"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dwn@error"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_LST#e14cd0d0-5afc-43aa-94dc-5fd9ef290a25",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Global errors by type list",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-errors-by-type-list",
                        "action": "{{dwn@error.at}} | {{contact.identity}} | {{dwn@error.type}} | {{dwn@error.state.id}} | {{dwn@error.state.service}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ERR_LST_NO_UNX#5b218295-a606-4a00-879d-b56ad788cb30",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Global errors by type excluding unexpected list",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-errors-by-type-list-no-unexpected",
                        "action": "{{dwn@error.at}} | {{contact.identity}} | {{dwn@error.state.id}} | {{dwn@error.state.service}} | {{dwn@error.stack}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_TRK_ABD#e1994e39-2bfd-4ec1-a406-c77048e7a1d5",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Abandonment rate",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-finalization-status",
                        "action": "{{dwn@error.status}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwn@error.goto"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.status"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/FALL_BUB_ERR#407cd0ab-2766-4e0f-9892-406ffb22033d",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "DWN Bubbled errors by type",
                    "settings": {
                        "extras": {
                            "journey": "{{dwn@journey}}"
                        },
                        "category": "dwn-bubbled-errors-by-type",
                        "action": "{{dwn@error.type}}"
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.type"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwn@error.goto"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "fallback",
            "$title": "Fallback - Main - HML",
            "$position": {
                "top": "251px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "welcome": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "af79fd77-f35a-4005-8213-339a36c4ac8a",
                        "$typeOfContent": "chat-state",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "3fe506a1-6e45-496a-bcb5-0cea4b7f062d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "3fe506a1-6e45-496a-bcb5-0cea4b7f062d",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "f3404a36-7a1c-437b-8267-7cd6a68d088d",
                        "$typeOfContent": "text",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "a510eb04-7a30-4b58-bf70-c4567f04e110",
                            "type": "text/plain",
                            "content": "{{responseGepeto}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "a510eb04-7a30-4b58-bf70-c4567f04e110",
                                "type": "text/plain",
                                "content": "{{responseGepeto}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "079be013-7163-490f-847a-8561b560262e",
                                "type": "text/plain",
                                "content": "User Input"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                    "typeOfStateId": "state",
                    "$connId": "con_123",
                    "$id": "5ef3ef7d-2b29-426a-a31d-190c9990ba4b",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#hml@reiniciar"
                            ],
                            "variable": "firstContent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "3e11813d-1938-426b-9450-0edb310e4aa1",
                    "typeOfStateId": "state",
                    "$connId": "con_128",
                    "$id": "b6dc55c4-d1ea-4162-8a18-77e8f3e33d08",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "5174bba3-e5ea-4b7b-801e-1679a3fca6fc",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userData, source) {\n\tlet nickname = \"{nickname}\";\n\t\n\ttry {\n\t\tif(source === \"Slack\") {\n\t\t\tconst { display_name, first_name } = JSON.parse(userData);\n\t\t\tnickname = display_name || first_name;\n\t\t}\n\t} catch (error) {\n\t\tnickname = \"{nickname.catch}\"\t\t\n\t} \n\t\n\treturn `Oi, ${nickname}! Eu sou a Sol, sua nova parceira por aqui. ðŸ’™ Posso te ajudar com fÃ©rias, folha de pagamento, ponto e dados cadastrais. Logo logo vou poder te ajudar com muito mais coisas incrÃ­veis! ðŸŒž`;\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "userData",
                            "contact.source"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4b7b-801e-1679a3fca6fc",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "9ae97928-c4f0-4914-b37f-1f56d56317a2",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Taxa Transbordo",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Taxa Transbordo",
                        "action": "Conversa iniciada"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "4b1ea000-426b-46b3-bba9-33777a9dde6c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Contatos Unicos",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Contatos Unicos",
                        "action": "{{contact.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "variable": "contact.taxDocument",
                            "comparison": "exists",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "a9af8dc1-865d-4cad-8bc4-27e3935884bb",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "ProcessHttp",
                    "$title": "RequisiÃ§Ã£o HTTP",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Authorization": "{{config.openAiBearer}}"
                        },
                        "method": "POST",
                        "body": "{\n    \"model\": \"o4-mini\",\n    \"input\": [\n        {\n            \"role\": \"developer\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"{{resource.promptSol}}\"\n                },\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"Diga uma saudaÃ§Ã£o para {{userData@display_name}} e que estÃ¡ buscando informaÃ§Ãµes do cadastro dessa pessoa para ajudar no que ele precisar.\"\n                }\n            ]\n        },\n        {\n            \"role\": \"system\",\n            \"content\": \"Responda de forma objetiva.\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"{{input.content}}\"\n                }\n            ]\n        }\n    ],\n    \"text\": {\n        \"format\": {\n            \"type\": \"text\"\n        },\n        \"verbosity\": \"medium\"\n    },\n    \"reasoning\": {\n        \"effort\": \"medium\",\n        \"summary\": \"auto\"\n    },\n    \"tools\": [\n        {\n            \"type\": \"file_search\",\n            \"vector_store_ids\": [\n                \"{{config.vectorId}}\"\n            ]\n        }\n    ],\n    \"store\": true,\n    \"include\": [\n        \"reasoning.encrypted_content\",\n        \"web_search_call.action.sources\"\n    ]\n}",
                        "uri": "{{config.openAiUrl}}/v1/responses",
                        "responseStatusVariable": "statusGepeto",
                        "responseBodyVariable": "responseGepeto"
                    },
                    "conditions": []
                },
                {
                    "$id": "07b9a1df-3034-4a24-a4ca-ba983844ce05",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "ExecuteScriptV2",
                    "$title": "GET 'responseGepeto'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst { output } = JSON.parse(response);\n\n\t\treturn output.find(item => item.type === \"message\").content[0].text;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}",
                        "inputVariables": [
                            "responseGepeto"
                        ],
                        "outputVariable": "responseGepeto",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": []
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "welcome",
            "$title": "Welcome",
            "$position": {
                "top": "301px",
                "left": "270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "error": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "539af18a-eb5c-4298-901a-1a4415c7b1e6",
                        "$typeOfContent": "",
                        "type": "SendMessage",
                        "settings": {
                            "id": "00000000-0000-0000-0000-000000000002",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "00000000-0000-0000-0000-000000000002",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left",
                            "editing": false
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "deac1243-5a58-4200-b977-a81aae2cb6d6",
                        "$typeOfContent": "",
                        "type": "SendMessage",
                        "settings": {
                            "id": "00000000-0000-0000-0000-000000000003",
                            "type": "text/plain",
                            "content": "Desculpe, nÃ£o consegui entender!"
                        },
                        "$cardContent": {
                            "document": {
                                "id": "00000000-0000-0000-0000-000000000003",
                                "type": "text/plain",
                                "content": "Desculpe, nÃ£o consegui entender!"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left",
                            "editing": false
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c69fecbe-c03e-4f6e-a355-f031605ae2d1",
                                "type": "text/plain",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:10",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "error",
            "$title": "Default error",
            "$position": {
                "top": "886px",
                "left": "3350px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ff8370c1-1c81-4b20-9097-9e002d0deca7": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "64fb6a78-ada3-4d66-aad9-5b5bf52aaa48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "5256d4c2-f39b-410d-b47d-e7bc11c1b758",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "5256d4c2-f39b-410d-b47d-e7bc11c1b758",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "ba1aaf49-6533-41cf-882c-a086cb14830b",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "f899fd64-1fb5-4e9e-9615-ca01e971f3f1",
                            "type": "text/plain",
                            "content": "{{responseGepeto}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "f899fd64-1fb5-4e9e-9615-ca01e971f3f1",
                                "type": "text/plain",
                                "content": "{{responseGepeto}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "da8f067f-5774-4130-8acf-d96d8186bcec",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "3e11813d-1938-426b-9450-0edb310e4aa1",
                    "typeOfStateId": "state",
                    "$connId": "con_133",
                    "$id": "9cb43b11-d222-4b5b-9585-d2ac84abcb25",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "1a784f14-f00f-4e9e-91cc-f03fef2ec5a5",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Taxa Transbordo",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Taxa Transbordo",
                        "action": "Conversa iniciada"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "72e53508-96e4-47f6-9238-1d47f4212b4e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Contatos reincidentes",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Contatos reincidentes",
                        "action": "{{contact.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "variable": "contact.taxDocument",
                            "comparison": "exists",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "c2fdf2bb-d28b-48b7-8e6d-b4e879da32b9",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Contatos reincidentes detalhes",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Contatos reincidentes",
                        "action": "{{contact.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "variable": "contact.taxDocument",
                            "comparison": "exists",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "13658640-4b0a-4fbb-93d2-ca45f838fec7",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "ProcessHttp",
                    "$title": "RequisiÃ§Ã£o HTTP",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Authorization": "{{config.openAiBearer}}"
                        },
                        "method": "POST",
                        "body": "{\n    \"model\": \"o4-mini\",\n    \"input\": [\n        {\n            \"role\": \"developer\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"{{resource.promptSol}}\"\n                },\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"Diga uma saudaÃ§Ã£o para {{userData@display_name}} e que irÃ¡ buscar as informaÃ§Ãµes atualizadas do cadastro dessa pessoa para ajudar no que ele precisar.\"\n                }\n            ]\n        },\n        {\n            \"role\": \"system\",\n            \"content\": \"Responda de forma objetiva.\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"{{input.content}}\"\n                }\n            ]\n        }\n    ],\n    \"text\": {\n        \"format\": {\n            \"type\": \"text\"\n        },\n        \"verbosity\": \"medium\"\n    },\n    \"reasoning\": {\n        \"effort\": \"medium\",\n        \"summary\": \"auto\"\n    },\n    \"tools\": [\n        {\n            \"type\": \"file_search\",\n            \"vector_store_ids\": [\n                \"{{config.vectorId}}\"\n            ]\n        }\n    ],\n    \"store\": true,\n    \"include\": [\n        \"reasoning.encrypted_content\",\n        \"web_search_call.action.sources\"\n    ]\n}",
                        "uri": "{{config.openAiUrl}}/v1/responses",
                        "responseStatusVariable": "statusGepeto",
                        "responseBodyVariable": "responseGepeto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "d126cfbf-f154-43fd-8fab-0f103fe4fe35",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "ExecuteScriptV2",
                    "$title": "GET 'responseGepeto'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst { output } = JSON.parse(response);\n\n\t\treturn output.find(item => item.type === \"message\").content[0].text;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}",
                        "inputVariables": [
                            "responseGepeto"
                        ],
                        "outputVariable": "responseGepeto",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "3e11813d-1938-426b-9450-0edb310e4aa1",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "ff8370c1-1c81-4b20-9097-9e002d0deca7",
            "root": false,
            "$title": "Welcome Back",
            "$position": {
                "top": "419px",
                "left": "793px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "df84d682-e45d-41f3-8f00-2975857c8134": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "d778dee8-715c-49ed-b9f9-ed20646563ac",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "e296e987-3c23-4bfc-b899-291ce526ad86",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "e296e987-3c23-4bfc-b899-291ce526ad86",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "31bb360a-9dfe-487f-ad04-b21e791aadfb",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "802549a3-0ec4-4df8-9d35-3302701c182a",
                            "type": "text/plain",
                            "content": "Para avanÃ§ar com seu atendimento, por gentileza, *informe o seu CPF* para que eu possa localizar seu cadastro. ðŸ˜Š",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "802549a3-0ec4-4df8-9d35-3302701c182a",
                                "type": "text/plain",
                                "content": "Para avanÃ§ar com seu atendimento, por gentileza, *informe o seu CPF* para que eu possa localizar seu cadastro. ðŸ˜Š"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2ca15c41-4df3-4d48-a6f8-6896796ebe97",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "a808db71-41e9-4e7b-aed1-409bcad915a7",
                    "typeOfStateId": "state",
                    "$connId": "con_138",
                    "$id": "8113c6e2-cb0d-42d6-a9fa-bf54fc60cc36",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "df84d682-e45d-41f3-8f00-2975857c8134",
            "root": false,
            "$title": "Pergunta CPF",
            "$position": {
                "top": "450px",
                "left": "270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f18ad063-e98c-4489-a19d-e001393e1a57": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "84c9be02-e7f9-407c-a974-d4613c6a2c3d",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "5fc9ab8f-8a48-4ad7-b03b-a43cfccbe783",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": "200"
                            },
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "5fc9ab8f-8a48-4ad7-b03b-a43cfccbe783",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": "200"
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "d1dfd599-9baa-4092-bd30-f8c0c5f01b93",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b899a0ac-d73c-45b4-9859-c4917272b344",
                            "type": "text/plain",
                            "content": "SÃ³ um minutinho enquanto busco os dados para vocÃª...âŒ›",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b899a0ac-d73c-45b4-9859-c4917272b344",
                                "type": "text/plain",
                                "content": "SÃ³ um minutinho enquanto busco os dados para vocÃª...âŒ›"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "18b6ea28-a94a-436f-8f8e-da840652b180",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "c0379d4a-f3c8-4712-90c7-b94b79767e0c",
                    "typeOfStateId": "state",
                    "$connId": "con_143",
                    "$id": "f7552e13-fc9a-4aba-9c82-6380e0d8bf65",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "11269c63-a3a0-4394-b97b-2cb7a0d11b5c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaDadosCadastrais",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n       <v2:Consultar>\n         <v2:filtro>\n            <v1:PessoaId>{{colaboradorSelecionado@pessoaId}}</v1:PessoaId>\n         </v2:filtro>\n      </v2:Consultar>\n    </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaDadosCadastrais] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaDadosCadastrais",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT0-4394-b97b-2cb7a0d11b5c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaDadosCadastrais}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaDadosCadastrais"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "f411c7d3-0805-4d73-b275-0821eda5e2e8",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET_V2 'convertXmlToJsonDadosCadastrais'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "async function run(corpoBuscaDadosCadastrais) {\n  try {\n    const response = await requestLG(corpoBuscaDadosCadastrais);\n    \n    const responseFormatted = response.body.replace(/(<a:Conteudo>)(.*?)(<\\/a:Conteudo>)/g, \"$1null$3\");\n\n    return XMLConvert(responseFormatted);\n  } catch (error) {\n    return error.message\n  }\n}\n\nasync function requestLG(corpoBuscaDadosCadastrais) {\n  const baseURL = `{{config.LGBaseUrl}}`\n  const URL = `${baseURL}/v2/ServicoDeColaborador`;\n  const METHOD = 'POST';\n  const HEADERS = {\n    'Content-Type': 'text/xml',\n    'SOAPAction': `lg.com.br/api/v2/ServicoDeColaborador/Consultar`\n  }\n  const BODY = corpoBuscaDadosCadastrais;\n\n  const OPTIONS = {\n    method: METHOD,\n    headers: HEADERS,\n    body: BODY\n  }\n\n  try {\n    const response = await request.fetchAsync(URL, OPTIONS);\n\n    return response;\n  } catch (error) {\n    return error.message;\n  }\n}\n\nfunction XMLConvert(xml) {\n  try {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n\n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n\n    while ((match = tagPattern.exec(xml)) !== null) {\n      const tagContent = match[1];\n      const isEndTag = tagContent[0] === \"/\";\n\n      const textContent = xml.substring(lastIndex, match.index).trim();\n      if (textContent && tagStack.length > 0) {\n        const parentNode = tagStack[tagStack.length - 1];\n        if (!parentNode[\"_text\"]) {\n          parentNode[\"_text\"] = textContent;\n        } else if (typeof parentNode[\"_text\"] === \"string\") {\n          parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n        } else {\n          parentNode[\"_text\"].push(textContent);\n        }\n      }\n\n      lastIndex = match.index + match[0].length;\n\n      if (isEndTag) {\n        tagStack.pop();\n        currentNode = tagStack[tagStack.length - 1] || obj;\n      } else {\n        const tagParts = tagContent.split(\" \");\n        const tagName = tagParts[0];\n        const newNode = {};\n\n        if (currentNode[tagName] === undefined) {\n          currentNode[tagName] = newNode;\n        } else if (Array.isArray(currentNode[tagName])) {\n          currentNode[tagName].push(newNode);\n        } else {\n          currentNode[tagName] = [currentNode[tagName], newNode];\n        }\n\n        if (!isEndTag && tagContent[tagContent.length - 1] !== \"/\") {\n          tagStack.push(newNode);\n          currentNode = newNode;\n        }\n      }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n      for (let key in obj) {\n        if (obj[key] && typeof obj[key] === \"object\") {\n          if (obj[key]._text) {\n            if (Object.keys(obj[key]).length === 1) {\n              obj[key] = obj[key]._text;\n            } else {\n              obj[key].textValue = obj[key]._text;\n              delete obj[key]._text;\n            }\n          } else if (Object.values(obj[key]).length === 0) {\n            delete obj[key];\n          }\n          cleanUp(obj[key]);\n        }\n      }\n    }\n\n    cleanUp(obj);\n    return obj;\n  } catch (error) {\n    return error.message;\n  }\n}",
                        "inputVariables": [
                            "corpoBuscaDadosCadastrais"
                        ],
                        "outputVariable": "convertXmlToJsonDadosCadastrais",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f18ad063-e98c-4489-a19d-e001393e1a57",
            "root": false,
            "$title": "[API] Dados cadastrais",
            "$position": {
                "top": "2300px",
                "left": "1440px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a37c375b-a5e1-478a-a5dc-b4c82cd06a11": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "2b085d72-1751-4e1c-9562-aa3c5dd40bb9",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0d0d035a-f69c-416f-9aa1-2a9bb433ef56",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0d0d035a-f69c-416f-9aa1-2a9bb433ef56",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "b5d27d5b-66fe-459b-9095-adcb87016b3f",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "4088ff84-ee2f-408b-8383-2e2e63840b03",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "4088ff84-ee2f-408b-8383-2e2e63840b03",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "e48569fa-06ff-48ff-b954-b1fcbe41998f",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0a9e9d22-3f59-4693-8103-b7aee5e8bc19",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": "1500"
                            },
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0a9e9d22-3f59-4693-8103-b7aee5e8bc19",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": "1500"
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "635bc5b6-bd82-4c55-bcf9-8a49f2466a83",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "2a1f8c4e-6082-44fd-a0d0-2998ab717ed5",
                            "type": "text/plain",
                            "content": "Se vocÃª precisar fazer algum *ajuste no ponto*, Ã© sÃ³ seguir o passo a passo da documentaÃ§Ã£o abaixo:\n\n<https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=2824&uid=1283037876&tipo=1|Link>",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "2a1f8c4e-6082-44fd-a0d0-2998ab717ed5",
                                "type": "text/plain",
                                "content": "Se vocÃª precisar fazer algum *ajuste no ponto*, Ã© sÃ³ seguir o passo a passo da documentaÃ§Ã£o abaixo:\n\n<https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=2824&uid=1283037876&tipo=1|Link>"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "a2e39425-4871-47a2-823e-7b4615302fcc",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "1dfa206b-87f9-48d3-9124-008884dc31b1",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'mesEspelho'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst mapping = {\n\t\t\t\"01\": \"Janeiro\",\n\t\t\t\"02\": \"Fevereiro\",\n\t\t\t\"03\": \"MarÃ§o\",\n\t\t\t\"04\": \"Abril\",\n\t\t\t\"05\": \"Maio\",\n\t\t\t\"06\": \"Junho\",\n\t\t\t\"07\": \"Julho\",\n\t\t\t\"08\": \"Agosto\",\n\t\t\t\"09\": \"Setembro\",\n\t\t\t\"10\": \"Outubro\",\n\t\t\t\"11\": \"Novembro\",\n\t\t\t\"12\": \"Dezembro\"\n\t\t};\n\n\t\treturn mapping[JSON.parse(response).title.split('/')[0]];\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesEspelho'] \"+String(err);}}",
                        "inputVariables": [
                            "espelhopontoescolha"
                        ],
                        "outputVariable": "mesEspelho",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-48d3-9124-008884dc31b1",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesEspelho}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesEspelho"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "79c51093-14a7-470e-8506-b332a28e86d9",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(mesEspelho, linkDocumento) {\n\ttry {\n\n\t\treturn `Pronto! Aqui estÃ¡ o seu espelho de ponto referente ao mÃªs de ${mesEspelho}: <${linkDocumento}|Link>`\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "mesEspelho",
                            "linkDocumento"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-470e-8506-b332a28e86d9",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "a37c375b-a5e1-478a-a5dc-b4c82cd06a11",
            "root": false,
            "$title": "Link espelho",
            "$position": {
                "top": "862px",
                "left": "2699px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d275a4c0-4bc9-41f5-8561-bdb58bfbde80": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "dfc1b001-18c1-4f15-a226-e79bd188b3de",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "fa621865-73f0-49ef-8d12-aeea13d6ad98",
                    "typeOfStateId": "state",
                    "$connId": "con_148",
                    "$id": "ed782029-9356-4fa7-b332-2e610726aabe",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "responseListarSaldoBancoHoras@ListaDeFiltro"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "15588205-36ec-4e9e-b118-5788bf572e03",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoAutenticacaoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = {\n    \"Senha\": \"{{config.passwordNorber}}\",\n    \"Usuario\": \"{{config.usernameNorber}}\" \n  }\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoAutenticacaoNorber] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoAutenticacaoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTc-4e9e-b118-5788bf572e03",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "606d8f67-cd4d-48eb-8f0d-fc7e456599a7",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "4711a374-8a6e-4b99-b7b6-f6ddf1509ec8",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "AutenticaÃ§Ã£o Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {},
                        "method": "POST",
                        "body": "{{corpoAutenticacaoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/autenticacao/autenticar",
                        "responseStatusVariable": "statusAutenticacao",
                        "responseBodyVariable": "responseAutenticacao"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSe-4b99-b7b6-f6ddf1509ec8",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "1f46622e-152e-43d3-9c03-c66153433153",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "6d420eb7-a4e4-4274-b8f7-7a88e56d15a7",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoListarSaldoBancoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n    try {\n        const now = new Date();  \n        mesAtual = now.getMonth() + 1 + 1; // Regra de negÃ³cio deve ser sempre do mes seguinte, entÃ£o getMonth() + 1 para o mes corrente + 1 do mes seguinte\n        anoAtual = now.getFullYear();\n        \n        return {\n            \"MesAnoReferencia\": `${anoAtual}-${String(mesAtual).padStart(2,'0')}`,\n            \"ListaDeFiltros\": [\n                {\n                    \"Conceito\": \"3\",\n                    \"CodigoExterno\": \"{{colaboradorSelecionado@matricula}}\"\n                }\n            ],\n            \"Pagina\": \"0\"\n        }\n    } catch (e) {\n        return e.message;;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoListarSaldoBancoNorber] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoListarSaldoBancoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT4-4274-b8f7-7a88e56d15a7",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoListarSaldoBancoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoListarSaldoBancoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "b159d9b1-ef04-4f45-a82c-e6af75705e57",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoListarSaldoBancoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoListarSaldoBancoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "a658890c-24e2-4896-ad64-90556d4cf038",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Listar saldo banco de horas Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "token": "{{responseAutenticacao@ObjetoDeRetorno}}"
                        },
                        "method": "POST",
                        "body": "{{corpoListarSaldoBancoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/banco-de-horas/listar-saldo-v2",
                        "responseStatusVariable": "statusListarSaldoBancoHoras",
                        "responseBodyVariable": "responseListarSaldoBancoHoras"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS2-4896-ad64-90556d4cf038",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusListarSaldoBancoHoras"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "f4e8f9ce-b545-4822-b41b-264d986b7e8a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusListarSaldoBancoHoras"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e40e9a3d-4d37-42e6-a439-304b939376df",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SALDO_HORAS",
                    "settings": {
                        "variable": "errorType",
                        "value": "SALDO_HORAS"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "responseListarSaldoBancoHoras@ListaDeFiltro"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                }
            ],
            "id": "d275a4c0-4bc9-41f5-8561-bdb58bfbde80",
            "root": false,
            "$title": "[API] Saldo banco de horas",
            "$position": {
                "top": "1300px",
                "left": "1620px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c6bdcbd8-a986-4d91-a5b1-433cded420d9": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "91bf6fe6-b5e3-48a2-a5ca-59661f9538b4",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "d5773751-f135-4308-b4c1-ac88bfc33cb2",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "d5773751-f135-4308-b4c1-ac88bfc33cb2",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "bf9ecc46-c14e-442c-a424-a5c8b40765da",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "c1f7ea2a-c874-4326-8973-7aebb5be2247",
                            "type": "text/plain",
                            "content": "Ponto marcado com sucesso! ðŸ˜‰",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "c1f7ea2a-c874-4326-8973-7aebb5be2247",
                                "type": "text/plain",
                                "content": "Ponto marcado com sucesso! ðŸ˜‰"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "a2e39425-4871-47a2-823e-7b4615302fcc",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c6bdcbd8-a986-4d91-a5b1-433cded420d9",
            "root": false,
            "$title": "Ponto marcado",
            "$position": {
                "top": "1062px",
                "left": "2158px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9a06106f-774b-4b2e-8160-71fada5f797a": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "4f6dbabb-7aa0-409c-9163-d5b939f88490",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "573d1c74-ae0f-43c6-983b-cbfe7162bcc0",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "573d1c74-ae0f-43c6-983b-cbfe7162bcc0",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "ec320011-b87c-436b-a6fd-2b3ab2bbf46c",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0c83e57c-8fa5-45fb-9cd8-a2a4ba6dd21f",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0c83e57c-8fa5-45fb-9cd8-a2a4ba6dd21f",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "ef47a02f-45eb-4d04-8a28-b1ae9ac4e8b6",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "85612eaf-6b19-406c-89e6-5445798b1494",
                    "typeOfStateId": "state",
                    "$connId": "con_153",
                    "$id": "d16ddc1e-c7c3-44c1-9aa8-8fa7dd9903b1",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "c7abf693-b4fc-4e6c-8e73-d011af5610b0",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(responseMensal, responseAdiantamento, mes) {\n    const MESES = {\n        '1': 'Janeiro',\n        '2': 'Fevereiro',\n        '3': 'MarÃ§o',\n        '4': 'Abril',\n        '5': 'Maio',\n        '6': 'Junho',\n        '7': 'Julho',\n        '8': 'Agosto',\n        '9': 'Setembro',\n        '10': 'Outubro',\n        '11': 'Novembro',\n        '12': 'Dezembro',\n    }\n\n\ttry {\n\t\tresponseMensal = JSON.parse(responseMensal);\n\t\tresponseAdiantamento = JSON.parse(responseAdiantamento);\n\n        const adiantamentoQuinzenal = responseAdiantamento.find(item => Number(item['a:Referencia'].split('-')[1]) == mes);\n        const pagamentoMensal = responseMensal.find(item => Number(item['a:Referencia'].split('-')[1]) == mes);\n        \n        \n\t\treturn `O pagamento Ã© realizado em *duas parcelas*. Neste mÃªs de *${MESES[mes]}*, os pagamentos ocorrerÃ£o nas seguintes datas:\n        \nAdiantamento Quinzenal: *${formatDate(adiantamentoQuinzenal['a:DataDoPagamento'])}*\n\nPagamento Mensal: *${formatDate(pagamentoMensal['a:DataDoPagamento'])}*`;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\n\nfunction formatDate(stringDate) {\n    const [ano, mes, dia] = stringDate\n        .split('T')[0]\n        .split('-');\n        \n    return `${dia}/${mes}/${ano}`;\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonCalendarioPagamentoMensal",
                            "convertXmlToJsonCalendarioPagamentoAdiantamento",
                            "calendar.month"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTc-4e6c-8e73-d011af5610b0",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9a06106f-774b-4b2e-8160-71fada5f797a",
            "root": false,
            "$title": "CalendÃ¡rio de pagamento",
            "$position": {
                "top": "100px",
                "left": "1922px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "53896bda-5937-439f-aca6-d492b92ce5e7": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "28765100-0ad1-4d86-9e65-97f5d9dcd7d8",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b4840014-e954-4f2a-ac20-0970e480739d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b4840014-e954-4f2a-ac20-0970e480739d",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "648c3853-2969-46d0-8c4f-6ea4575387dd",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "40d0ccd1-7aa7-4437-ba03-774540a7a5a3",
                            "type": "text/plain",
                            "content": "{{messageHolerite}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "40d0ccd1-7aa7-4437-ba03-774540a7a5a3",
                                "type": "text/plain",
                                "content": "{{messageHolerite}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "bd23a7d9-c41c-472b-a3e5-20ebf88104b6",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "c0107822-7006-4946-a7d4-bec3aa2a023a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(recebidoHoleriteInfo) {\n\ttry {\n\t\tconst { descricao, salarioBase, totalDesconto, totalLiquido, totalProvento } = JSON.parse(recebidoHoleriteInfo);\n\n\t\treturn `Aqui estÃ¡ um resumo do seu holerite:\n\n${descricao}\n\n*SalÃ¡rio Base*: R$ ${formatarNumeroBrasileiro(salarioBase)}\n*Total de Proventos*: R$ ${formatarNumeroBrasileiro(totalProvento)}\n*Total de Descontos*: R$ ${formatarNumeroBrasileiro(totalDesconto)}\n*Total LÃ­quido*: R$ ${formatarNumeroBrasileiro(totalLiquido)}\n\nPara visualizar o seu holerite completo, *acesse esse <https://login.lg.com.br/login/gente/neon|link>*.`;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\n\nfunction formatarNumeroBrasileiro(numero) {\n    const numeroFormatado = Number(numero).toFixed(2);\n    const partes = numeroFormatado.split(\".\");\n    partes[0] = partes[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    const resultado = partes.join(\",\");\n  \n    return resultado;\n  }\n\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "recebidoHoleriteInfo"
                        ],
                        "outputVariable": "messageHolerite",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT6-4946-a7d4-bec3aa2a023a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{messageHolerite}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "messageHolerite"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "53896bda-5937-439f-aca6-d492b92ce5e7",
            "root": false,
            "$title": "Amostra holerite",
            "$position": {
                "top": "449px",
                "left": "2673px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c08d9e87-34ef-420b-8e8c-622887e00577": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "34487c4e-009f-403f-a247-2e1c77a09dc3",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "cb1e317e-3b36-42e2-bc5f-120851d9b635",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "cb1e317e-3b36-42e2-bc5f-120851d9b635",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "282fb382-dbda-46c0-a566-61d11abb77e1",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "37a1573a-c60b-45d1-94b1-605ed9fafc0d",
                            "type": "text/plain",
                            "content": "{{messagePagamento}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "37a1573a-c60b-45d1-94b1-605ed9fafc0d",
                                "type": "text/plain",
                                "content": "{{messagePagamento}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1e4bc05f-11b5-49ca-929c-8f3ce106a14d",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f649d32c-2ef7-401d-90b2-f598f27a0432",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "[DWNT] Delete 'isRegexIntent'",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "delete",
                        "uri": "/contexts/{{contact.identity}}/isRegexIntent",
                        "variable": "isRegexIntentDeleteCmdResp"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "bb7bd108-7a88-41b6-b112-e3df9565b021",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'messagePagamento'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(isTeamView, objFeriasSelecionada) {\n\ttry {\n\t\tconst { inicio } = JSON.parse(objFeriasSelecionada);\n\t\tconst inicioFerias = new Date(inicio);\n\t\tconst now = new Date();\n\t\tconst dayPayment = new Date(inicio);\n\t\tdayPayment.setDate(inicioFerias.getDate() - 2);\n\n\t\tconst dayPaymentFormatted = time.dateToString(dayPayment, {format: \"dd/MM/yyyy\", timeZone: \"UTC\"});\n\n\t\tconst pronomePessoal = isTeamView && isTeamView == 'true' ? 'das fÃ©rias de {{colaboradorSelecionado@name}}!' : 'das suas fÃ©rias! ðŸ˜Ž';\n\n\t\tconst message = new Array();\n\t\tif(dayPayment <= now) {\n\t\t\tmessage.push(`O pagamento foi realizado no dia ${dayPaymentFormatted}. ðŸ˜Ž`);\n\t\t} else {\n\t\t\tmessage.push(`O pagamento vai ser realizado atÃ© a data ${dayPaymentFormatted}, 2 dias Ãºteis antes da data inicial ${pronomePessoal}`);\n\t\t}\n\n\t\tmessage.push(`\\nPara mais detalhes e para emitir o recibo do pagamento, *Ã© sÃ³ acessar a plataforma da LG atravÃ©s do <https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=630&uid=-1024192215&tipo=1&_ts=1734550601240|link>*.`);\n\n\t\treturn message.join('\\n');\n\t} catch (error) {\n\t\treturn `O pagamento vai ser realizado atÃ© 2 dias Ãºteis antes da data inicial das fÃ©rias.\n\nPara mais detalhes e para emitir o recibo do pagamento, *Ã© sÃ³ acessar a plataforma da LG atravÃ©s do <https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=630&uid=-1024192215&tipo=1&_ts=1734550601240|link>*.`;\n\t}\n}",
                        "inputVariables": [
                            "isTeamView",
                            "objFeriasSelecionada"
                        ],
                        "outputVariable": "messagePagamento",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c08d9e87-34ef-420b-8e8c-622887e00577",
            "root": false,
            "$title": "Data de pagamento",
            "$position": {
                "top": "1441px",
                "left": "2612px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "43b73a6f-e0a7-4927-97ff-a6fdcedad811": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "f6c9f9fd-0448-4581-9e0d-e5eaf659087a",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "5fea3613-36e7-42b6-8bca-e29fe6e305e4",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "5fea3613-36e7-42b6-8bca-e29fe6e305e4",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "5eda3f89-1e6e-4e0b-b01c-aec8a1c1589b",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "f90c57b1-a548-4c9d-82ff-dc82ec351fb3",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "f90c57b1-a548-4c9d-82ff-dc82ec351fb3",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1e4bc05f-11b5-49ca-929c-8f3ce106a14d",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "67a90df9-39a9-4e27-95a1-d1ad777bca88",
                    "typeOfStateId": "state",
                    "$connId": "con_158",
                    "$id": "27f7d48c-9bd1-4483-a2a8-db33d7378a87",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "85c2e211-f912-4296-927d-1183dfda148a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "recebidoFeriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj, obj2) {\n\ttry {\n\t\tif (!obj || !obj2) return false\n\n\t\tobj = JSON.parse(obj)\n\t\tobj2 = JSON.parse(obj2)\n\n\t\tconst corpo = obj[\"s:Envelope\"][\"s:Body\"][\"ConsultarReciboDePagamentoDetalhadoResponse\"][\"ConsultarReciboDePagamentoDetalhadoResult\"]['a:Retorno']\n\t\tconst corpo2 = obj2[\"s:Envelope\"][\"s:Body\"][\"ConsultarReciboDePagamentoDetalhadoResponse\"][\"ConsultarReciboDePagamentoDetalhadoResult\"]['a:Retorno']\n\n\t\tconst output = {\n\t\t\tsalarioBase: corpo['a:SalarioBase'] ? `${corpo['a:SalarioBase']}` : '',\n\t\t\ttotalDesconto: corpo['a:TotalDesconto'] ? `${corpo['a:TotalDesconto']}` : '',\n\t\t\ttotalLiquido: corpo['a:TotalLiquido'] ? `${corpo['a:TotalLiquido']}` : '',\n\t\t\ttotalProvento: corpo['a:TotalProvento'] ? `${corpo['a:TotalProvento']}` : '',\n\t\t\tdescricao: corpo['a:DadosDoColaborador'] && corpo['a:DadosDoColaborador']['a:CargoEfetivo'] && corpo['a:DadosDoColaborador']['a:CargoEfetivo'][\"a:Descricao\"] ? corpo['a:DadosDoColaborador']['a:CargoEfetivo'][\"a:Descricao\"] : '',\n\t\t}\n\n\t\treturn output;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [recebidoFeriasInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonReciboFerias",
                            "convertXmlToJsonReciboFeriasFim"
                        ],
                        "outputVariable": "recebidoFeriasInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJsonReciboFerias"
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPT2-4296-927d-1183dfda148a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{recebidoFeriasInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "recebidoFeriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "cfed783b-cc97-4778-a863-c32fd2ee36cb",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "message",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "const TEXT = {\n\t'pt-br': `<b>InformaÃ§Ãµes:</b>\n\n{{recebidoFeriasInfo@descricao}}\n\nSalÃ¡rio Base: R$ ${formatarNumeroBrasileiro({{recebidoFeriasInfo@salarioBase}})}\nTotal Provento: R$ ${formatarNumeroBrasileiro({{recebidoFeriasInfo@totalProvento}})}\nTotal Desconto: R$ ${formatarNumeroBrasileiro({{recebidoFeriasInfo@totalDesconto}})}\nTotal LÃ­quido: R$ ${formatarNumeroBrasileiro({{recebidoFeriasInfo@totalLiquido}})}\n`,\n\ten: `<b>Information:</b>\n\n{{recebidoFeriasInfo@descricao}}\n\nBase Salary: {{recebidoFeriasInfo@salarioBase}}\nTotal Income: {{recebidoFeriasInfo@totalIncome}}\nTotal Discount: {{recebidoFeriasInfo@totalDesconto}}\nTotal Net: {{recebidoFeriasInfo@totalLiquido}}`\n}\n\nfunction run() {\n\ttry {\n\t\tif (TEXT[language]) {\n\t\t\treturn TEXT[language]\n\t\t}\n\n\t\treturn TEXT['pt-br']\t\t\n\t} catch(e) {\n\t\treturn TEXT['pt-br']\n\t}\n}\n\nfunction formatarNumeroBrasileiro(numero) {\n    const numeroFormatado = Number(numero).toFixed(2);\n    const partes = numeroFormatado.split(\".\");\n    partes[0] = partes[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    const resultado = partes.join(\",\");\n  \n    return resultado;\n  }\n\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [message] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4778-a863-c32fd2ee36cb",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "43b73a6f-e0a7-4927-97ff-a6fdcedad811",
            "root": false,
            "$title": "Recibo de fÃ©rias",
            "$position": {
                "top": "1611px",
                "left": "3028px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "58d2e6b4-50e3-4d84-ad69-24858a250420": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "45bedb12-c62e-4310-a1d4-e6bb8f6c84f4",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "cc3d1735-5149-43f0-b5e6-9ae411687663",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "cc3d1735-5149-43f0-b5e6-9ae411687663",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "97249e4c-5e18-4393-8700-978c954d6fbc",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "d3718e58-6a1c-48e6-800b-5320699be889",
                            "type": "text/plain",
                            "content": "{{messageFeriasInfo}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "d3718e58-6a1c-48e6-800b-5320699be889",
                                "type": "text/plain",
                                "content": "{{messageFeriasInfo}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1e4bc05f-11b5-49ca-929c-8f3ce106a14d",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f0f3de8c-06ab-436b-8255-d114a5d450f4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "saldoFeriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(feriasInfoJson, diaAtual) {\n\ttry {\n\t\tferiasInfoJson = JSON.parse(feriasInfoJson)\n\n\t\tdiaAtual = new Date(diaAtual)\n\t\treturn feriasInfoJson.find((info) => info.atual === 'true' );\n\t\t\n\t} catch(e) {\n\t\treturn {};\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [saldoFeriasInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonFeriasInfo",
                            "calendar.datetime"
                        ],
                        "outputVariable": "saldoFeriasInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-436b-8255-d114a5d450f4",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{saldoFeriasInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "saldoFeriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "74958e2d-8249-48a5-b1fa-ebd7e8ca7e04",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "messageFeriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(feriasAquisitivoInfo) {\n\ttry {\n\t\tconst { saldoDeFerias, faltasInjustificadas, totalDeDiasAdquiridos, totalDeDiasDeDireito,\n\t\t\ttotalDeDiasDeFruicao, totalDeDiasDeLicenca, dataInicioFormatado, dataFimFormatado,\n\t\t\tdataInicioPeriodoConcessivoFormatado, dataFimPeriodoConcessivoFormatado\n\t\t } = JSON.parse(feriasAquisitivoInfo)\n\n\t\treturn `Aqui estÃ£o as informaÃ§Ãµes sobre as fÃ©rias:\n\nSaldo de fÃ©rias: ${saldoDeFerias} dias\nFaltas injustificadas: ${faltasInjustificadas} dias\nTotal de dias adquiridos: ${totalDeDiasAdquiridos} dias\nTotal de dias de direito: ${totalDeDiasDeDireito} dias\nTotal de dias de fruiÃ§Ã£o: ${totalDeDiasDeFruicao} dias\nTotal de dias de licenÃ§a:  ${totalDeDiasDeLicenca} dias\nPerÃ­odo aquisitivo: ${dataInicioFormatado} a ${dataFimFormatado}\nPerÃ­odo concessivo: ${dataInicioPeriodoConcessivoFormatado} a ${dataFimPeriodoConcessivoFormatado}`\n\n\t} catch(e) {\n\t\treturn `Desculpe, nÃ£o consegui validar suas informaÃ§Ãµes neste momento.`\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [messageFeriasInfo] \"+String(err);}}",
                        "inputVariables": [
                            "feriasAquisitivoInfo"
                        ],
                        "outputVariable": "messageFeriasInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-48a5-b1fa-ebd7e8ca7e04",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{messageFeriasInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "messageFeriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "58d2e6b4-50e3-4d84-ad69-24858a250420",
            "root": false,
            "$title": "Saldo de fÃ©rias",
            "$position": {
                "top": "1750px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "dwnttags-9f2e-4d19-a96b-ec0d35ed339e": {
            "id": "dwnttags-9f2e-4d19-a96b-ec0d35ed339e",
            "$title": "DWNT Tags",
            "$contentActions": [],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "DWNTaba5-bae9-4aed-81e3-2c53bf6e02f0",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Disable checkpoints in this block",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.disableCheckpoints = true;\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#1060FD",
                    "label": "Main Bot",
                    "id": "DWNT9c38-c025-4181-9bbd-966ff8ff9bb0",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Inatividade customizada",
                    "id": "DWNT0f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Erro customizado",
                    "id": "DWNTaf43-f10b-470d-be3e-58b6fa87c39a",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Sair customizado",
                    "id": "DWNTc64b-0e60-4e99-b7ce-dd18f991f199",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Voltar Customizado",
                    "id": "DWNT7030-3296-4370-829d-f428641750e4",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#8F3985",
                    "label": "IntenÃ§Ãµes Definidas",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Retorno Ativo",
                    "id": "DWNT7a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Click to WhatsApp",
                    "id": "DWNT105d-9d5e-4200-a52e-3a1a95dcb670",
                    "canChangeBackground": false
                },
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "$position": {
                "top": "10000px",
                "left": "9990px"
            },
            "root": false,
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "DWNT2ed1-aada-425e-a805-2558a70a1dbf": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "4d8fb2e1-6c5f-49eb-b428-a913c4dd41f7",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "55911c1f-24bb-4371-840c-cb6d5a531074",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "55911c1f-24bb-4371-840c-cb6d5a531074",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "values": [],
                                "source": "context",
                                "comparison": "exists",
                                "variable": "commands@ENABLED"
                            },
                            {
                                "values": [],
                                "source": "context",
                                "comparison": "notExists",
                                "variable": "commands@GOTO"
                            },
                            {
                                "values": [],
                                "source": "context",
                                "comparison": "notExists",
                                "variable": "commands@REDIRECT"
                            }
                        ],
                        "$cardContent": {
                            "document": {
                                "id": "0273a986-94ed-4b60-89f8-7ccb83b366c5",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right"
                        },
                        "expiration": "00:30",
                        "$invalid": false
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "4bbab46e-9d25-4393-bfa1-1cc73d96fcf7",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "values": [],
                                "source": "input",
                                "comparison": "notExists"
                            }
                        ],
                        "settings": {
                            "id": "663d9e86-942f-4250-984f-04e68a5350c3",
                            "type": "text/plain",
                            "content": "Timeout exceeded. Redirecting to onboarding.",
                            "metadata": {
                                "#stateName": "{{state.name}}",
                                "#stateId": "{{state.id}}",
                                "#messageId": "{{input.message@id}}",
                                "#previousStateId": "{{state.previous.id}}",
                                "#previousStateName": "{{state.previous.name}}"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "663d9e86-942f-4250-984f-04e68a5350c3",
                                "type": "text/plain",
                                "content": "Timeout exceeded. Redirecting to onboarding."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        }
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "DWNT2ed1-aada-425e-a805-2558a70a1dbf",
                    "typeOfStateId": "state",
                    "$id": "46940940-dd0b-40d9-9012-4d61abda10fe",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": [],
                            "variable": "commands@GOTO"
                        },
                        {
                            "values": [],
                            "comparison": "exists",
                            "source": "context",
                            "variable": "commands@ENABLED"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "commands@GOTO"
                        }
                    ],
                    "$connId": "con_163",
                    "$invalid": false
                },
                {
                    "stateId": "{{commands@GOTO.data}}",
                    "typeOfStateId": "variable",
                    "$id": "1893834e-7be2-4dc1-b90c-0067eb452b1a",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": [],
                            "variable": "commands@GOTO"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@GOTO"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@GOTO.data"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "24e4b633-4d31-4064-a8b8-b211c85f2be4"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "d24db3ee-0962-4622-a775-52666ed001eb",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction getContactData(contactId, contactData) {\n    let payload = {}\n    try {\n        payload = JSON.parse(contactData);\n    } catch (err) {}\n    payload[\"identity\"] = contactId;\n    return payload;\n}\n\nconst HELP_MESSAGE = `Commands:\n\nðŸ”¹ goto {block_id}: jump to block block_id.\nâž¡ï¸ Example: *goto onboarding*\n\nðŸ”¹ redirect {service_name}: redirect to service service_name.\nâž¡ï¸ Example: *redirect main*\n\nðŸ”¹ print {type}[contact | context | services]: print contact, context or services.\nâž¡ï¸ Example: *print contact; print context; print services*\n*Print service caveats:*\nContext size can lead to reduced responses, thus you can use take and skip parameters\nâž¡ï¸ Example: *print context {skip} {take}*\n\nðŸ”¹ set {type}[contact | context] {key} {value}: set key to value on contact or context. \nâž¡ï¸ Example: *set context a 1*\n*Set contact caveats:*\nWhen key is json defined the command will produce a set contact but the value *must be JSON string*\nâž¡ï¸ Example: *set contact {\"name\":\"test\"}*\nWhen key is a contact property the command will produce a merge contact. \nâž¡ï¸ Example: *set contact name test; set contact extras.key 1*\n\nðŸ”¹ get {type}[context] {key}: get variavble key from context.\nâž¡ï¸ Example: *get context a*\n\nðŸ”¹ merge {type}[contact] json {value}: merge value on contact. Value *must be JSON string*\nâž¡ï¸ Example: *merge contact json {\"name\":\"test\"}*\n\nðŸ”¹ delete {type}[context] {key}: delete key on context. \nâž¡ï¸ Example: *delete context a*\n`;\n\nfunction decodeCommand(command, context) {\n    const cmd = { \n        definition: command.join(\" \"),\n        args: command,\n        id: null,\n        data: null,\n        priority: 0,\n        message: null\n    };\n\n    let type = String(command[0]).toUpperCase();\n    let subtype = String(command[1] || \"\").toUpperCase();\n    let key = String(command[2] || \"\");\n    let value = String(command[3] || \"\");\n\n    let data = {};\n    const identity = context[\"identity\"];\n\n    switch(type) {\n        case \"#DEBUG\":\n            cmd[\"id\"] = \"DEBUG\";\n            cmd[\"data\"] = command[1];\n            break;\n        case \"SET\":\n            if (subtype == \"CONTACT\") {\n                cmd[\"id\"] = \"MERGE_CONTACT\";\n                if (key.toUpperCase() == \"JSON\") {\n                    cmd[\"id\"] = \"SET_CONTACT\";\n                    data = getContactData(identity, value);\n                } else if (key.startsWith(\"extras.\")) {\n                    const subkey = key.split(\"extras.\")[1];\n                    data = {extras: {}};\n                    data[\"extras\"][subkey] = value;\n                } else {\n                    data[key] = value;\n                }\n                data[\"identity\"] = identity;\n                cmd[\"data\"] = data;\n            } else if (subtype == \"CONTEXT\") {\n                cmd[\"id\"] = \"SET_CONTEXT\";\n                cmd[\"data\"] = { \"identity\": identity, \"key\": key, \"value\": value };\n            }\n            cmd[\"priority\"] = 1;\n            break;\n        case \"GET\":\n            if (subtype == \"CONTEXT\") {\n                cmd[\"id\"] = \"GET_CONTEXT\";\n                cmd[\"data\"] = { \"identity\": identity, \"key\": key };\n            }\n            cmd[\"priority\"] = 2;\n            break;\n        case \"MERGE\":\n            if (subtype == \"CONTACT\" && key.toUpperCase() == \"JSON\") {\n                cmd[\"id\"] = \"MERGE_CONTACT\";\n                data = getContactData(identity, value);\n                cmd[\"data\"] = data;\n            }\n            cmd[\"priority\"] = 3;\n            break;\n        case \"DELETE\":\n            if (subtype == \"CONTEXT\") {\n                cmd[\"id\"] = \"DELETE_CONTEXT\";\n                cmd[\"data\"] = { \"identity\": identity, \"key\": key };\n            } \n            cmd[\"priority\"] = 4;\n            break;\n        case \"HELP\":\n            cmd[\"id\"] = \"HELP\";\n            cmd[\"message\"] = HELP_MESSAGE;\n            cmd[\"priority\"] = 5;\n            break;\n        case \"PRINT\":\n            if (subtype == \"CONTEXT\") {\n                cmd[\"id\"] = \"PRINT_CONTEXT\";\n                cmd[\"data\"] = {\"take\": key || 200, \"skip\": value || 0 };\n            } else if (subtype == \"CONTACT\") {\n                cmd[\"id\"] = \"PRINT_CONTACT\";\n            } else if (subtype == \"SERVICES\") {\n                cmd[\"id\"] = \"PRINT_SERVICES\";\n            }\n            cmd[\"priority\"] = 6;\n            break;\n        case \"REDIRECT\":\n            cmd[\"id\"] = \"REDIRECT\";\n            cmd[\"data\"] = command[1];\n            cmd[\"priority\"] = 7;\n            break;\n        case \"GOTO\":\n            cmd[\"id\"] = \"GOTO\";\n            cmd[\"data\"] = command[1];\n            cmd[\"message\"] = `ðŸ” Jumping to block ${cmd[\"data\"]}`;\n            cmd[\"priority\"] = 8;\n            break;\n        case \"CLOSE\":\n            cmd[\"id\"] = \"CLOSE\";\n            break; \n    }\n\n    return cmd;\n}\n\nfunction decodeArgs(command) {\n    const [command, json] = command.split(/[\\t ]+json[\\t ]+/i);\n    const args = command.split(/[\\t ]+/);\n    if (json) {\n        args.push(\"json\", json);\n    }\n    return args\n        .map(chunk => chunk.trim())\n        .filter(chunk => chunk.length > 0);\n}\n\nfunction parseCommands(inputContent, context) {\n    let commands;\n    \n    commands = String(inputContent || \"\")\n        .split(/[;\\n]/)\n        .map(decodeArgs)\n        .filter(cmd => cmd.length > 0);\n\n    commands = commands\n        .map(cmd => decodeCommand(cmd, context))\n        .filter(cmd => cmd.id !== null);\n\n    if (commands.some(cmd => [\"PRINT_SERVICES\", \"REDIRECT\"].includes(cmd[\"id\"]))) {\n        commands.push({id: \"GET_SERVICES\"});\n    }\n\n    if (commands.some(cmd => cmd[\"id\"] == \"CLOSE\") && !commands.some(cmd => cmd[\"id\"] == \"GOTO\")) {\n        commands.push({id: \"GOTO\", data: \"onboarding\", message: \"ðŸ” Jumping to block onboarding\", priority: 8});\n    }\n    \n    commands = commands\n        .reduce(function (acc, cmd) {\n            acc[cmd.id] = cmd;\n            return acc;\n        }, {});\n\n    return commands\n}\n\nfunction run(input, contactId, secret, commands) {\n    secret = secret || \"123\";\n    \n    const session = JSON.parse(commands || \"{}\").DEBUG;\n\n    const context = {identity: contactId};\n    commands = parseCommands(input, context);\n\n    commands[\"DEBUG\"] = commands[\"DEBUG\"] || session;\n    commands[\"ENABLED\"] = commands.DEBUG && commands.DEBUG.data == secret;\n\n    return JSON.stringify(commands);\n}",
                        "inputVariables": [
                            "input.content",
                            "contact.identity",
                            "config.debugSecret",
                            "commands"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d8df88c1-3ff4-48a9-ad5e-0867984d1487",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Set Contact when SET_CONTACT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "set",
                        "resource": "{{commands@SET_CONTACT.data}}",
                        "type": "application/vnd.lime.contact+json",
                        "uri": "/contacts",
                        "variable": "setContactCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@SET_CONTACT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "5ad3d211-0240-4489-83ed-af614c129b33",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when SET_CONTACT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    let message = `âš™ï¸ Contact set to ${JSON.stringify(commands.SET_CONTACT.data)}.`;\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } \n    } catch (err) {\n        message = `âŒ set contact: ${err.message}`;\n    }\n\n    commands.SET_CONTACT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "setContactCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@SET_CONTACT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "a00082d5-c648-4d7e-b6ef-0e4afba5370a",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Merge Contact when MERGE_CONTACT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "merge",
                        "resource": "{{commands@MERGE_CONTACT.data}}",
                        "type": "application/vnd.lime.contact+json",
                        "uri": "/contacts",
                        "variable": "mergeContactCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "variable": "commands@MERGE_CONTACT",
                            "comparison": "exists"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d9221ef7-8fbc-4d17-a7e2-eb5397574a55",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process command when MERGE_CONTACT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    let message = `âš™ï¸ Contact got merged with ${JSON.stringify(commands.MERGE_CONTACT.data)}.`;\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } \n    } catch (err) {\n        message = `âŒ merge contact: ${err.message}`;\n    }\n\n    commands.MERGE_CONTACT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "mergeContactCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@MERGE_CONTACT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "a9635237-40a6-4f6e-bf08-aa431a53c2a2",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Set Context Variable when SET_CONTEXT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "set",
                        "resource": "{{commands@SET_CONTEXT.data.value}}",
                        "type": "text/plain",
                        "uri": "/contexts/{{contact.identity}}/{{commands@SET_CONTEXT.data.key}}",
                        "variable": "setContextCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@SET_CONTEXT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "ac55004f-3a3c-423b-b891-772312cdcf53",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when SET_CONTEXT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    let message = `âš™ï¸ Context variable *${commands.SET_CONTEXT.data.key}* set to *${commands.SET_CONTEXT.data.value}*.`;\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } \n    } catch (err) {\n        message = `âŒ set context: ${err.message}`;\n    }\n\n    commands.SET_CONTEXT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "setContextCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@SET_CONTEXT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "884e97ac-65a7-433f-80ab-f4d24ea1cb23",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Get Context Variable when GET_CONTEXT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "get",
                        "uri": "/contexts/{{contact.identity}}/{{commands@GET_CONTEXT.data.key}}",
                        "variable": "getContextCommandResponse",
                        "from": "{{application.identity}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@GET_CONTEXT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e7c6abd9-cc66-458d-920d-df30f64a8681",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when GET_CONTEXT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    let message = null;\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } else {\n            const value = response.resource;\n            message = `âš™ï¸ Context variable *${commands.GET_CONTEXT.data.key}*: *${value}*.`;\n        }\n    } catch (err) {\n        message = `âŒ get context: ${err.message}`;\n    }\n\n    commands.GET_CONTEXT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "getContextCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@GET_CONTEXT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "313eaaa5-651b-4639-af86-3f81202f33c7",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Delete Context Variable when DELETE_CONTEXT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "delete",
                        "uri": "/contexts/{{contact.identity}}/{{commands@DELETE_CONTEXT.data.key}}",
                        "variable": "deleteContextCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@DELETE_CONTEXT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "ff4ee09d-0693-4dea-a975-fe9e6f8d4be0",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when DELETE_CONTEXT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    let message = `âš™ï¸ Context variable *${commands.DELETE_CONTEXT.data.key}* deleted.`;\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } \n    } catch (err) {\n        message = `âŒ delete context: ${err.message}`;\n    }\n\n    commands.DELETE_CONTEXT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "deleteContextCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@DELETE_CONTEXT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "2b581fe9-3a05-4fb8-ba30-dcd5f5d0bfa8",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Get All Context when PRINT_CONTEXT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "get",
                        "uri": "/contexts/{{contact.identity}}?withContextValues=true&$skip={{commands@PRINT_CONTEXT.data.skip}}&$take={{commands@PRINT_CONTEXT.data.take}}",
                        "variable": "getAllContextCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@PRINT_CONTEXT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "46abc774-db18-441d-8b53-699aa8b12df4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when PRINT_CONTEXT exists",
                    "settings": {
                        "function": "run",
                        "source": "const MAX_STR_LEN = 500;\n\nfunction printObject(data, level) {\n\treturn Object\n        .keys(data)\n        .map(function(key) {\n            const value = data[key];\n            let msg = new Array(level).fill(\"-\").join(\"\") + \" \";\n            if ([\"string\", \"boolean\", \"number\"].includes(typeof value)) {\n                let val = String(value);\n                if (val.length >= MAX_STR_LEN) {\n                    val = val.slice(0, MAX_STR_LEN) + \"...\";\n                }\n                msg += `*${key}:* ${val}`;\n            } else {\n                msg += `*${key}:*\\n${printObject(value, level + 1)}`;\n            }\n            return msg;\n        })\n        .join(\"\\n\");\n}\n\nfunction getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n\nfunction run(commands, commandReponse) {\n    const EXCLUDE_VARIABLES = [/commands/i, /message/i, /.*commandresponse/i, /.*stateid@.*/i];    \n\tlet message = null;\n\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status !== \"success\") {\n            throw new Error(getCommandError(response));\n        } else {\n\t\t\tconst context = response.resource.items.reduce(function (acc, item) {\n\t\t\t\tif (!EXCLUDE_VARIABLES.some(exp => exp.test(item.name))) {\n\t\t\t\t\tacc[item.name] = item.value;\n\t\t\t\t}\n\t\t\t\treturn acc;\n\t\t\t}, {});\n\t\t\tif (Object.keys(context).length > 0) {\n\t\t\t\tmessage = printObject(context, 1);\n\t\t\t}  else {\n\t\t\t\tmessage = \"No variable found yet, try it again.\";\n\t\t\t}\n\t\t\tmessage = `ðŸ“‹ CONTEXT\\n${message}`;\n\t\t}\n    } catch (err) {\n        message = `âŒ print context: ${err.message}`;\n    }\n\n    commands.PRINT_CONTEXT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "getAllContextCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@PRINT_CONTEXT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "ec13b725-6b3e-401c-9398-f155d7b5247b",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Get Contact when PRINT_CONTACT exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "get",
                        "uri": "/contacts/{{contact.identity}}",
                        "variable": "getContactCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@PRINT_CONTACT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d80827cb-85fc-408a-b06d-67a0710f7c4e",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process command when PRINT_CONTACT exists",
                    "settings": {
                        "function": "run",
                        "source": "const MAX_STR_LEN = 500;\n\nfunction printObject(data, level) {\n\treturn Object\n        .keys(data)\n        .map(function(key) {\n            const value = data[key];\n            let msg = new Array(level).fill(\"-\").join(\"\") + \" \";\n            if ([\"string\", \"boolean\", \"number\"].includes(typeof value)) {\n                let val = String(value);\n                if (val.length >= MAX_STR_LEN) {\n                    val = val.slice(0, MAX_STR_LEN) + \"...\";\n                }\n                msg += `*${key}:* ${val}`;\n            } else {\n                msg += `*${key}:*\\n${printObject(value, level + 1)}`;\n            }\n            return msg;\n        })\n        .join(\"\\n\");\n}\n\nfunction getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n} \n\nfunction run(commands, commandReponse) {\n\tlet message = null;\n\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status === \"success\" && response.resource) {\n            contact = response.resource;\n            message = printObject(contact, 1);\n        } else {\n            throw new Error(getCommandError(response));\n        } \n\t} catch (err) {\n\t\tmessage = `âŒ print contact: ${err.message}`;\n\t}\n\n\tcommands.PRINT_CONTACT.message = `ðŸ“– Contact\\n${message}`;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "getContactCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@PRINT_CONTACT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "9d405be6-4793-4dfd-8a81-b5f9742a5cf2",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "Get Services when GET_SERVICES exists",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "get",
                        "uri": "lime://start.master.hosting@msging.net/configuration",
                        "variable": "getServicesCommandResponse"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@GET_SERVICES"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "35876104-681b-4552-b7f4-fff8b1cf3b50",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process command when PRINT_SERVICES exists",
                    "settings": {
                        "function": "run",
                        "source": "function run(commands, commandReponse) {\n\tlet message = \"ðŸ“‘ Services\\n\";\n\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status === \"success\" && response.resource && response.resource.Application) {\n            const configuration = JSON.parse(response.resource.Application);\n            const services = configuration.settings.children;\n\n            message += Array.from(services)\n                .map(child => `${child.isDefault ? \"+\" : \"-\"} *${child.service}:* ${child.shortName} _${child.longName}_`)\n                .join(\"\\n\");\n        } else {\n            throw new Error(getCommandError(response));\n        } \n\t} catch (err) {\n\t\tmessage = `âŒ print services: ${err.message}`;\n\t}\n\n\tcommands.PRINT_SERVICES.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "getServicesCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@PRINT_SERVICES"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "0f43ed55-4182-4234-add1-f484297372ee",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process command when REDIRECT exists",
                    "settings": {
                        "function": "run",
                        "source": "function getCommandError(response) {\n    let message = JSON.stringify(response);\n    if (response.status === \"failure\" && response.reason && response.reason.description) {\n        message = response.reason.description;\n    } else if (response.reduced) {\n        message = \"Reduced\";\n    }\n\n    return message;\n}\n \n\nfunction run(commands, commandReponse) {\n\tlet message = null;\n\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    try {\n        const response = JSON.parse(commandReponse);\n        if (response.status === \"success\" && response.resource && response.resource.Application) {\n            const configuration = JSON.parse(response.resource.Application);\n            const services = Array.from(configuration.settings.children).map(child => child.service);\n            const service = services.find(service => String(service).toUpperCase() == String(commands.REDIRECT.data).toUpperCase());\n            if (!service) {\n                throw new Error(`service *${commands.REDIRECT.data}* does not exists.`);\n            } else {\n                commands.REDIRECT.data = service;\n                message = `ðŸ” Redirecting to service ${service}`;\n            }\n        } else {\n\t\t    throw new Error(getCommandError(response));\n\t    } \n\t} catch (err) {\n\t\tmessage = `âŒ redirect: ${err.message}`;\n        commands.REDIRECT.data = undefined;\n\n\t}\n\n\tcommands.REDIRECT.message = message;\n\n\treturn JSON.stringify(commands); \n}\n",
                        "inputVariables": [
                            "commands",
                            "getServicesCommandResponse"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@REDIRECT"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                },
                {
                    "$id": "00eb4cc3-e787-4e3c-bdf6-47037eeb4a90",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process message",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(commands, botId) {\n    let message = \"Desculpe, nÃ£o entendi!\";\n\ttry {\n\t\tcommands = JSON.parse(commands)\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n    if (!commands.ENABLED) {\n        return message;\n    } else {\n        message = `âš ï¸ *DEBUG MODE* âš ï¸\\n current bot: *${botId}*\\n\\n`;\n    }\n\n    let messages = Object.keys(commands)\n        .filter(id => Boolean(commands[id][\"message\"]))\n        .sort((idA, idB) => commands[idA][\"priority\"] > commands[idB][\"priority\"])\n        .map(id => commands[id][\"message\"])\n\n    if (messages.length === 0) {\n        message += \"No command found, try *help* for the list of available commands.\"\n    } else {\n        messages = messages.join(\"\\n\");\n        if (messages.length < 3500) {\n            message += messages;\n        } else {\n            message += \"Message too long. Please run fewer commands or with more specific parameters.\"\n        }\n    }\n\n    if (!(commands.GOTO || commands.REDIRECT)) {\n        message += \"\\n\\nTo exit DEBUG mode you must use *close* or *goto* commands.\";\n        message += \"\\nâž¡ï¸ Example: *goto onboarding* or *close*\";\n    }\n\n\treturn message; \n}\n\n",
                        "inputVariables": [
                            "commands",
                            "application.identifier"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "0aa01d08-c523-4869-bdf9-4fc9cd48574b",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Reset commands when no input or GOTO or REDIRECT",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(commands, input) {\n\tcommands = JSON.parse(commands);\n\tif (!input || commands.GOTO || commands.REDIRECT || !commands.ENABLED) {\n\t\tcommands[\"DEBUG\"] = undefined;\n\t}\n\treturn JSON.stringify(commands);\n}",
                        "inputVariables": [
                            "commands",
                            "input.content"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "79826d8b-f1e7-408d-9bf6-2bcf8cd24cc0",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "Redirect when REDIRECT exists",
                    "settings": {
                        "address": "{{commands@REDIRECT.data}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@REDIRECT"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@REDIRECT.data"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "f8ad824e-4557-4067-b3b4-787a889b160d",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "Process commands when REDIRECT",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(commands) {\n\ttry {\n\t\tcommands = JSON.parse(commands);\n\t} catch(err) {\n\t\tcommands = {};\n\t}\n\n\tcommands.GOTO = { data: \"onboarding\" };\n\t\n\treturn JSON.stringify(commands);\n}",
                        "inputVariables": [
                            "commands"
                        ],
                        "outputVariable": "commands",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@REDIRECT"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "commands@REDIRECT.data"
                        }
                    ],
                    "continueOnError": true,
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "typeOfStateId": "state",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "DWNT2ed1-aada-425e-a805-2558a70a1dbf",
            "root": false,
            "$title": "#DEBUG by Dawntech",
            "$position": {
                "top": "78px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "regular-error": {
            "id": "regular-error",
            "$title": "[DWNT] Erro padrÃ£o",
            "$contentActions": [
                {
                    "action": {
                        "$id": "01eecd22-0846-49ce-bc28-f252c56115b8",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "3c69832e-079f-40f7-8274-7075fcef0e6a",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "3c69832e-079f-40f7-8274-7075fcef0e6a",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "equals",
                                "values": [
                                    "true"
                                ],
                                "variable": "debug"
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "7c9b42af-7fed-45a9-beae-3ecafbf99760",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "873751a2-c125-4c98-955d-d5e7d575580c",
                            "type": "text/plain",
                            "content": "*ERROR*\n*-----Info-----*\n*Type:* {{error@type}}\n*State:* {{error@state.name}}\n*Description:* {{error@description}}\n*----Return----*\n*State:* {{error@return.state}}\n*Bot:* {{error@return.bot}}\n*Service:* {{error@return.service}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "873751a2-c125-4c98-955d-d5e7d575580c",
                                "type": "text/plain",
                                "content": "*ERROR*\n*-----Info-----*\n*Type:* {{error@type}}\n*State:* {{error@state.name}}\n*Description:* {{error@description}}\n*----Return----*\n*State:* {{error@return.state}}\n*Bot:* {{error@return.bot}}\n*Service:* {{error@return.service}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "equals",
                                "values": [
                                    "true"
                                ],
                                "variable": "debug"
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "6293c045-983b-416e-9193-b976be193171",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "034bba16-f254-479c-948a-927beee04b2c",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "034bba16-f254-479c-948a-927beee04b2c",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "notEquals",
                                "values": [
                                    "null"
                                ],
                                "variable": "message"
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "66aab341-57ce-4817-b50f-506c91e3d327",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "notEquals",
                                "values": [
                                    "null"
                                ],
                                "variable": "message"
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "f5abf80c-6aff-40ed-882e-98cd7db59671",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ],
                        "$invalid": false,
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{error@return.state}}",
                    "typeOfStateId": "variable",
                    "$id": "a9e47d28-b940-4976-ad7c-825819c39440",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "error@return"
                        },
                        {
                            "values": [
                                "null"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@return.bot"
                        },
                        {
                            "values": [
                                "null"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "error@return.state"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "3d8e0e2b-1bf0-4244-9ad8-347788969d44",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Pega mensagem de erro",
                    "settings": {
                        "function": "run",
                        "source": "\nfunction run(error) {\n\tlet message = null;\n\ttry {\n\t\terror = JSON.parse(error);\n\t\tmessage = error.message;\n\t} catch(err) {}\n\t\n\tif (!message || message == \"null\") {\n\t\treturn null;\n\t}\n\tmessage = String(message).split(/\\\\+n/g).join(\"\\n\");\n\treturn message;\n}",
                        "inputVariables": [
                            "error"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "4b0d933b-e593-41a1-bad6-548e23ea2542",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "[DWNT] Redireciona para o serviÃ§o com bloco especÃ­fico",
                    "settings": {
                        "address": "{{error@return.service}}",
                        "context": {
                            "type": "text/plain",
                            "value": "#goto {{error@return.state}}"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [
                                "null"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "error@return.bot"
                        },
                        {
                            "values": [
                                "null"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "error@return.state"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "47dc4e16-4913-4256-8a48-d4b4420094f9",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "[DWNT] Redireciona para o serviÃ§o principal",
                    "settings": {
                        "address": "{{DWNT@mainService}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "values": [
                                "null"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "error@return.state"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c2f4d68c-3323-4d71-b9ae-dae527786da9",
                "typeOfStateId": "state",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "$position": {
                "top": "737px",
                "left": "3343px"
            },
            "root": false,
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3e11813d-1938-426b-9450-0edb310e4aa1": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d6073bc4-57a0-4030-aac4-b54f26257c83",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                    "typeOfStateId": "state",
                    "$connId": "con_168",
                    "$id": "c2dbbbaf-7e16-4bd3-9448-fa0c0674957e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ],
                            "variable": "cpf"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                    "typeOfStateId": "state",
                    "$connId": "con_173",
                    "$id": "2b4455dd-04e5-4c33-a983-4706466318dc",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "cpf"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                    "typeOfStateId": "state",
                    "$connId": "con_178",
                    "$id": "ef22546c-5591-4aaa-8655-af8e37461d1c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "contact.taxDocument"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                    "typeOfStateId": "state",
                    "$connId": "con_183",
                    "$id": "d08a2866-3a00-4195-8cc2-e00de62a0f2b",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "cpf@cpfFormatted"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "5a8623b5-b11b-4609-a91f-267dc41874a8",
                    "typeOfStateId": "state",
                    "$connId": "con_188",
                    "$id": "ef91669e-1d4b-4223-a334-ecbd89a6691f",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3e11813d-1938-426b-9450-0edb310e4aa1",
            "root": false,
            "$title": "[Valida] CPF no contexto",
            "$position": {
                "top": "407px",
                "left": "540px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "57c05347-6980-49e1-8beb-6a521aecf1be": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c7a8276d-d81a-422a-98e7-2c9fd7ebe284",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "8aec0dfb-728e-460f-9d79-d9d0a1e10c28",
                    "typeOfStateId": "state",
                    "$connId": "con_193",
                    "$id": "635eb0f3-9b6e-4b10-b0e7-fdcc49d38687",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "false"
                            ],
                            "variable": "isTheSameUserSkackLG"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "b61aa59e-6702-4257-ad4d-891068ca3df4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaDadosCadastrais",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n       <v2:Consultar>\n         <v2:filtro>\n            <v1:PessoaId>{{contact.extras.pessoaId}}</v1:PessoaId>\n         </v2:filtro>\n      </v2:Consultar>\n    </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaDadosCadastrais] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaDadosCadastrais",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT2-4257-ad4d-891068ca3df4",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaDadosCadastrais}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaDadosCadastrais"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d2817cb6-f41e-4784-9ed2-3115e2cd2bb0",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaDadosCadastrais}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaDadosCadastrais"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "9c96a6ab-d1af-4b9f-888a-870817d87b56",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET_V2 'convertXmlToJsonDadosCadastrais'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "async function run(corpoBuscaDadosCadastrais) {\n    const response = await request.fetchAsync('{{config.LGBaseUrl}}/v2/servicodecolaborador', { method: 'POST', headers: { 'Content-Type': 'text/xml', 'SOAPAction': 'lg.com.br/api/v2/ServicoDeColaborador/Consultar' }, body: corpoBuscaDadosCadastrais });\n    const response_final = response.body.replace(/(<a:Conteudo>)(.*?)(<\\/a:Conteudo>)/g, \"$1null$3\");\n    \n\treturn XMLConvert(response_final);\n}\n\nfunction XMLConvert(xml) {\n  try {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n  \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n  \n    while ((match = tagPattern.exec(xml)) !== null) {\n      const tagContent = match[1];\n      const isEndTag = tagContent[0] === \"/\";\n  \n      const textContent = xml.substring(lastIndex, match.index).trim();\n      if (textContent && tagStack.length > 0) {\n        const parentNode = tagStack[tagStack.length - 1];\n        if (!parentNode[\"_text\"]) {\n          parentNode[\"_text\"] = textContent;\n        } else if (typeof parentNode[\"_text\"] === \"string\") {\n          parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n        } else {\n          parentNode[\"_text\"].push(textContent);\n        }\n      }\n  \n      lastIndex = match.index + match[0].length;\n  \n      if (isEndTag) {\n        tagStack.pop();\n        currentNode = tagStack[tagStack.length - 1] || obj;\n      } else {\n        const tagParts = tagContent.split(\" \");\n        const tagName = tagParts[0];\n        const newNode = {};\n  \n        if (currentNode[tagName] === undefined) {\n          currentNode[tagName] = newNode;\n        } else if (Array.isArray(currentNode[tagName])) {\n          currentNode[tagName].push(newNode);\n        } else {\n          currentNode[tagName] = [currentNode[tagName], newNode];\n        }\n  \n        if (!isEndTag && tagContent[tagContent.length - 1] !== \"/\") {\n          tagStack.push(newNode);\n          currentNode = newNode;\n        }\n      }\n    }\n  \n    // Clean up _text keys\n    function cleanUp(obj) {\n      for (let key in obj) {\n        if (obj[key] && typeof obj[key] === \"object\") {\n          if (obj[key]._text) {\n            if (Object.keys(obj[key]).length === 1) {\n              obj[key] = obj[key]._text;\n            } else {\n              obj[key].textValue = obj[key]._text;\n              delete obj[key]._text;\n            }\n          } else if (Object.values(obj[key]).length === 0) {\n            delete obj[key];\n          }\n          cleanUp(obj[key]);\n        }\n      }\n    }\n  \n    cleanUp(obj);\n    return obj;\n  } catch (error) {\n    return error.message;\n  }\n}",
                        "inputVariables": [
                            "corpoBuscaDadosCadastrais"
                        ],
                        "outputVariable": "convertXmlToJsonDadosCadastrais",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "dc340a9a-6838-4de9-99ac-0d1ed82896e3",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'colaboradorInfo'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj, response) {\n\ttry {\n\t\tif (!obj) return false\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst retorno = JSON.parse(response)[\"s:Envelope\"][\"s:Body\"][\"ConsultarResponse\"][\"ConsultarResult\"][\"a:Retorno\"];\n\n        const contato = retorno[\"a:Pessoa\"][\"a:Contato\"];\n\n        obj['pessoa']['contato']['emailCorporativo'] = contato[\"a:EmailCorporativo\"]\n        obj['pessoa']['contato']['emailParticular'] = contato[\"a:EmailParticular\"]\n\n\t\treturn obj;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'colaboradorInfo'] \"+String(err);}}",
                        "inputVariables": [
                            "colaboradorInfo",
                            "convertXmlToJsonDadosCadastrais"
                        ],
                        "outputVariable": "colaboradorInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJson"
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPT8-4de9-99ac-0d1ed82896e3",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "7ef3582e-a8d1-461f-a1ad-aac5b37deeb6",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isTheSameUserSkackLG'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(slackInfo, lgInfo) {\n    try {\n        const responseLG = JSON.parse(lgInfo);\n\n        const { email:emailSlack } = JSON.parse(slackInfo).user.profile;\n        \n        const emailLG =\n        responseLG[\"s:Envelope\"][\"s:Body\"][\"ConsultarResponse\"][\"ConsultarResult\"][\"a:Retorno\"]\n            [\"a:Pessoa\"][\"a:Contato\"][\"a:EmailCorporativo\"];\n            \n        const emailSlackNormalized = textNormalizer(emailSlack);\n        const emailLGNormalized = textNormalizer(emailLG);\n        \n        const LENGTH_LG = emailLGNormalized.length;\n        const LENGTH_SLACK = emailSlackNormalized.length;\n\n        if(LENGTH_LG !== LENGTH_SLACK) return false;\n        \n        return emailSlackNormalized === emailLGNormalized\n    \n    } catch (error) {\n        return false;\n    }\n}\n\nfunction textNormalizer(dataToNormalize) {\n    return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^ÂªÂºa-zA-Z0-9]+)/g, \"\")\n      .toLowerCase();\n  };\n\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'isTheSameUserSkackLG'] \"+String(err);}}",
                        "inputVariables": [
                            "responseUserId",
                            "convertXmlToJsonDadosCadastrais"
                        ],
                        "outputVariable": "isTheSameUserSkackLG",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT1-461f-a1ad-aac5b37deeb6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{isTheSameUserSkackLG}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "isTheSameUserSkackLG"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "3a2318a8-5659-459b-b664-397b26e5eb46",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "'errorType' to 'ID_SLACK_UNRECONIZED'",
                    "$invalid": false,
                    "settings": {
                        "variable": "errorType",
                        "value": "ID_SLACK_UNRECONIZED"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "isTheSameUserSkackLG"
                        }
                    ]
                },
                {
                    "$id": "ef753782-8666-4760-976b-a9703e8367bd",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "Definir contato",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "pessoaId": "{{colaboradorInfo@pessoa.dadosPessoais.pessoaId}}",
                            "dataAdmissao": "{{colaboradorInfo@dadosGerais.dataAdmissao}}",
                            "matricula": "{{colaboradorInfo@dadosGerais.matricula}}",
                            "situacao": "{{colaboradorInfo@dadosGerais.situacao.descricao}}",
                            "empresaId": "{{colaboradorInfo@empresa.codigo}}",
                            "empresa": "{{colaboradorInfo@empresa.descricao}}",
                            "personType": "{{personType}}",
                            "primeiroNome": "{{firstName}}"
                        },
                        "name": "{{colaboradorInfo@pessoa.dadosPessoais.nome}}",
                        "email": "{{colaboradorInfo@pessoa.contato.emailCorporativo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "colaboradorInfo"
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "colaboradorInfo"
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "57c05347-6980-49e1-8beb-6a521aecf1be",
            "root": false,
            "$title": "[Valida] UsuÃ¡rio Slack com API LG",
            "$position": {
                "top": "721px",
                "left": "281px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "5a8623b5-b11b-4609-a91f-267dc41874a8": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "b653e4af-edf9-4d72-a187-15ea802ce939",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "01ec69f0-c1c3-42de-a47f-8a5921b110b3",
                    "typeOfStateId": "state",
                    "$connId": "con_198",
                    "$id": "3b116659-b9df-445c-90cf-c4b768369b1f",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "holerite3"
                            ],
                            "variable": "application.identifier"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "01ec69f0-c1c3-42de-a47f-8a5921b110b3",
                    "typeOfStateId": "state",
                    "$connId": "con_203",
                    "$id": "b7a8cd48-de66-4f0a-a8cf-284d36f4c7c1",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "false"
                            ],
                            "variable": "colaboradorInfo"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "d6ab3809-c23f-495e-b3ac-405e5fda0b7e",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaColacorador",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n      <v2:ConsultarPessoaPorCPFAplicandoAutorizacaoDePerfil>\n         <!--Optional:-->\n         <v2:filtro>\n            <!--Optional:-->\n            <v1:CpfCnpj>{{contact.taxDocument}}</v1:CpfCnpj>\n         </v2:filtro>\n      </v2:ConsultarPessoaPorCPFAplicandoAutorizacaoDePerfil>\n   </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaColacorador] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaColacorador",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-495e-b3ac-405e5fda0b7e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaColacorador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaColacorador"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "706f0770-b56c-44cc-ad3b-e2d5fa391fe5",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca colaborador pelo CPF",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeColaborador/ConsultarPessoaPorCPFAplicandoAutorizacaoDePerfil"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaColacorador}}",
                        "uri": "{{config.LGBaseUrl}}/v2/servicodecolaborador",
                        "responseStatusVariable": "statusBuscaColaborador",
                        "responseBodyVariable": "responseBuscaColaborador"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSc-44cc-ad3b-e2d5fa391fe5",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaColaborador"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "84dd87db-b12c-4f9f-a575-0de05fec838e",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJson",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj;\n}",
                        "inputVariables": [
                            "responseBuscaColaborador"
                        ],
                        "outputVariable": "convertXmlToJson"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "817480e6-1e3a-4f98-8094-b13d67fe0205",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'colaboradorInfo'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj) {\n\ttry {\n\t\tif (!obj) return false\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst retorno = obj[\"s:Envelope\"][\"s:Body\"][\"ConsultarPessoaPorCPFAplicandoAutorizacaoDePerfilResponse\"][\"ConsultarPessoaPorCPFAplicandoAutorizacaoDePerfilResult\"]['a:Retorno'][\"a:ContratosDeTrabalho\"]\n\n\t\tlet corpo = retorno['a:ContratoDeTrabalhoV3'].length === undefined ? retorno['a:ContratoDeTrabalhoV3'] : retorno['a:ContratoDeTrabalhoV3'][retorno['a:ContratoDeTrabalhoV3'].length - 1]\n\n\t\tif (retorno['a:ContratoDeTrabalhoV3'].length !== undefined && retorno['a:ContratoDeTrabalhoV3'].some((cont) => cont[\"a:DadosGerais\"][\"a:Situacao\"][\"a:Descricao\"].indexOf(\"ATIVIDADE NORMAL\") !== -1 )) {\n\t\t\tcorpo = retorno['a:ContratoDeTrabalhoV3'].find((cont) => \n\t\t\t\tcont[\"a:DadosGerais\"][\"a:Situacao\"][\"a:Descricao\"].indexOf(\"ATIVIDADE NORMAL\") !== -1);\n\t\t} else if (retorno['a:ContratoDeTrabalhoV3'].length !== undefined && retorno['a:ContratoDeTrabalhoV3'].some((cont) => cont[\"a:DadosGerais\"][\"a:Situacao\"][\"a:Descricao\"].indexOf(\"FERIAS NOR\") !== -1 )) {\n\t\t\tcorpo = retorno['a:ContratoDeTrabalhoV3'].find((cont) => \n\t\t\t\tcont[\"a:DadosGerais\"][\"a:Situacao\"][\"a:Descricao\"].indexOf(\"FERIAS NOR\") !== -1);\n        }\n\t\t\n\t\tconst contact = {\n\t\t\tempresa: {\n\t\t\t\tcodigo: corpo && corpo['a:Alocacao'] && corpo['a:Alocacao']['a:Empresa'] && corpo['a:Alocacao']['a:Empresa']['a:Codigo'] ? corpo['a:Alocacao']['a:Empresa']['a:Codigo'] : (corpo['a:Estabelecimento']['a:Codigo'] || ''),\n\t\t\t\tdescricao: corpo && corpo['a:Alocacao'] && corpo['a:Alocacao']['a:Empresa'] && corpo['a:Alocacao']['a:Empresa']['a:Descricao'] ? corpo['a:Alocacao']['a:Empresa']['a:Descricao'] : (corpo['a:Estabelecimento']['a:Descricao'] || ''),\n\t\t\t\tidentificacao: corpo && corpo['a:Alocacao'] && corpo['a:Alocacao']['a:Empresa'] && corpo['a:Alocacao']['a:Empresa']['a:Inscricao'] ? corpo['a:Alocacao']['a:Empresa']['a:Inscricao'] : '',\n\t\t\t\ttipoDeIdentificacao: corpo && corpo['a:Alocacao'] && corpo['a:Alocacao']['a:Empresa'] && corpo['a:Alocacao']['a:Empresa']['a:TipoDeInscricao'] ? corpo['a:Alocacao']['a:Empresa']['a:TipoDeInscricao'] : '',\n\t\t\t},\n\t\t\testabelecimento: {\n\t\t\t\tcodigo: corpo['a:Estabelecimento'] && corpo['a:Estabelecimento']['a:Codigo'] ? corpo['a:Estabelecimento']['a:Codigo'] : '',\n\t\t\t\tdescricao: corpo['a:Estabelecimento'] && corpo['a:Estabelecimento']['a:Descricao'] ? corpo['a:Estabelecimento']['a:Descricao'] : '',\n\t\t\t\tidentificacao: corpo['a:Estabelecimento'] && corpo['a:Estabelecimento']['a:Identificacao'] ? corpo['a:Estabelecimento']['a:Identificacao'] : '',\n\t\t\t\ttipoDeIdentificacao: corpo['a:Estabelecimento'] && corpo['a:Estabelecimento']['a:TipoDeIdentificacao'] ? corpo['a:Estabelecimento']['a:TipoDeIdentificacao'] : '',\n\t\t\t},\n\t\t\tdadosGerais: {\n\t\t\t\tdataAdmissao: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:DataAdmissao'] ? corpo['a:DadosGerais']['a:DataAdmissao'].split(\"T\")[0] : '',\n\t\t\t\tdataInicioDaSituacaoAtual: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:DataInicioDaSituacaoAtual'] ? corpo['a:DadosGerais']['a:DataInicioDaSituacaoAtual'] : '',\n\t\t\t\tmatricula: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:Matricula'] ? corpo['a:DadosGerais']['a:Matricula'] : '',\n\t\t\t\ttipoDeAdmissao: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:TipoDeAdmissao'] ? corpo['a:DadosGerais']['a:TipoDeAdmissao'] : '',\n\t\t\t\tvinculoEmpregaticio: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:VinculoEmpregaticio'] ? corpo['a:DadosGerais']['a:VinculoEmpregaticio'] : '',\n\t\t\t\tsituacao: {\n\t\t\t\t\tcodigo: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:Situacao'] && corpo['a:DadosGerais']['a:Situacao']['a:Codigo'] ? corpo['a:DadosGerais']['a:Situacao']['a:Codigo'] : '',\n\t\t\t\t\tdescricao: corpo['a:DadosGerais'] && corpo['a:DadosGerais']['a:Situacao'] && corpo['a:DadosGerais']['a:Situacao']['a:Descricao'] ? corpo['a:DadosGerais']['a:Situacao']['a:Descricao'] : '',\n\t\t\t\t},\n\n\t\t\t},\n\t\t\tpessoa: {\n\t\t\t\tcontato: {\n\t\t\t\t\temailCorporativo: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:Contato'] && corpo['a:Pessoa']['a:Contato']['a:EmailCorporativo'] ? corpo['a:Pessoa']['a:Contato']['a:EmailCorporativo'] : '',\n\t\t\t\t},\n\t\t\t\tdadosPessoais: {\n\t\t\t\t\tcpfCnpj: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:DadosPessoais'] && corpo['a:Pessoa']['a:DadosPessoais']['a:CpfCnpj'] ? corpo['a:Pessoa']['a:DadosPessoais']['a:CpfCnpj'] : '',\n\t\t\t\t\tnome: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:DadosPessoais'] && corpo['a:Pessoa']['a:DadosPessoais']['a:Nome'] ? corpo['a:Pessoa']['a:DadosPessoais']['a:Nome'] : '',\n\t\t\t\t\tpessoaId: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:DadosPessoais'] && corpo['a:Pessoa']['a:DadosPessoais']['a:PessoaID'] ? corpo['a:Pessoa']['a:DadosPessoais']['a:PessoaID'] : '',\n\t\t\t\t},\n\t\t\t\t\n\t\t\t},\n\t\t\tdadosDaEscalaEPontoDoContrato: {\n\t\t\t\tmarcaPonto: corpo['a:DadosDaEscalaEPontoDoContrato'] && corpo['a:DadosDaEscalaEPontoDoContrato']['a:MarcaPonto'] ? corpo['a:DadosDaEscalaEPontoDoContrato']['a:MarcaPonto'] : '',\n\t\t\t\tescala: {\n\t\t\t\t\tcargaHorariaMensal: corpo['a:DadosDaEscalaEPontoDoContrato'] && corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala'] && corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala']['a:CargaHorariaMensal'] ? corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala']['a:CargaHorariaMensal'] : '',\n\t\t\t\t\tcargaHorariaSemanal: corpo['a:DadosDaEscalaEPontoDoContrato'] && corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala'] && corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala']['a:CargaHorariaSemanal'] ? corpo['a:DadosDaEscalaEPontoDoContrato']['a:Escala']['a:CargaHorariaSemanal'] : '',\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\n\t\treturn contact;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'colaboradorInfo'] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJson"
                        ],
                        "outputVariable": "colaboradorInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJson"
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPTa-4f98-8094-b13d67fe0205",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "eb973477-64ca-4364-a204-e3c69e0914dd",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "'errorType' to 'CPF_NAO_ENCONTRADO'",
                    "$invalid": false,
                    "settings": {
                        "variable": "errorType",
                        "value": "CPF_NAO_ENCONTRADO"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "colaboradorInfo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                }
            ],
            "id": "5a8623b5-b11b-4609-a91f-267dc41874a8",
            "root": false,
            "$title": "[Valida] CPF registrado LG",
            "$position": {
                "top": "561px",
                "left": "540px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a808db71-41e9-4e7b-aed1-409bcad915a7": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "2ca15c41-4df3-4d48-a6f8-6896796ebe97",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "User input"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "5a8623b5-b11b-4609-a91f-267dc41874a8",
                    "typeOfStateId": "state",
                    "$connId": "con_208",
                    "$id": "be1f38a9-f278-472b-b969-4bfc4e0a1dd9",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "false"
                            ],
                            "variable": "cpf"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "1d56b4cb-67ab-4b9c-b1dd-40df0ff2bdba"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "bfd4dfed-08c9-46c5-bc42-6d2dcfee2a4f",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'cpf'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(input) {\n  try {\n    if (input.includes('<tel:')) {\n      input = input.split('|')[1]\n    }\n    const cpf = input.replace(/\\D/g, \"\");\n\n    if (cpf.length != 11) {\n      return false;\n    }\n\n    const cpfFormatted = `${cpf.slice(0, 3)}.${cpf.slice(3, 6)}.${cpf.slice(6, 9)}-${cpf.slice(9)}`;\n\n    return { cpf, cpfFormatted };\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction dwnt_run() { try { return run.apply(null, arguments); } catch (err) { return \"SCRIPT_ERROR [SET 'cpf'] \" + String(err); } }\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'cpf'] \"+String(err);}}",
                        "inputVariables": [
                            "input.content"
                        ],
                        "outputVariable": "cpf",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-46c5-bc42-6d2dcfee2a4f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{cpf}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "cpf"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d955b2f7-b88b-44fc-a8f4-5bcd37b81b49",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "Definir 'taxDocument'",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "taxDocument": "{{cpf@cpf}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "cpf"
                        }
                    ]
                },
                {
                    "$id": "286459d4-22e7-48c2-94e8-48aac45c6c12",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "'errorType' to 'CPF_NAO_ENCONTRADO'",
                    "$invalid": false,
                    "settings": {
                        "variable": "errorType",
                        "value": "CPF_NAO_ENCONTRADO"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "cpf"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#004643",
                    "label": "Erro customizado",
                    "id": "DWNTaf43-f10b-470d-be3e-58b6fa87c39a",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "a808db71-41e9-4e7b-aed1-409bcad915a7",
            "root": false,
            "$title": "[Valida input] CPF",
            "$position": {
                "top": "563px",
                "left": "272px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "1028bb11-81cb-49fa-b0b1-c2c95321a07a": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuPrincipalBuild@type}}",
                            "rawContent": "{{menuPrincipalBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{config.menuGestor}}",
                    "typeOfStateId": "variable",
                    "$id": "035e9cea-615b-4513-ac46-9f426f4f2b1a",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:voltar"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "6edffe44-690c-4d76-886f-7149bc663ae3",
                    "typeOfStateId": "state",
                    "$connId": "con_213",
                    "$id": "68da95a8-7ff3-4742-929a-7f4d7cb4b1aa",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:dados_cadastrais"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "322fc6e3-8d4a-4158-8c8d-fd6e21404fe1",
                    "typeOfStateId": "state",
                    "$connId": "con_218",
                    "$id": "2f651d5e-d3c3-4a61-a916-82f5a91da70c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:dados_folha"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "7951c1c9-d26c-40e9-a03c-826300ab3b87",
                    "typeOfStateId": "state",
                    "$connId": "con_223",
                    "$id": "6a627ce7-78e8-4665-9c5b-c82ab833a631",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:ferias"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "ff20daef-1d32-4652-91f4-06976a5fcdd0",
                    "typeOfStateId": "state",
                    "$connId": "con_228",
                    "$id": "0db47e7b-44cd-487f-bd88-8f7b39ba0c72",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:holerite"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "3ef0404e-263f-49e6-bb06-752957356f2e",
                    "typeOfStateId": "state",
                    "$connId": "con_233",
                    "$id": "6c52b80c-cf85-47f0-bf95-246879c123b6",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:ponto"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "05a158bf-3a50-4a85-81ca-b3cf6c01ba96",
                    "typeOfStateId": "state",
                    "$connId": "con_238",
                    "$id": "89311c44-fae9-4795-9893-5f6303a281e7",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPrincipal:sugestao"
                            ],
                            "variable": "menuPrincipalEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "7496ee61-c28d-455f-86c7-af8bf6adc00f"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "121f58a7-51d1-4b0c-9a80-7bdc26106bbc",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaMarcaPonto",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n  try {\n    const { empresaId, matricula } = JSON.parse(response);\n    \n    return `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n\n   <soapenv:Body>\n    <v2:Consultar>\n      <v2:filtro>\n      <v1:Colaborador>\n        <v1:Empresa>\n          <v1:Codigo>${empresaId}</v1:Codigo>\n        </v1:Empresa>\n        <v1:Matricula>${matricula}</v1:Matricula>\n      </v1:Colaborador>\n      </v2:filtro>\n    </v2:Consultar>\n  </soapenv:Body>\n</soapenv:Envelope>`\n  } catch (e) {\n    return false;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaMarcaPonto] \"+String(err);}}",
                        "inputVariables": [
                            "colaboradorselecionado"
                        ],
                        "outputVariable": "corpoBuscaMarcaPonto",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT1-4b0c-9a80-7bdc26106bbc",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaMarcaPonto}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaMarcaPonto"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "b658453d-7a62-4cde-83d1-2ac70d9dcc99",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca colaborador pela MÃ¡tricula e empresa",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeContratoDeTrabalho/Consultar"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaMarcaPonto}}",
                        "uri": "{{config.LGBaseUrl}}/v2/ServicoDeContratoDeTrabalho",
                        "responseStatusVariable": "statusBuscaMarcaPonto",
                        "responseBodyVariable": "responseBuscaMarcaPonto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS2-4cde-83d1-2ac70d9dcc99",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaMarcaPonto"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15558c25-9c75-4a39-bea5-9b9fd49e224c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'colaboradorMarcaPonto'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    try {\n        // Regex patterns for XML parsing\n        const tagPattern = /<([^>]+)>/g;\n        let match;\n        let lastIndex = 0;\n\n        while ((match = tagPattern.exec(xml)) !== null) {\n            const tagContent = match[1];\n            const isEndTag = tagContent[0] === '/';\n\n            const textContent = xml.substring(lastIndex, match.index).trim();\n            if (textContent && tagStack.length > 0) {\n                const parentNode = tagStack[tagStack.length - 1];\n                if (!parentNode[\"_text\"]) {\n                    parentNode[\"_text\"] = textContent;\n                } else if (typeof parentNode[\"_text\"] === \"string\") {\n                    parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n                } else {\n                    parentNode[\"_text\"].push(textContent);\n                }\n            }\n\n            lastIndex = match.index + match[0].length;\n\n            if (isEndTag) {\n                tagStack.pop();\n                currentNode = tagStack[tagStack.length - 1] || obj;\n            } else {\n                const tagParts = tagContent.split(' ');\n                const tagName = tagParts[0];\n                const newNode = {};\n\n                if (currentNode[tagName] === undefined) {\n                    currentNode[tagName] = newNode;\n                } else if (Array.isArray(currentNode[tagName])) {\n                    currentNode[tagName].push(newNode);\n                } else {\n                    currentNode[tagName] = [currentNode[tagName], newNode];\n                }\n\n                if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                    tagStack.push(newNode);\n                    currentNode = newNode;\n                }\n            }\n        }\n\n\n\n        cleanUp(obj);\n        return obj[\"s:Envelope\"][\"s:Body\"][\"ConsultarResponse\"][\"ConsultarResult\"][\"a:Retorno\"][\"a:MarcaPonto\"];\n    } catch (error) {\n        return error.message\n    }\n}\n\nfunction cleanUp(obj) {\n    try {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    } catch (error) {\n        return error.message\n    }\n}",
                        "inputVariables": [
                            "responseBuscaMarcaPonto"
                        ],
                        "outputVariable": "colaboradorMarcaPonto",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuPrincipalOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isManager, isTeamView, DWNT, colaboradorMarcaPonto) {\n\ttry {\n\t\tisManager = JSON.parse(isManager);\n\t\tisTeamView = JSON.parse(isTeamView);\n\t\tcolaboradorMarcaPonto = JSON.parse(colaboradorMarcaPonto);\n\t\tconst isNewUser = JSON.parse(DWNT).contact.new;\n\t\t\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:dados_cadastrais\",\n\t\t\t\t\ttitle: \"Dados cadastrais\",\n\t\t\t\t\ttitleShort: \"Dados cadastrais\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:dados_folha\",\n\t\t\t\t\ttitle: \"Dados de folha\",\n\t\t\t\t\ttitleShort: \"Dados de folha\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: (isManager && !isTeamView) || !isManager\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:ferias\",\n\t\t\t\t\ttitle: \"FÃ©rias\",\n\t\t\t\t\ttitleShort: \"FÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:holerite\",\n\t\t\t\t\ttitle: \"Holerite\",\n\t\t\t\t\ttitleShort: \"Holerite\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: (isManager && isTeamView)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:ponto\",\n\t\t\t\t\ttitle: \"Ponto\",\n\t\t\t\t\ttitleShort: \"Ponto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: (isManager && isTeamView && colaboradorMarcaPonto) || (!isManager && colaboradorMarcaPonto)\n\t\t\t\t\t// active: (isManager && isTeamView) || (!isManager)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:sugestao\",\n\t\t\t\t\ttitle: \"SugestÃ£o\",\n\t\t\t\t\ttitleShort: \"SugestÃ£o\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: ((isManager && !isTeamView) || !isManager) //&& !isNewUser\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPrincipal:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isManager\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPrincipalOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "isManager",
                            "isTeamView",
                            "DWNT",
                            "colaboradorMarcaPonto"
                        ],
                        "outputVariable": "menuPrincipalOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPrincipalOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPrincipalOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuPrincipalBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options, isManager, isTeamView) {\n  try {\n    isManager = JSON.parse(isManager);\n    isTeamView = JSON.parse(isTeamView);\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n\n    const body_1 = `E aÃ­, sobre o que vamos falar hoje? Me conta! \n\nAh, e se tiver alguma sugestÃ£o para eu melhorar, Ã© sÃ³ clicar em *â€œsugestÃ£oâ€*. Vou adorar saber! ðŸ’¡`;\n    const body_2 = `Bora bater um papo! Qual tema vocÃª quer explorar hoje? ðŸ¤” \n\nE se tiver alguma ideia de como posso ficar ainda melhor, Ã© sÃ³ mandar na opÃ§Ã£o *â€œsugestÃ£oâ€*. Adoro feedbacks! ðŸ’™ `;\n    const body_3 = `Vamos lÃ¡! Sobre o que quer falar hoje? ðŸ˜Š\n\n E se pintar uma ideia de melhoria, sou toda ouvidos! Ã‰ sÃ³ escolher *â€œsugestÃ£oâ€*. ðŸ’¡`;\n    const body_4 = `Agora me conte, que tema vocÃª quer falar hoje? ðŸ¤—\n\nAh, e se tiver alguma ideia de como posso melhorar, Ã© sÃ³ escolher a opÃ§Ã£o *â€œsugestÃ£oâ€*. Vou adorar ouvir! ðŸ’¡`;\n\n    const array_text = [body_1, body_2, body_3, body_4];\n    const randomBody = array_text[Math.floor(Math.random() * array_text.length)];\n\n    let textBody = randomBody;\n\n    if (!isManager) {\n      const footer_1 = `\n      \n_Sempre que quiser voltar a este ponto da conversa, Ã© sÃ³ digitar \"menu\"_.`;\n      const footer_2 = `\n      \n_Sempre que quiser, digite â€œmenuâ€ para voltar aqui_.`;\n      const footer_3 = `\n      \n_Ah, e sempre que quiser, digite â€œmenuâ€ para voltar pra cÃ¡_.`;\n      const footer_4 = `\n      \n_Ah, e sempre que precisar, digite â€œmenuâ€ pra voltar aqui rapidinho_.`;\n\n      const array_text = [footer_1, footer_2, footer_3, footer_4];\n      const randomFooter = array_text[Math.floor(Math.random() * array_text.length)];\n\n      textBody += randomFooter;\n    } else if (isTeamView) {\n      textBody = `Me conta, sobre qual assunto vocÃª quer falar? ðŸ¤—`;\n    }\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n          text: textBody,\n          scope: \"immediate\",\n          options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n          text: textBody,\n          // \"scope\":\"persistent\",\n          options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run() { try { return run.apply(null, arguments); } catch (err) { return \"SCRIPT_ERROR [SET 'menuPrincipalBuild'] \" + String(err); } }\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPrincipalBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuPrincipalOptions",
                            "isManager",
                            "isTeamView"
                        ],
                        "outputVariable": "menuPrincipalBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPrincipalBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPrincipalBuild"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuPrincipalEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPrincipalEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuPrincipalOptions"
                        ],
                        "outputVariable": "menuPrincipalEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPrincipalEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPrincipalEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuPrincipalEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuPrincipalEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuPrincipalEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuPrincipalEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuPrincipalEscolha"
                        }
                    ]
                },
                {
                    "$id": "b45a4e62-3c72-4602-bc63-ac3a5bb64318",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "{{menuPrincipalEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuPrincipalEscolha"
                        }
                    ]
                },
                {
                    "$id": "8f9b79ca-56a3-4496-9b1e-1113e72e1150",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "{{menuPrincipalEscolha@title}}"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "18618b85-6dea-4353-b48e-37d9cc6703ef",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
            "root": false,
            "$title": "Menu principal",
            "$position": {
                "top": "1501px",
                "left": "540px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "66759194-551f-4cbd-b7a4-586cdf2f6e0a": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "dfc4f3d7-eff3-4cc8-bd51-6b1a16bb5385",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "c34d8e32-c8fe-4447-bb70-acce39c0a0c7",
                    "typeOfStateId": "state",
                    "$connId": "con_243",
                    "$id": "cfa2d388-fbf5-462e-913b-7b78dbac9548",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "isManager"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                    "typeOfStateId": "state",
                    "$connId": "con_248",
                    "$id": "beb745dd-2ec7-445f-bc16-caf153e8c5a6",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "06d75362-d175-43d3-a818-280ea0500845",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "colaboradorSelecionado",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(contact) {\n\ttry {\n\t\tcontact = JSON.parse(contact);\n\n\t\tif (contact.extras) return {\n\t\t\t...contact,\n\t\t\t...contact.extras,\n\t\t}\n\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t} catch(e) {\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [colaboradorSelecionado] \"+String(err);}}",
                        "inputVariables": [
                            "contact.serialized"
                        ],
                        "outputVariable": "colaboradorSelecionado",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT5-43d3-a818-280ea0500845",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "c457b881-e16b-4a86-8664-e5c8579a324a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'tipoColaborador'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isManager) {\n\ttry {\n\t\treturn isManager == 'true' ? 'Gestor' : 'Colaborador';\n\t} catch (error) {\n\t\treturn 'Colaborador';\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'tipoColaborador'] \"+String(err);}}",
                        "inputVariables": [
                            "isManager"
                        ],
                        "outputVariable": "tipoColaborador",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-4a86-8664-e5c8579a324a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{tipoColaborador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "tipoColaborador"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "ee4f6af4-efb9-4577-a27c-094924268fd2",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Gestor_Colaborador",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Gestor_Colaborador",
                        "action": "{{tipoColaborador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "tipoColaborador"
                        }
                    ]
                },
                {
                    "$id": "ee94bfdb-353f-42f6-aa7a-1d2a8d22b6d8",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[DETALHES] Gestor_Colaborador",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[DETALHES] Gestor_Colaborador",
                        "action": "{{contact.email}} | {{tipoColaborador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "tipoColaborador"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "66759194-551f-4cbd-b7a4-586cdf2f6e0a",
            "root": false,
            "$title": "[Valida] Gestor/Colaborador",
            "$position": {
                "top": "1067px",
                "left": "529px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c34d8e32-c8fe-4447-bb70-acce39c0a0c7": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuInicialGestorBuild@type}}",
                            "rawContent": "{{menuInicialGestorBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_253",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuInicialGestor:sobre_mim"
                            ],
                            "variable": "menuInicialGestorEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a"
                },
                {
                    "stateId": "5bc135d7-be9c-4b4b-8318-dc0518dd93c8",
                    "typeOfStateId": "state",
                    "$connId": "con_258",
                    "$id": "614a9d47-e9d3-4325-806e-5ba04a55a035",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuInicialGestor:sobre_meu_time"
                            ],
                            "variable": "menuInicialGestorEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "ce8048c1-1679-4ae5-8e37-29f20101bc99"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "ee12c57e-ccf7-4022-b466-4153a97d1c1d",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuInicialGestorOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuInicialGestor:sobre_mim\",\n\t\t\t\t\ttitle: \"Sobre mim\",\n\t\t\t\t\ttitleShort: \"Sobre mim\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuInicialGestor:sobre_meu_time\",\n\t\t\t\t\ttitle: \"Sobre meu time\",\n\t\t\t\t\ttitleShort: \"Sobre meu time\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuInicialGestorOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "menuInicialGestorOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuInicialGestorOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuInicialGestorOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuInicialGestorBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Como vocÃª faz parte da *lideranÃ§a da Neon*, vocÃª pode consultar tanto as suas informaÃ§Ãµes quanto as da sua *equipe de Neowners*. ðŸ’¼\n\nO que vocÃª gostaria de ver?\n\n_Ah, e se precisar voltar pra cÃ¡, Ã© sÃ³ digitar â€œmenuâ€_. ðŸ˜‰`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuInicialGestorBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuInicialGestorOptions"
                        ],
                        "outputVariable": "menuInicialGestorBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuInicialGestorBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuInicialGestorBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuInicialGestorEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuInicialGestorEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuInicialGestorOptions"
                        ],
                        "outputVariable": "menuInicialGestorEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuInicialGestorEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuInicialGestorEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuInicialGestorEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuInicialGestorEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuInicialGestorEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuInicialGestorEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuInicialGestorEscolha"
                        }
                    ]
                },
                {
                    "$id": "685070f5-287c-4d4f-90d3-b0a16cc2faab",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "colaboradorSelecionado",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(contact) {\n\ttry {\n\t\tcontact = JSON.parse(contact);\n\n\t\tif (contact.extras) return {\n\t\t\t...contact,\n\t\t\t...contact.extras,\n\t\t}\n\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t} catch(e) {\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [colaboradorSelecionado] \"+String(err);}}",
                        "inputVariables": [
                            "contact.serialized"
                        ],
                        "outputVariable": "colaboradorSelecionado",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "menuInicialGestor:sobre_mim"
                            ],
                            "source": "context",
                            "variable": "menuInicialGestorEscolha@id",
                            "comparison": "equals"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTc-4d4f-90d3-b0a16cc2faab",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "6eded0d8-85a8-4a36-bdc6-1b1de6298bb5",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        },
                        {
                            "values": [
                                "menuInicialGestor:sobre_mim"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuInicialGestorEscolha@id"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "0842643a-e0b8-4f9a-865d-340be20b13b5",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isTeamView'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(input) {\n\ttry {\n\t\treturn input.includes(\"menuInicialGestor:sobre_meu_time\");\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'isTeamView'] \"+String(err);}}",
                        "inputVariables": [
                            "menuInicialGestorEscolha"
                        ],
                        "outputVariable": "isTeamView",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "variable": "menuInicialGestorEscolha",
                            "comparison": "notEquals"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT8-4f9a-865d-340be20b13b5",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{isTeamView}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "isTeamView"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c34d8e32-c8fe-4447-bb70-acce39c0a0c7",
            "root": false,
            "$title": "Menu inicial gestor",
            "$position": {
                "top": "1100px",
                "left": "270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "dee768ef-d9bb-42b8-8782-dca2ea07f9d5": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "f94cfa11-3fae-4428-af12-8cececcf7660",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "fc0f786a-b742-4589-b34d-eeb84436301b",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "fc0f786a-b742-4589-b34d-eeb84436301b",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "a2b40ca4-d4d7-4508-8f31-05367d57401f",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8ca11132-0f62-4433-b17f-7e6991a567b2",
                            "type": "text/plain",
                            "content": "Certo, vou te mostrar as opÃ§Ãµes do menu inicial novamente.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8ca11132-0f62-4433-b17f-7e6991a567b2",
                                "type": "text/plain",
                                "content": "Certo, vou te mostrar as opÃ§Ãµes do menu inicial novamente."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "3be4ed49-5f51-46b4-9d36-186f169cdde1",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{config.menuGestor}}",
                    "typeOfStateId": "variable",
                    "$id": "dac858bb-5363-4f27-a797-f03288fd5bc2",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "isManager"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
            "root": false,
            "$title": "[GO TO][Exceptions] Menu principal",
            "$position": {
                "top": "81px",
                "left": "3052px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "5bc135d7-be9c-4b4b-8318-dc0518dd93c8": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{listaColaboradoresBuild@type}}",
                            "rawContent": "{{listaColaboradoresBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_263",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "invÃ¡lido"
                            ],
                            "variable": "listaColaboradoresEscolha"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "c659269f-7921-4663-92c5-88172fd55834"
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "ff2988c7-b917-4f96-91d6-a10266a3f718"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listaColaboradoresOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst listaColaboradores = JSON.parse(response);\n\n\t\tconst allOptions = listaColaboradores.map(item => (\n\t\t\t{\n\t\t\t\tid: JSON.stringify(item),\n\t\t\t\ttitle: item.nome.substring(0,35),\n\t\t\t\ttitleShort: item.nome.substring(0,35),\n\t\t\t\tdescription: \"\",\n\t\t\t\tactive: true\n\t\t\t}\n\t\t));\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'listaColaboradoresOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "listaColaboradores"
                        ],
                        "outputVariable": "listaColaboradoresOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{listaColaboradoresOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "listaColaboradoresOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listaColaboradoresBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Selecione um(a) Neowner da sua equipe`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'listaColaboradoresBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "listaColaboradoresOptions"
                        ],
                        "outputVariable": "listaColaboradoresBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{listaColaboradoresBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "listaColaboradoresBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"listaColaboradoresEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'listaColaboradoresEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "listaColaboradoresOptions"
                        ],
                        "outputVariable": "listaColaboradoresEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{listaColaboradoresEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "listaColaboradoresEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{listaColaboradoresEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "listaColaboradoresEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "listaColaboradoresEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "listaColaboradoresEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "listaColaboradoresEscolha"
                        }
                    ]
                },
                {
                    "$id": "124aea23-c3c7-42ee-8c70-2e49c3136e77",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'errorMessage'",
                    "$invalid": false,
                    "settings": {
                        "variable": "errorMessage",
                        "value": "Ops, por favor, *escolha um colaborador da lista*."
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "listaColaboradoresEscolha"
                        }
                    ]
                },
                {
                    "$id": "4e0ef82c-b9ae-4877-b0fe-9ba820af5a43",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'errorType'",
                    "$invalid": false,
                    "settings": {
                        "variable": "errorType",
                        "value": "LISTA_COLABORADORES"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "listaColaboradoresEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "5bc135d7-be9c-4b4b-8318-dc0518dd93c8",
            "root": false,
            "$title": "Menu lista colaboradores",
            "$position": {
                "top": "1234px",
                "left": "270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "6edffe44-690c-4d76-886f-7149bc663ae3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "cc0af2ee-fb81-48f3-9ebf-35b852066fa5",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "f18ad063-e98c-4489-a19d-e001393e1a57",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "6edffe44-690c-4d76-886f-7149bc663ae3",
            "root": false,
            "$title": "[GO TO][Principal] Dados cadastrais",
            "$position": {
                "top": "1650px",
                "left": "540px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c0379d4a-f3c8-4712-90c7-b94b79767e0c": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "d89cac55-6b09-4695-a772-b19946245504",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "7b7317b6-01a1-4cb8-8fd0-79f65e941382",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            },
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "7b7317b6-01a1-4cb8-8fd0-79f65e941382",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "8f6e9bc4-689e-43d5-bd74-22adbd13f9f2",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "954cc18c-e69b-4e32-9a60-0af50419318d",
                            "type": "text/plain",
                            "content": "Prontinho! Aqui estÃ£o os dados que estÃ£o registrados no sistema:",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "954cc18c-e69b-4e32-9a60-0af50419318d",
                                "type": "text/plain",
                                "content": "Prontinho! Aqui estÃ£o os dados que estÃ£o registrados no sistema:"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "221eb2f0-9768-4238-a436-20f725d90168",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "a3cc1174-167f-4de6-8cb5-7ca1d24dbf32",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "a3cc1174-167f-4de6-8cb5-7ca1d24dbf32",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "72e8fff2-05a3-4c7c-af7a-7c9da5fb637c",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "3c54a953-a89b-4a00-9fbb-da2efe05b85f",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "3c54a953-a89b-4a00-9fbb-da2efe05b85f",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "cc54ed66-59d1-421f-beab-b81478ebb2ab",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "a6e8037d-27ec-42cb-82e2-7d860245ed0d",
                    "typeOfStateId": "state",
                    "$connId": "con_268",
                    "$id": "565aaf92-3fca-440c-9d9d-471848e821a6",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ],
                            "variable": "isManager"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "a6e8037d-27ec-42cb-82e2-7d860245ed0d",
                    "typeOfStateId": "state",
                    "$connId": "con_273",
                    "$id": "c6701688-2e5a-4ac4-93b0-c5740f7d5f1a",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ],
                            "variable": "isTeamView"
                        },
                        {
                            "values": [
                                "true"
                            ],
                            "source": "context",
                            "variable": "isManager",
                            "comparison": "equals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "9563b911-d190-4745-943d-07bbc9e2ef72",
                    "typeOfStateId": "state",
                    "$connId": "con_278",
                    "$id": "e7a0fd89-b648-4ed7-a418-837b36b55662",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "39d4137c-74a4-4c68-bef7-31b24ecb30b4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "message",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(response) {\n  try {\n    response = JSON.parse(response);\n    const ENUM_RACA = {\n      \"1\": \"INDIGENA\",\n      \"2\": \"BRANCA\",\n      \"4\": \"PRETA\",\n      \"6\": \"AMARELA\",\n      \"8\": \"PARDA\",\n      \"9\": \"NAO_INFORMADO\"\n    };\n\n    const info =\n      response[\"s:Envelope\"][\"s:Body\"][\"ConsultarResponse\"][\"ConsultarResult\"][\"a:Retorno\"];\n\n    const dadosPessoais = info[\"a:Pessoa\"][\"a:DadosPessoais\"];\n    const contato = info[\"a:Pessoa\"][\"a:Contato\"];\n    const endereco = info[\"a:Pessoa\"][\"a:Endereco\"];\n    const identificacaoContrato = info[\"a:ContratosDeTrabalho\"][\"a:IdentificacaoDeContrato\"];\n    const isIdentificacaoArray = Array.isArray(identificacaoContrato);\n    let matricula = \"{{contact.extras.matricula}}\"\n\n    // if (isIdentificacaoArray) {\n    //   matricula = identificacaoContrato.find(item => item[\"a:Empresa\"][\"a:Codigo\"] == 1)['a:Matricula'];\n    // } else {\n    //   matricula = identificacaoContrato[\"a:Matricula\"];\n    // }\n\n    let message = [];\n    message.push(`*Nome*: ${capitalize(dadosPessoais[\"a:Nome\"])}`);\n    message.push(`*RaÃ§a*: ${capitalize(ENUM_RACA[dadosPessoais[\"b:RacaCor\"]])}`);\n    message.push(`*E-mail corporativo*: ${contato[\"a:EmailCorporativo\"].toLowerCase()}`);\n\n    if (contato[\"a:EmailParticular\"]) {\n      message.push(`*E-mail pessoal*: ${contato[\"a:EmailParticular\"].toLowerCase()}`);\n    } else {\n      message.push(`*E-mail pessoal*: -`);\n    }\n\n    if (contato[\"a:DddCelular\"] && contato[\"a:Celular\"]) {\n      message.push(`*Celular*: (${contato[\"a:DddCelular\"]}) ${contato[\"a:Celular\"]}`);\n    } else {\n      message.push(`*Celular*: -`);\n    }\n\n    if (dadosPessoais[\"a:DataDeNascimento\"]) {\n      const [year, month, day] = dadosPessoais[\"a:DataDeNascimento\"]\n        .split(\"T\")[0]\n        .split(\"-\");\n      message.push(`*Data de nascimento*: ${day}/${month}/${year}`);\n    }\n\n    message.push(`*MatrÃ­cula*: ${matricula}`);\n    message.push(`*Nacionalidade*: ${dadosPessoais[\"a:PaisDeNacionalidade\"][\"a:Nome\"]}`);\n    message.push(`*Logradouro*: ${capitalize(endereco[\"a:Logradouro\"])}`);\n    message.push(`*NÃºmero*: ${endereco[\"a:Numero\"]}`);\n\n    if (endereco[\"a:Complemento\"]) {\n      message.push(`*Complemento*: ${endereco[\"a:Complemento\"]}`);\n    } else {\n      message.push(`*Complemento*: -`);\n    }\n\n    message.push(`*Bairro*: ${capitalize(endereco[\"a:Bairro\"])}`);\n    message.push(`*CEP*: ${endereco[\"a:Cep\"]}`);\n    message.push(`*Cidade*: ${capitalize(endereco[\"a:Municipio\"][\"a:Nome\"])}`);\n    message.push(`*Estado*: ${capitalize(endereco[\"a:Municipio\"][\"a:Estado\"][\"a:Nome\"])}`);\n\n    return message.join(\"\\n\");\n  } catch (e) {\n    return \"NÃ£o consegui encontrar as informaÃ§Ãµes dos dados cadastrais, peÃ§o que tente novamente mais tarde.\";\n  }\n}\n\nfunction capitalize(str) {\n  if (typeof str != 'string') return \"Texto invÃ¡lido\"\n\n  return str.split(\" \")\n    .map((str2) => str2.charAt(0).toUpperCase() + str2.slice(1).toLowerCase())\n    .join(\" \")\n}",
                        "inputVariables": [
                            "convertXmlToJsonDadosCadastrais"
                        ],
                        "outputVariable": "message"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "66759194-551f-4cbd-b7a4-586cdf2f6e0a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c0379d4a-f3c8-4712-90c7-b94b79767e0c",
            "root": false,
            "$title": "Resumo dados cadastrais",
            "$position": {
                "top": "2300px",
                "left": "1710px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c659269f-7921-4663-92c5-88172fd55834": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "82472df2-b7c5-47aa-b88e-b94be42dd14e",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                    "typeOfStateId": "state",
                    "$connId": "con_283",
                    "$id": "bf2fc28d-52ef-4721-91b8-71b3755faa5b",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "9e2a8506-9567-418a-8b68-088b2227d677",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaColacorador",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(listaColaboradoresEscolha) {\n  try {\n    const idEscolha = JSON.parse(listaColaboradoresEscolha).id;\n    const { empresaId, matricula } = JSON.parse(idEscolha);\n    return `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n\n   <soapenv:Body>\n    <v2:Consultar>\n      <v2:filtro>\n      <v1:Colaborador>\n        <v1:Empresa>\n          <v1:Codigo>${empresaId}</v1:Codigo>\n        </v1:Empresa>\n        <v1:Matricula>${matricula}</v1:Matricula>\n      </v1:Colaborador>\n      </v2:filtro>\n    </v2:Consultar>\n  </soapenv:Body>\n</soapenv:Envelope>`\n  } catch (e) {\n    return false;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaColacorador] \"+String(err);}}",
                        "inputVariables": [
                            "listaColaboradoresEscolha"
                        ],
                        "outputVariable": "corpoBuscaColacorador",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-418a-8b68-088b2227d677",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaColacorador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaColacorador"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d9d90d84-c597-42da-9eab-2ee57fbf55f3",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca colaborador pela MÃ¡tricula e empresa",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeContratoDeTrabalho/Consultar"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaColacorador}}",
                        "uri": "{{config.LGBaseUrl}}/v2/ServicoDeContratoDeTrabalho",
                        "responseStatusVariable": "statusBuscaColaborador",
                        "responseBodyVariable": "responseBuscaColaborador"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS7-42da-9eab-2ee57fbf55f3",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaColaborador"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "721971b7-535f-4b90-95e4-befae520e4d9",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJson",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj;\n}",
                        "inputVariables": [
                            "responseBuscaColaborador"
                        ],
                        "outputVariable": "convertXmlToJson"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "c47b3a20-e902-4456-beee-87581b0e56c3",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "colaboradorSelecionado",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj) {\n\ttry {\n\t\tif (!obj) return false\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst corpo = obj[\"s:Envelope\"][\"s:Body\"][\"ConsultarResponse\"][\"ConsultarResult\"]['a:Retorno']\n\n\t\tconst contact = {\n\t\t\tempresaId: corpo['a:Empresa'] && corpo['a:Empresa']['a:Codigo'] ? corpo['a:Empresa']['a:Codigo'] : (corpo['a:Estabelecimento']['a:Codigo'] || ''),\n\t\t\tdataAdmissao: corpo['a:DataAdmissao'] ? corpo['a:DataAdmissao'].split(\"T\")[0] : '',\n\t\t\tmatricula: corpo['a:Matricula'] ? corpo['a:Matricula'] : '',\n\t\t\ttaxDocument: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:Cpf'] ? corpo['a:Pessoa']['a:Cpf'] : '',\n\t\t\tname: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:Nome'] ? corpo['a:Pessoa']['a:Nome'] : '',\n\t\t\tpessoaId: corpo['a:Pessoa'] && corpo['a:Pessoa']['a:PessoaId'] ? corpo['a:Pessoa']['a:PessoaId'] : '',\n\t\t}\n\n\t\treturn contact;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [colaboradorSelecionado] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJson"
                        ],
                        "outputVariable": "colaboradorSelecionado",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJson"
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPT2-4456-beee-87581b0e56c3",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c659269f-7921-4663-92c5-88172fd55834",
            "root": false,
            "$title": "[API] Dados colaborador por PessoaID",
            "$position": {
                "top": "1400px",
                "left": "270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a6e8037d-27ec-42cb-82e2-7d860245ed0d": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{confirmacaoDadosBuild@type}}",
                            "rawContent": "{{confirmacaoDadosBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_288",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "confirmacaoDados:sim"
                            ],
                            "variable": "confirmacaoDadosEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "fbabed30-85a5-4262-a963-947342a25cc4"
                },
                {
                    "stateId": "de2ef4ca-217c-4713-8e29-54d6cb656877",
                    "typeOfStateId": "state",
                    "$connId": "con_293",
                    "$id": "17e8a11b-d8fe-4ee4-b391-c0cda65194e7",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "confirmacaoDados:nao"
                            ],
                            "variable": "confirmacaoDadosEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "2d1b641f-ff9d-40fd-b16a-404fc250f77a",
                    "typeOfStateId": "state",
                    "$connId": "con_298",
                    "$id": "74fdf766-e23f-4215-ba7e-849f1bd9bc5f",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "confirmacaoDados:voltar"
                            ],
                            "variable": "confirmacaoDadosEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "66ed2ef0-b5df-41f3-842e-652d222d482d"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'confirmacaoDadosOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"confirmacaoDados:sim\",\n\t\t\t\t\ttitle: \"Sim, estÃ£o corretos\",\n\t\t\t\t\ttitleShort: \"Sim, estÃ£o corretos\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"confirmacaoDados:nao\",\n\t\t\t\t\ttitle: \"NÃ£o estÃ£o corretos\",\n\t\t\t\t\ttitleShort: \"NÃ£o estÃ£o corretos\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"confirmacaoDados:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmacaoDadosOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "confirmacaoDadosOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmacaoDadosOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmacaoDadosOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'confirmacaoDadosBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options, userData, sourceSlack) {\n  try {\n    const { display_name, first_name } = userData ? JSON.parse(userData) : {};\n\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const nickname = sourceSlack === \"Slack\" ? (display_name || first_name) : \"{nickname}\";\n\n    const textHeader = \"\";\n    const textBody = `${nickname}, os dados estÃ£o corretos?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmacaoDadosBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "confirmacaoDadosOptions",
                            "userData",
                            "contact.source"
                        ],
                        "outputVariable": "confirmacaoDadosBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmacaoDadosBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmacaoDadosBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"confirmacaoDadosEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmacaoDadosEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "confirmacaoDadosOptions"
                        ],
                        "outputVariable": "confirmacaoDadosEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmacaoDadosEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmacaoDadosEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{confirmacaoDadosEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "confirmacaoDadosEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "confirmacaoDadosEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "confirmacaoDadosEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "confirmacaoDadosEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "a6e8037d-27ec-42cb-82e2-7d860245ed0d",
            "root": false,
            "$title": "ConfirmaÃ§Ã£o de dados",
            "$position": {
                "top": "2300px",
                "left": "2076px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "fbabed30-85a5-4262-a963-947342a25cc4": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "1de1aa75-b3ac-4d74-a687-3f17926d767e",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "37617f6e-af19-4f69-b097-4a9429a1120d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "37617f6e-af19-4f69-b097-4a9429a1120d",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "23293d5a-3ac9-4a3a-8721-098cd39b4bc3",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "08e6eefe-a171-45c0-a346-bfaf7caf903f",
                            "type": "text/plain",
                            "content": "Ã“timo! Fico feliz em saber que estÃ¡ tudo certo!\n\nE lembre-se de *atualizar seus dados sempre que houver alguma mudanÃ§a!* ðŸ˜‰",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "08e6eefe-a171-45c0-a346-bfaf7caf903f",
                                "type": "text/plain",
                                "content": "Ã“timo! Fico feliz em saber que estÃ¡ tudo certo!\n\nE lembre-se de *atualizar seus dados sempre que houver alguma mudanÃ§a!* ðŸ˜‰"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4f9589df-1b86-4fe5-b9e7-1afd3a64c854",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "fbabed30-85a5-4262-a963-947342a25cc4",
            "root": false,
            "$title": "Dados corretos",
            "$position": {
                "top": "2448px",
                "left": "2257px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "de2ef4ca-217c-4713-8e29-54d6cb656877": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "85877eca-c384-4ed2-b2fb-ec7250f09cb3",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "44294bc5-23d5-416d-9a46-ca31de6be8ce",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "44294bc5-23d5-416d-9a46-ca31de6be8ce",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "9e3b6a5a-0c7b-4ad2-a223-253cc973c3ec",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0b228023-a992-46e8-bcc4-0d16e19ca333",
                            "type": "text/plain",
                            "content": "Preciso corrigir isso! ðŸ˜±â€¨\n\nInfelizmente, nÃ£o consigo fazer a alteraÃ§Ã£o diretamente por aqui. Para atualizar seus dados, por favor, *acesse a plataforma usando o <https://login.lg.com.br/saml/auto/neon?f=4F53562B706671356742357773423153576A626179773D3D|link>*. ðŸ‘‡",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0b228023-a992-46e8-bcc4-0d16e19ca333",
                                "type": "text/plain",
                                "content": "Preciso corrigir isso! ðŸ˜±â€¨\n\nInfelizmente, nÃ£o consigo fazer a alteraÃ§Ã£o diretamente por aqui. Para atualizar seus dados, por favor, *acesse a plataforma usando o <https://login.lg.com.br/saml/auto/neon?f=4F53562B706671356742357773423153576A626179773D3D|link>*. ðŸ‘‡"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "21cee4b0-3b3a-4a29-a820-b93701836874",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "de2ef4ca-217c-4713-8e29-54d6cb656877",
            "root": false,
            "$title": "Dados incorretos",
            "$position": {
                "top": "2450px",
                "left": "1912px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9c8fcb9f-5329-4bd4-8147-16158b790fd4": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{algoMaisBuild@type}}",
                            "rawContent": "{{algoMaisBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_303",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:sim_mesmo_neowner"
                            ],
                            "variable": "algoMaisEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "be2501fb-a16b-4612-834c-19b379feb6c3"
                },
                {
                    "stateId": "7563cc00-7b1a-45e7-9d2d-ff452c27ab00",
                    "typeOfStateId": "state",
                    "$connId": "con_308",
                    "$id": "cb904826-724e-4ec5-a9fd-57ef87881a65",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:outro_neowner"
                            ],
                            "variable": "algoMaisEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "f8b1e371-5b4d-422b-a81e-2cc252a033e9",
                    "typeOfStateId": "state",
                    "$connId": "con_313",
                    "$id": "17a8b27a-4b18-41fc-bf4f-334b3f7cc075",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:menu_anterior",
                                "algoMais:ponto_newoner",
                                "algoMais:ferias_newoner",
                                "algoMais:folha_newoner"
                            ],
                            "variable": "algoMaisEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "33bdf555-d3c9-41cd-a91b-4a52fe12e9c3",
                    "typeOfStateId": "state",
                    "$connId": "con_318",
                    "$id": "ab724eb1-6f31-4f39-9143-7102be9c22ca",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:menu_principal"
                            ],
                            "variable": "algoMaisEscolha@id"
                        },
                        {
                            "values": [
                                "true"
                            ],
                            "source": "context",
                            "variable": "isManager",
                            "comparison": "equals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "be2501fb-a16b-4612-834c-19b379feb6c3",
                    "typeOfStateId": "state",
                    "$connId": "con_323",
                    "$id": "233c237e-e54e-4c1d-ae2d-897ddc621e2e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:menu_principal",
                                "algoMais:outro_assunto"
                            ],
                            "variable": "algoMaisEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "5c24f954-d145-4f43-8e29-6e2098646352",
                    "typeOfStateId": "state",
                    "$connId": "con_328",
                    "$id": "fdddcb86-44e6-406a-9e66-f42a8c0ef00d",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "algoMais:encerrar"
                            ],
                            "variable": "algoMaisEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "21ee58ec-822e-4add-be19-a5b13282e620"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'algoMaisOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isTeamView, subfluxo) {\n\ttry {\n\t\tisTeamView = JSON.parse(isTeamView);\n\t\tconst subfluxo_Ponto = subfluxo === \"Ponto\";\n\t\tconst subfluxo_DadosFolha = subfluxo === \"Dados de folha\" || subfluxo === \"Holerite\";\n\t\tconst subfluxo_Ferias = subfluxo === \"FÃ©rias\";\n\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:sim_mesmo_neowner\",\n\t\t\t\t\ttitle: \"Continuar\",\n\t\t\t\t\ttitleShort: \"Continuar\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView && !subfluxo_Ponto && !subfluxo_Ferias\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:folha_newoner\",\n\t\t\t\t\ttitle: \"Dados de folha\",\n\t\t\t\t\ttitleShort: \"Dados de folha\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView && subfluxo_DadosFolha\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:ponto_newoner\",\n\t\t\t\t\ttitle: \"Ponto\",\n\t\t\t\t\ttitleShort: \"Ponto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView && subfluxo_Ponto\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:ferias_newoner\",\n\t\t\t\t\ttitle: \"FÃ©rias\",\n\t\t\t\t\ttitleShort: \"FÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView && subfluxo_Ferias\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:outro_assunto\",\n\t\t\t\t\ttitle: \"Outro assunto\",\n\t\t\t\t\ttitleShort: \"Outro assunto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView && (subfluxo_Ponto || subfluxo_DadosFolha || subfluxo_Ferias)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:outro_neowner\",\n\t\t\t\t\ttitle: \"Outro Neowner\",\n\t\t\t\t\ttitleShort: \"Outro Neowner\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: isTeamView\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:menu_anterior\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: !isTeamView\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:menu_principal\",\n\t\t\t\t\ttitle: \"Menu principal\",\n\t\t\t\t\ttitleShort: \"Menu principal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\t// active: !isTeamView\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"algoMais:encerrar\",\n\t\t\t\t\ttitle: \"Encerrar conversa\",\n\t\t\t\t\ttitleShort: \"Encerrar conversa\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'algoMaisOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "isTeamView",
                            "subfluxo"
                        ],
                        "outputVariable": "algoMaisOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{algoMaisOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "algoMaisOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'algoMaisBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options, isTeamView, subfluxo) {\n  try {\n    isTeamView = JSON.parse(isTeamView);\n    const subfluxo_Ponto = subfluxo === \"menuPrincipal:ponto\";\n    const subfluxo_DadosFolha = subfluxo === \"menuPrincipal:dados_folha\";\n\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    let textBody\n    if (isTeamView) {\n      if (subfluxo_Ponto) {\n        textBody = `Se quiser continuar falando sobre ponto de {{colaboradorselecionado@name}} clique em â€œ*Ponto*â€, caso nÃ£o queira, escolha alguma outra opÃ§Ã£o abaixo. ðŸ‘‡`;\n      } else if (subfluxo_DadosFolha) {\n        textBody = `Se quiser continuar falando sobre os dados de folha de {{colaboradorselecionado@name}} clique em â€œ*Dados de folha*â€, caso nÃ£o queira, escolha alguma outra opÃ§Ã£o abaixo. ðŸ‘‡`;\n      } else {\n        textBody = `Se quiser continuar falando sobre {{colaboradorselecionado@name}} clique em â€œ*Continuar*â€, caso nÃ£o queira, escolha alguma outra opÃ§Ã£o abaixo. ðŸ‘‡`;\n      }\n    } else {\n      textBody = `Escolha uma das opÃ§Ãµes abaixo ou digite sua dÃºvida! ðŸŒž`;\n    }\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n          text: textBody,\n          scope: \"immediate\",\n          options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n          text: textBody,\n          // \"scope\":\"persistent\",\n          options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run() { try { return run.apply(null, arguments); } catch (err) { return \"SCRIPT_ERROR [SET 'algoMaisBuild'] \" + String(err); } }\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'algoMaisBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "algoMaisOptions",
                            "isTeamView",
                            "subfluxo"
                        ],
                        "outputVariable": "algoMaisBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{algoMaisBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "algoMaisBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "51e616fd-fd45-4cdc-beb6-6b51478c45e9",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto finalizado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Finalizacao finalizado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"algoMaisEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'algoMaisEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "algoMaisOptions"
                        ],
                        "outputVariable": "algoMaisEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{algoMaisEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "algoMaisEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{algoMaisEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "algoMaisEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "algoMaisEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "algoMaisEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "algoMaisEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
            "root": false,
            "$title": "Algo mais",
            "$position": {
                "top": "2650px",
                "left": "1258px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "be2501fb-a16b-4612-834c-19b379feb6c3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "762d0bed-d652-494a-9ca6-ae026ec4b6df",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "be2501fb-a16b-4612-834c-19b379feb6c3",
            "root": false,
            "$title": "[GO TO][Algo mais] Menu principal",
            "$position": {
                "top": "2850px",
                "left": "1170px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "7563cc00-7b1a-45e7-9d2d-ff452c27ab00": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "6ac04366-4262-4c3c-a5cb-39159cf97a28",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "5bc135d7-be9c-4b4b-8318-dc0518dd93c8",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "7563cc00-7b1a-45e7-9d2d-ff452c27ab00",
            "root": false,
            "$title": "[GO TO][Algo mais] Lista colaboradores",
            "$position": {
                "top": "2850px",
                "left": "1350px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "5c24f954-d145-4f43-8e29-6e2098646352": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2b219fac-a85f-4e98-b543-eceba4428573",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9a7ca912-c026-492f-8214-1636ee8dce29",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "5c24f954-d145-4f43-8e29-6e2098646352",
            "root": false,
            "$title": "[GO TO][Algo mais] Encerramento",
            "$position": {
                "top": "2750px",
                "left": "1620px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f3dcc9dc-1884-466d-856f-debd6f40b9fb": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "c886ac1e-3713-4650-b244-a81d54fa6734",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "da373e82-b736-4cdf-bf39-ab60ecefd482",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "da373e82-b736-4cdf-bf39-ab60ecefd482",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "83491ec9-cb52-485f-b9a6-394a907d8713",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b59e869c-52ce-4ab6-a1fb-1807fa1a9cc1",
                            "type": "text/plain",
                            "content": "Vou encerrar aqui para que vocÃª possa recomeÃ§ar quando quiser, tÃ¡ bom? ðŸŒž",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b59e869c-52ce-4ab6-a1fb-1807fa1a9cc1",
                                "type": "text/plain",
                                "content": "Vou encerrar aqui para que vocÃª possa recomeÃ§ar quando quiser, tÃ¡ bom? ðŸŒž"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "923424f1-199d-4080-97a5-d9a2b3ec1968",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f3dcc9dc-1884-466d-856f-debd6f40b9fb",
            "root": false,
            "$title": "Mensagem encerramento",
            "$position": {
                "top": "3050px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9563b911-d190-4745-943d-07bbc9e2ef72": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "65c16caf-782f-4d44-aafd-f880d4f32c1c",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9563b911-d190-4745-943d-07bbc9e2ef72",
            "root": false,
            "$title": "[GO TO][Dados cadastrais] Algo mais",
            "$position": {
                "top": "2450px",
                "left": "1710px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c2f4d68c-3323-4d71-b9ae-dae527786da9": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "901cfa50-74ba-4cd8-a43b-cbe8a2a1862f",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c2f4d68c-3323-4d71-b9ae-dae527786da9",
            "root": false,
            "$title": "Redirect Start",
            "$position": {
                "top": "3050px",
                "left": "2070px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "01ec69f0-c1c3-42de-a47f-8a5921b110b3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "b653e4af-edf9-4d72-a187-15ea802ce939",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "8aec0dfb-728e-460f-9d79-d9d0a1e10c28",
                    "typeOfStateId": "state",
                    "$connId": "con_333",
                    "$id": "3714db21-f09d-4cdb-9023-a4dd7bc94937",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "BLIP_CHAT"
                            ],
                            "variable": "DWNT@contact.source"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "8aec0dfb-728e-460f-9d79-d9d0a1e10c28",
                    "typeOfStateId": "state",
                    "$connId": "con_338",
                    "$id": "a4660611-891b-4824-9941-a854bfbfa494",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "holerite3"
                            ],
                            "variable": "application.identifier"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "57c05347-6980-49e1-8beb-6a521aecf1be",
                    "typeOfStateId": "state",
                    "$connId": "con_343",
                    "$id": "596d83eb-4378-4a53-b073-8c9c3c183f7e",
                    "conditions": [
                        {
                            "values": [
                                "Slack"
                            ],
                            "source": "context",
                            "variable": "contact.source",
                            "comparison": "equals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "44429dce-9c20-4245-91b0-c7e8b82f13a4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'personType'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(colaboradorInfo){\n    try{\n        colaboradorInfo = JSON.parse(colaboradorInfo);\n        \n        const id = colaboradorInfo.dadosGerais.vinculoEmpregaticio\n        const partnerIds = [\"80\"]\n        \n        if(partnerIds.includes(id)){\n            return \"PARTNER\"\n        }\n        \n        return \"EMPLOYEE\"\n        \n    }catch(error){\n        return false;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'personType'] \"+String(err);}}",
                        "inputVariables": [
                            "colaboradorInfo"
                        ],
                        "outputVariable": "personType",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT0-4245-91b0-c7e8b82f13a4",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{personType}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "personType"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "443525fd-3675-4ba9-bdaf-c04be8bed1ae",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'firstName'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n  try {\n    const FIRSTNAME = JSON.parse(response).pessoa.dadosPessoais.nome\n    .split(\" \")[0];\n\n    return FIRSTNAME.charAt(0).toUpperCase() + FIRSTNAME.slice(1).toLowerCase();\n  } catch (error) {\n    return false;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'firstName'] \"+String(err);}}",
                        "inputVariables": [
                            "colaboradorInfo"
                        ],
                        "outputVariable": "firstName",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT5-4ba9-bdaf-c04be8bed1ae",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{firstName}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "firstName"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "b4f8bc80-2edb-491a-a116-55074b2e7a9d",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "Definir contato",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "pessoaId": "{{colaboradorInfo@pessoa.dadosPessoais.pessoaId}}",
                            "dataAdmissao": "{{colaboradorInfo@dadosGerais.dataAdmissao}}",
                            "matricula": "{{colaboradorInfo@dadosGerais.matricula}}",
                            "situacao": "{{colaboradorInfo@dadosGerais.situacao.descricao}}",
                            "empresaId": "{{colaboradorInfo@empresa.codigo}}",
                            "empresa": "{{colaboradorInfo@empresa.descricao}}",
                            "personType": "{{personType}}",
                            "primeiroNome": "{{firstName}}"
                        },
                        "name": "{{colaboradorInfo@pessoa.dadosPessoais.nome}}",
                        "email": "{{colaboradorInfo@pessoa.contato.emailCorporativo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "colaboradorInfo"
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "colaboradorInfo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "aff6f51b-e673-4e8e-8fcd-9cc3da1875cf",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n      <v2:ConsultarLista>\n         <v2:filtro>\n            <v1:Colaborador>\n               <v1:Empresa>\n                  <v1:Codigo>{{contact.extras.empresaId}}</v1:Codigo>\n               </v1:Empresa>\n               <v1:Matricula>{{contact.extras.matricula}}</v1:Matricula>\n            </v1:Colaborador>\n         </v2:filtro>\n      </v2:ConsultarLista>\n   </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaFerias] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT3-4e8e-8fcd-9cc3da1875cf",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "ab1076f7-ef18-4a93-9289-ace9a9a02369",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca fÃ©rias do colaborador",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeFerias/ConsultarLista"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaFerias}}",
                        "uri": "{{config.LGBaseUrl}}/v2/ServicoDeFerias",
                        "responseStatusVariable": "statusBuscaFerias",
                        "responseBodyVariable": "responseBuscaFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "testeapagar"
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS8-4a93-9289-ace9a9a02369",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "9383bf24-74b1-4f79-bf30-5b0cdb424a24",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(xml) {\n  try {\n        if (!xml) return false\n \n        const json = {};\n        const tagRegex = /<([^\\/!> ]+)(?: [^>]+)?>([^<]*)/g;\n        let match;\n        \n        while ((match = tagRegex.exec(xml)) !== null) {\n        const tagName = match[1];\n        const tagValue = match[2].trim();\n        \n        if (!json[tagName]) {\n            json[tagName] = tagValue || {};\n        } else if (Array.isArray(json[tagName])) {\n            json[tagName].push(tagValue || {});\n        } else {\n            json[tagName] = [json[tagName], tagValue || {}];\n        }\n        }\n        delete json['s:Envelope']\n        delete json['s:Body']\n        delete json['ConsultarListaResponse']\n        delete json['ConsultarListaResult']\n        delete json['a:CodigoDoErro']\n        delete json['a:Mensagens']\n        delete json['a:Tipo']\n        delete json['a:Retorno']\n        delete json['a:IdentificacaoDeContrato']\n        delete json['a:Empresa']\n        delete json['a:CodigoDeIntegracao']\n        delete json['a:Codigo']\n        delete json['a:Matricula']\n        delete json['a:FeriasParcial']\n        \n        return json;\n  } catch(e) {\n        return false\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [convertXmlToJsonFerias] \"+String(err);}}",
                        "inputVariables": [
                            "responseBuscaFerias"
                        ],
                        "outputVariable": "convertXmlToJsonFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPT1-4f79-bf30-5b0cdb424a24",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{convertXmlToJsonFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "convertXmlToJsonFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "03ecacc3-8ac8-4bcc-9f23-5c40ff34aa2c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "feriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj) {\n\ttry {\n\t\tif (!obj) return false\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst diaAtual = new Date()\n\n\t\tconst inicioFerias = obj['a:DataDaOcorrencia'].some((value, index) => {\n            const diaInicio = new Date(value)\n            const diaFim = new Date(obj['a:DataFim'][index])\n\n            const diferencaDias = diaInicio.getTime() - diaAtual.getTime();\n            let Difference_In_Days = Math.round(diferencaDias / (1000 * 3600 * 24));\n\n            const diasFeriasTime = diaInicio.getTime() - diaFim.getTime();\n            let diasFerias = Math.round(diasFeriasTime / (1000 * 3600 * 24));\n\n            return Difference_In_Days < 5 && Difference_In_Days >= diasFerias\n        })\n\n        const fimFerias = obj['a:DataFim'].some((value, index) => {\n            const diaInicio = new Date(value)\n\n            const diferencaDias = diaInicio.getTime() - diaAtual.getTime();\n            let Difference_In_Days = Math.round(diferencaDias / (1000 * 3600 * 24));\n\n            return Difference_In_Days > -5 && Difference_In_Days < 0\n        })\n\n\t\tconst output = {\n            inicio: inicioFerias ? 'Sim' : 'NÃ£o',\n            fim: fimFerias ? 'Sim' : 'NÃ£o',\n        }\n\n\t\treturn output;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [feriasInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonFerias"
                        ],
                        "outputVariable": "feriasInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "variable": "convertXmlToJsonFerias",
                            "comparison": "exists"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT8-4bcc-9f23-5c40ff34aa2c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{feriasInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "feriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e99949e3-d683-4bc1-bb77-3cb19db2c02a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaLicenca",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n      <v2:ConsultarLista>\n         <v2:filtro>\n            <v1:Colaborador>\n               <v1:Empresa>\n                  <v1:Codigo>{{contact.extras.empresaId}}</v1:Codigo>\n               </v1:Empresa>\n               <v1:Matricula>{{contact.extras.matricula}}</v1:Matricula>\n            </v1:Colaborador>\n         </v2:filtro>\n      </v2:ConsultarLista>\n   </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaLicenca] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaLicenca",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT3-4bc1-bb77-3cb19db2c02a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaLicenca}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaLicenca"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "c8dee0c5-2518-41e7-a986-da0daa11e909",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Licenca do colaborador",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeAfastamento/ConsultarLista"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaLicenca}}",
                        "uri": "{{config.LGBaseUrl}}/v2/servicodeafastamento",
                        "responseStatusVariable": "statusBuscaLicenca",
                        "responseBodyVariable": "responseBuscaLicenca"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "variable": "testeapagar",
                            "comparison": "exists",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS8-41e7-a986-da0daa11e909",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaLicenca"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "74870534-73a8-4d05-80c1-3c12af89c923",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonLicenca",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(xml) {\n    try {\n          if (!xml) return false\n   \n          const json = {};\n          const tagRegex = /<([^\\/!> ]+)(?: [^>]+)?>([^<]*)/g;\n          let match;\n          \n          while ((match = tagRegex.exec(xml)) !== null) {\n          const tagName = match[1];\n          const tagValue = match[2].trim();\n          \n          if (!json[tagName]) {\n              json[tagName] = tagValue || {};\n          } else if (Array.isArray(json[tagName])) {\n              json[tagName].push(tagValue || {});\n          } else {\n              json[tagName] = [json[tagName], tagValue || {}];\n          }\n          }\n          delete json['s:Envelope']\n          delete json['s:Body']\n          delete json['ConsultarListaResponse']\n          delete json['ConsultarListaResult']\n          delete json['a:CodigoDoErro']\n          delete json['a:Mensagens']\n          delete json['a:Tipo']\n          delete json['a:Retorno']\n          delete json['a:IdentificacaoDeContrato']\n          delete json['a:Empresa']\n          delete json['a:Codigo']\n          delete json['a:CodigoDeIntegracao']\n          delete json['a:Matricula']\n          delete json['a:FeriasParcial']\n  \n          return json;\n    } catch(e) {\n          return false\n    }\n  }\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [convertXmlToJsonLicenca] \"+String(err);}}",
                        "inputVariables": [
                            "responseBuscaLicenca"
                        ],
                        "outputVariable": "convertXmlToJsonLicenca",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPT8-4d05-80c1-3c12af89c923",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{convertXmlToJsonLicenca}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "convertXmlToJsonLicenca"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "b57233ea-f4b9-4236-a3f4-9423490c5682",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "licencaInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj) {\n\ttry {\n\t\tif (!obj) return false\n\n        let output = 'Sem licenÃ§a'\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst diaAtual = new Date()\n\n        const MOTIVOS = [\n            {\n                id: 1,\n                title: 'LicenÃ§a Maternidade',\n                motivosIds: [17, 18, 33, 35], \n            },\n            {\n                id: 2,\n                title: 'LicenÃ§a Paternidade',\n                motivosIds: [7], \n            },\n            {\n                id: 3,\n                title: 'LicenÃ§a',\n                motivosIds: [1, 3, 21],\n            },\n        ]\n\n\t\tconst inicioFerias = obj['a:DataDaOcorrencia'].some((value, index) => {\n            const diaInicio = new Date(value)\n            const diaFim = new Date(obj['a:DataFim'][index])\n            const motivoId = obj['a:Motivo'][index]\n\n            const motivoFiltro = MOTIVOS.some((motivo) => motivo.motivosIds.some((id) => id === Number(motivoId)))\n\n            const diferencaDias = diaInicio.getTime() - diaAtual.getTime();\n            let Difference_In_Days = Math.round(diferencaDias / (1000 * 3600 * 24));\n\n            const diasFeriasTime = diaInicio.getTime() - diaFim.getTime();\n            let diasFerias = Math.round(diasFeriasTime / (1000 * 3600 * 24));\n\n            let validate = Difference_In_Days < 5 && Difference_In_Days >= diasFerias && motivoFiltro\n\n            if (validate) {\n                output = MOTIVOS.find((motivo) => motivo.motivosIds.some((id) => id === Number(motivoId))).title\n            }\n\n            return validate;\n        })\n\n        const fimFerias = obj['a:DataFim'].some((value, index) => {\n            const diaInicio = new Date(value)\n            const motivoId = obj['a:Motivo'][index]\n\n            const motivoFiltro = MOTIVOS.some((motivo) => motivo.motivosIds.some((id) => id === Number(motivoId)))\n\n            const diferencaDias = diaInicio.getTime() - diaAtual.getTime();\n            let Difference_In_Days = Math.round(diferencaDias / (1000 * 3600 * 24));\n\n            let validate = Difference_In_Days > -5 && Difference_In_Days < 0 && motivoFiltro\n\n            if (validate) {\n                output = MOTIVOS.find((motivo) => motivo.motivosIds.some((id) => id === Number(motivoId))).title\n            }\n\n            return validate;\n        })\n\n\t\treturn output;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [licencaInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonLicenca"
                        ],
                        "outputVariable": "licencaInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJsonLicenca"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-4236-a3f4-9423490c5682",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{licencaInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "licencaInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "11204534-b657-43a2-97a6-1d5c310fb8c6",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "Definir contato",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "InicioFerias": "{{feriasInfo@inicio}}",
                            "FimFerias": "{{feriasInfo@fim}}",
                            "LicenÃ§a": "{{licencaInfo}}"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "feriasInfo@inicio"
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "feriasInfo@fim"
                        },
                        {
                            "source": "context",
                            "variable": "licencaInfo",
                            "comparison": "exists",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "57c05347-6980-49e1-8beb-6a521aecf1be",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                }
            ],
            "id": "01ec69f0-c1c3-42de-a47f-8a5921b110b3",
            "root": false,
            "$title": "[API] Dados colaborador LG",
            "$position": {
                "top": "710px",
                "left": "540px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e9bc5e0a-b8ac-4e4b-be12-9ab8f5fe0600": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "f8f31af5-6b6c-402e-8aa8-2ff702f305a7",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "welcome",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e9bc5e0a-b8ac-4e4b-be12-9ab8f5fe0600",
            "root": false,
            "$title": "[GO TO][Exceptions] Welcome",
            "$position": {
                "top": "244px",
                "left": "3048px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "33bdf555-d3c9-41cd-a91b-4a52fe12e9c3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "762d0bed-d652-494a-9ca6-ae026ec4b6df",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c34d8e32-c8fe-4447-bb70-acce39c0a0c7",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "33bdf555-d3c9-41cd-a91b-4a52fe12e9c3",
            "root": false,
            "$title": "[GO TO][Algo mais] Menu gestor",
            "$position": {
                "top": "2750px",
                "left": "990px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "7610e3a9-687e-4811-932f-7ebf008c61e2": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuPontoBuild@type}}",
                            "rawContent": "{{menuPontoBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_348",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPonto:espelho"
                            ],
                            "variable": "menuPontoEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "80ffe2e1-ce80-45d2-ae4c-73f508f8884a"
                },
                {
                    "stateId": "d275a4c0-4bc9-41f5-8561-bdb58bfbde80",
                    "typeOfStateId": "state",
                    "$connId": "con_353",
                    "$id": "9c9c7490-9d14-43c4-81d2-6910f6ab8ae7",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPonto:saldo"
                            ],
                            "variable": "menuPontoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c249de73-192a-4e74-8fd6-426d26e8aba6",
                    "typeOfStateId": "state",
                    "$connId": "con_358",
                    "$id": "15d10406-3211-4d89-8c22-57a45135f39c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPonto:marcar"
                            ],
                            "variable": "menuPontoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "d77d4d6d-b1b0-419f-9a86-cd0df97a0dbb",
                    "typeOfStateId": "state",
                    "$connId": "con_363",
                    "$id": "77b3efea-6149-4d2c-8bb0-baab32f85bfd",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuPonto:voltar"
                            ],
                            "variable": "menuPontoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "f77ec4c5-bbb1-4a8b-817b-54622b3b6825"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuPontoOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isTeamView, colaboradorMarcaPonto) {\n\tisTeamView = JSON.parse(isTeamView);\n\tcolaboradorMarcaPonto = JSON.parse(colaboradorMarcaPonto);\n\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPonto:espelho\",\n\t\t\t\t\ttitle: \"Espelho de ponto\",\n\t\t\t\t\ttitleShort: \"Espelho de ponto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPonto:marcar\",\n\t\t\t\t\ttitle: \"Marcar ponto\",\n\t\t\t\t\ttitleShort: \"Marcar ponto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: !isTeamView && colaboradorMarcaPonto\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPonto:saldo\",\n\t\t\t\t\ttitle: \"Saldo banco de horas\",\n\t\t\t\t\ttitleShort: \"Saldo banco de horas\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuPonto:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPontoOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "isTeamView",
                            "colaboradorMarcaPonto"
                        ],
                        "outputVariable": "menuPontoOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPontoOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPontoOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuPontoBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `O que deseja ver?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPontoBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuPontoOptions"
                        ],
                        "outputVariable": "menuPontoBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPontoBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPontoBuild"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuPontoEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuPontoEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuPontoOptions"
                        ],
                        "outputVariable": "menuPontoEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuPontoEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuPontoEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuPontoEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuPontoEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuPontoEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuPontoEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuPontoEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "7610e3a9-687e-4811-932f-7ebf008c61e2",
            "root": false,
            "$title": "Menu ponto",
            "$position": {
                "top": "1050px",
                "left": "1350px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "80ffe2e1-ce80-45d2-ae4c-73f508f8884a": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{espelhoPontoBuild@type}}",
                            "rawContent": "{{espelhoPontoBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "7610e3a9-687e-4811-932f-7ebf008c61e2",
                    "typeOfStateId": "state",
                    "$connId": "con_368",
                    "$id": "fc785676-95c9-48a1-b7f4-8a3ce06bfa1e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "espelhoPonto:voltar"
                            ],
                            "variable": "espelhoPontoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_373",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "invÃ¡lido"
                            ],
                            "variable": "espelhoPontoEscolha"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "b8f3cc03-0733-4c21-99f0-a3d70fceabf3"
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "9ba36f9a-8103-4adb-b844-85f01d2c24e4"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "db159521-33d8-4e0f-a92c-027b8c60db4f",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listMonths'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "async function run() {\n    try {\n        const now = new Date();  \n        mesAtual = now.getMonth() + 1;\n        anoAtual = now.getFullYear();\n        \n        // CÃ¡lculo dos Ãºltimos 3 meses\n        const QUANTITY_MONTHS = 3;\n        const lastMonths = [];\n        for (let i = 0; i < QUANTITY_MONTHS; i++) {\n            let month = mesAtual - i;\n            let year = anoAtual;\n            if (month <= 0) {\n                month += 12;\n                year -= 1;\n            }\n            lastMonths.push({ month, year });\n        }\n        \n        // Preencher os itens com os Ãºltimos 3 meses em ordem\n        const itens = lastMonths.reverse().reduce((acc,{month, year}) => {\n            const optionInfo = `${month.toString().padStart(2, '0')}/${year}`;\n            acc.push({\n                title: optionInfo,\n                id: optionInfo,\n            });\n            \n            return acc;\n        }, []);\n\n        return itens;\n\n    } catch (e) {\n        return e.message;\n    }\n}",
                        "inputVariables": [],
                        "outputVariable": "listMonths",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'espelhoPontoOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(listMonths) {\n\ttry {\n\t\tconst allOptions = JSON.parse(listMonths).map(item => ({\n\t\t\tid: `espelhoPonto:${item.id}`,\n\t\t\ttitle: item.id,\n\t\t\ttitleShort: item.id,\n\t\t\tdescription: \"\",\n\t\t\tactive: true\n\n\t\t}));\n\n\t\tallOptions.push(\n\t\t\t{\n\t\t\t\tid: \"espelhoPonto:voltar\",\n\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\tdescription: \"\",\n\t\t\t\tactive: true\n\t\t\t}\n\t\t)\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run() { try { return run.apply(null, arguments); } catch (err) { return \"SCRIPT_ERROR [SET 'espelhoPontoOptions'] \" + String(err); } }\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'espelhoPontoOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "listMonths"
                        ],
                        "outputVariable": "espelhoPontoOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{espelhoPontoOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "espelhoPontoOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'espelhoPontoBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Para qual mÃªs vocÃª quer emitir o espelho de ponto?\n\nPara conferir o registro das horas do mÃªs atual, *Ã© sÃ³ acessar a plataforma atravÃ©s do link abaixo!* ðŸ‘‡\n\n<https://prd-aa1.lg.com.br/autoatendimento/index.html#/funcao?id=2824&uid=1283037876&tipo=1|Link>`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'espelhoPontoBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "espelhoPontoOptions"
                        ],
                        "outputVariable": "espelhoPontoBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{espelhoPontoBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "espelhoPontoBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"espelhoPontoEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'espelhoPontoEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "espelhoPontoOptions"
                        ],
                        "outputVariable": "espelhoPontoEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{espelhoPontoEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "espelhoPontoEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{espelhoPontoEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "espelhoPontoEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "espelhoPontoEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "espelhoPontoEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "espelhoPontoEscolha"
                        }
                    ]
                },
                {
                    "$id": "f4c3773d-c782-4350-99ab-7ad9c4086c7b",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'mesAnoBusca'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(itemEscolhidoObjeto){\n    try{ \n\t\tconst [mesBusca, anoBusca] = JSON.parse(itemEscolhidoObjeto).title.split('/');\n        \n        return {\n            mesBusca,\n            anoBusca\n        } \n    } catch(error){\n        return false\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesAnoBusca'] \"+String(err);}}",
                        "inputVariables": [
                            "espelhoPontoEscolha"
                        ],
                        "outputVariable": "mesAnoBusca",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "variable": "espelhoPontoEscolha",
                            "comparison": "notEquals"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "variable": "espelhoPontoEscolha",
                            "comparison": "exists"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT2-4350-99ab-7ad9c4086c7b",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesAnoBusca}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesAnoBusca"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "80ffe2e1-ce80-45d2-ae4c-73f508f8884a",
            "root": false,
            "$title": "Espelho de ponto",
            "$position": {
                "top": "861px",
                "left": "1618px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "92bf7f07-4223-4391-899e-7cf5c66d2f5e": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "fb397bcf-e46d-4ed5-ae70-d50274a7ee72",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "2c62a8ad-6102-4232-a90d-5ac66a36d618",
                    "typeOfStateId": "state",
                    "$connId": "con_378",
                    "$id": "7d8ba328-c381-4210-89a0-f39a88e3ab35",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "false"
                            ],
                            "variable": "idTarefa"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "4fb42fb3-c396-410a-8e3f-8812b2bce521",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoEspelhoPontoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(mesAnoBusca) {\n    const { mesBusca, anoBusca } = JSON.parse(mesAnoBusca);\n\n    let month = Number(mesBusca) +1; // regra de negÃ³cio deve adicionar um mes a busca\n    let year = Number(anoBusca);\n    \n    \n    if (month > 12) {\n        month = 1;\n        year += 1;\n    }\n\n    if (month === 0) {\n        month = 12;\n        year -= 1;\n    }\n\n    const output = {\n        \"Empresa\": \"{{colaboradorSelecionado@empresaId}}\",\n        \"Matricula\": \"{{colaboradorSelecionado@matricula}}\",\n        \"Periodo\": `${year}-${month}`,\n        \"CodigoRelatorio\": \"6\"\n    }\n\n    //    \"CodigoRelatorio\": \"6\" -> CartÃ£o de ponto\n    //    \"CodigoRelatorio\": \"1\" -> OcorrÃªncias de ponto\n    //    \"CodigoRelatorio\": \"5\" -> CompensaÃ§Ã£o de horas\n    try {\n        return output;\n    } catch (e) {\n        return output;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoEspelhoPontoNorber] \"+String(err);}}",
                        "inputVariables": [
                            "mesAnoBusca"
                        ],
                        "outputVariable": "corpoEspelhoPontoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT6-410a-8e3f-8812b2bce521",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoListarSaldoBancoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoListarSaldoBancoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "59450fb0-f1fa-4e2e-8a4a-7cb6f0cfc3ff",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Solicitar relatÃ³rio espelho de ponto Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "token": "{{responseAutenticacao@ObjetoDeRetorno}}"
                        },
                        "method": "POST",
                        "body": "{{corpoEspelhoPontoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/relatorio/solicitarIndividual",
                        "responseStatusVariable": "statusSolicitaEspelhoPontoRelatorio",
                        "responseBodyVariable": "responseSolicitaEspelhoPontoRelatorio"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSa-4e2e-8a4a-7cb6f0cfc3ff",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusSolicitaEspelhoPontoRelatorio"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "dbad756f-6807-4b53-8366-7d08ec47ff76",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'idTarefa'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\treturn JSON.parse(response).ObjetoDeRetorno[0] || false;\n\n\t} catch(e) {\n\t\treturn false;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'idTarefa'] \"+String(err);}}",
                        "inputVariables": [
                            "responseSolicitaEspelhoPontoRelatorio"
                        ],
                        "outputVariable": "idTarefa",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4b53-8366-7d08ec47ff76",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{idTarefa}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "idTarefa"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "6fe6b716-3316-49ba-8dbf-40f8212aa39e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' ID_TAREFA",
                    "settings": {
                        "variable": "errorType",
                        "value": "ID_TAREFA"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "false"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "idTarefa"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "92bf7f07-4223-4391-899e-7cf5c66d2f5e",
            "root": false,
            "$title": "[API] Tarefa de consulta espelho",
            "$position": {
                "top": "850px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "b8f3cc03-0733-4c21-99f0-a3d70fceabf3": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "71e6f2fa-59de-4e37-9e53-cab0dbf9f351",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "e6c74bbe-3d3a-499b-945d-02e911cc0993",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "e6c74bbe-3d3a-499b-945d-02e911cc0993",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "cad661dd-554b-43ee-8535-cc7075f48246",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "db289371-8b88-4722-88e3-c73a20cfbd7d",
                            "type": "text/plain",
                            "content": "SÃ³ um minutinho enquanto eu gero o espelho de ponto para vocÃª...âŒ›",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "db289371-8b88-4722-88e3-c73a20cfbd7d",
                                "type": "text/plain",
                                "content": "SÃ³ um minutinho enquanto eu gero o espelho de ponto para vocÃª...âŒ›"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4ace53bd-6386-4831-9824-47e206427abb",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "92bf7f07-4223-4391-899e-7cf5c66d2f5e",
                    "typeOfStateId": "state",
                    "$connId": "con_383",
                    "$id": "948f665c-a40b-4357-889b-2ce2ca482486",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "044efdad-b36b-4447-80fb-d6cbf0aa79b7",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoAutenticacaoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = {\n    \"Senha\": \"{{config.passwordNorber}}\",\n    \"Usuario\": \"{{config.usernameNorber}}\" \n  }\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoAutenticacaoNorber] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoAutenticacaoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-4447-80fb-d6cbf0aa79b7",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d4735430-aaf3-418a-9003-8f7d8f11846c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "67a9ca7f-28f3-4f8c-a2b6-04bd2a8b5c90",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "AutenticaÃ§Ã£o Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {},
                        "method": "POST",
                        "body": "{{corpoAutenticacaoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/autenticacao/autenticar",
                        "responseStatusVariable": "statusAutenticacao",
                        "responseBodyVariable": "responseAutenticacao"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS3-4f8c-a2b6-04bd2a8b5c90",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "85cc5f23-23b3-439a-9ece-890e2b0625fd",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "b8f3cc03-0733-4c21-99f0-a3d70fceabf3",
            "root": false,
            "$title": "InÃ­cio busca espelho",
            "$position": {
                "top": "850px",
                "left": "1890px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2c62a8ad-6102-4232-a90d-5ac66a36d618": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "fb397bcf-e46d-4ed5-ae70-d50274a7ee72",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "a37c375b-a5e1-478a-a5dc-b4c82cd06a11",
                    "typeOfStateId": "state",
                    "$connId": "con_388",
                    "$id": "daca5a5a-66b1-4e74-b55f-f3e581d4f9ca",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "startsWith",
                            "values": [
                                "https://"
                            ],
                            "variable": "linkDocumento"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "2c62a8ad-6102-4232-a90d-5ac66a36d618",
                    "typeOfStateId": "state",
                    "$connId": "con_393",
                    "$id": "99e1cbee-8e6e-4a02-812e-b5883138caa0",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Relatorio Processando",
                                "Relatorio Aguardando"
                            ],
                            "variable": "linkDocumento"
                        },
                        {
                            "values": [
                                "Relatorio Erro"
                            ],
                            "source": "context",
                            "variable": "linkDocumento",
                            "comparison": "notEquals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "a8033583-ca10-450e-bf64-16c9451435d7",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'sleep'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "async function run() {\n    try {\n      const TIME_MS = 3000;\n      time.sleep(TIME_MS);\n      return {\n        stateName: '{{state.name}}',\n        stateId: '{{state.id}}',\n        time_sleep: TIME_MS,\n      }\n    } catch (error) {\n        return error.message;\n    }\n}",
                        "inputVariables": [],
                        "outputVariable": "sleep",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "64cee3f0-7382-41af-aed1-c08b3531c459",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Buscar relatÃ³rio espelho de ponto Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "token": "{{responseAutenticacao@ObjetoDeRetorno}}"
                        },
                        "method": "POST",
                        "body": "{}",
                        "uri": "{{config.NorberBaseUrl}}/api/relatorio/consultar?idTarefa={{idTarefa}}",
                        "responseStatusVariable": "statusBuscaEspelhoPontoRelatorio",
                        "responseBodyVariable": "responseBuscaEspelhoPontoRelatorio"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS2-41af-aed1-c08b3531c459",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaEspelhoPontoRelatorio"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "0683f8e1-9b34-45e4-87ab-8b774b02481f",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'linkDocumento'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\treturn JSON.parse(response).ObjetoDeRetorno[0] || false;\n\t} catch(e) {\n\t\treturn false;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'linkDocumento'] \"+String(err);}}",
                        "inputVariables": [
                            "responseBuscaEspelhoPontoRelatorio"
                        ],
                        "outputVariable": "linkDocumento",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT4-45e4-87ab-8b774b02481f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{linkDocumento}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "linkDocumento"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "072a2041-de9e-44d6-aea2-8094b7566ff8",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' LINK_ESPELHO",
                    "settings": {
                        "variable": "errorType",
                        "value": "LINK_ESPELHO"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "Relatorio Erro"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "linkDocumento"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "2c62a8ad-6102-4232-a90d-5ac66a36d618",
            "root": false,
            "$title": "[API] GeraÃ§Ã£o link espelho",
            "$position": {
                "top": "850px",
                "left": "2430px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3ef0404e-263f-49e6-bb06-752957356f2e": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1849851a-f9e5-41db-9215-617e6c82e6c0",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "7610e3a9-687e-4811-932f-7ebf008c61e2",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3ef0404e-263f-49e6-bb06-752957356f2e",
            "root": false,
            "$title": "[GO TO][Principal] Menu ponto",
            "$position": {
                "top": "1654.44px",
                "left": "346.667px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "fa621865-73f0-49ef-8d12-aeea13d6ad98": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "50c62196-8b48-4c48-9a19-8430add85652",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "ec086936-5c57-40b9-9c21-48d0e7fe1f57",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "ec086936-5c57-40b9-9c21-48d0e7fe1f57",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "4bd87c2f-24ca-4e7b-8dd6-f83870705e79",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b62378a6-7c2c-47c3-aa2d-ff706f899524",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b62378a6-7c2c-47c3-aa2d-ff706f899524",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2f4cff9f-e746-42f5-885f-087a93742da3",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f925be41-9ccb-4223-b048-959f68d72abe",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "message",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(response) {\n  try {\n    const now = new Date();\n    mesAtual = Number(now.getMonth()) + 1;\n    anoAtual = now.getFullYear();\n\n    response = JSON.parse(response);\n\n    // const [horas, minutos] = response.ListaDeFiltro[0].SaldoBanco.split(\":\");\n    const { SaldoBanco } = response.ListaDeFiltro[0];\n\n    return `O saldo acumulado de banco de horas referente a ${String(mesAtual).padStart(2,'0')}/${anoAtual} Ã© de ${SaldoBanco}.`;\n  } catch (e) {\n    return \"NÃ£o consegui encontrar as informaÃ§Ãµes do saldo do banco de horas, peÃ§o que tente novamente mais tarde.\";\n  }\n}\n",
                        "inputVariables": [
                            "responseListarSaldoBancoHoras"
                        ],
                        "outputVariable": "message"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "fa621865-73f0-49ef-8d12-aeea13d6ad98",
            "root": false,
            "$title": "Saldo banco de horas",
            "$position": {
                "top": "1300px",
                "left": "1890px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f8b1e371-5b4d-422b-a81e-2cc252a033e9": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "47e2f2fe-86f6-46fb-a312-52bba525b6fb",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "ec969488-300f-42cf-9140-3b3de13317fc",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' GO_BACK",
                    "settings": {
                        "variable": "errorType",
                        "value": "GO_BACK"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f8b1e371-5b4d-422b-a81e-2cc252a033e9",
            "root": false,
            "$title": "GO BACK",
            "$position": {
                "top": "2621px",
                "left": "986px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c249de73-192a-4e74-8fd6-426d26e8aba6": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{confirmaMarcacaoBuild@type}}",
                            "rawContent": "{{confirmaMarcacaoBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "ae4abe6b-0106-4e94-8c04-3e3274c87829",
                    "typeOfStateId": "state",
                    "$connId": "con_398",
                    "$id": "bcce653c-ba86-46fe-be83-5e265562da23",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "confirmaMarcacao:sim"
                            ],
                            "variable": "confirmaMarcacaoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "7610e3a9-687e-4811-932f-7ebf008c61e2",
                    "typeOfStateId": "state",
                    "$connId": "con_403",
                    "$id": "e9030cdb-78cc-458a-994d-9cfcb511d9c1",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "confirmaMarcacao:nao"
                            ],
                            "variable": "confirmaMarcacaoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "75be05a0-b142-4263-8108-6ac2d3f9d09e"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "10e19d11-2fb6-41fc-b1aa-f95e305d500e",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'dateTimeToClockin'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\treturn new Date();\n\t} catch (error) {\n\t\treturn false;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'dateTimeToClockin'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "dateTimeToClockin",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT6-41fc-b1aa-f95e305d500e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{dateTimeToClockin}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "dateTimeToClockin"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'confirmaMarcacaoOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"confirmaMarcacao:sim\",\n\t\t\t\t\ttitle: \"Sim, marcar ponto\",\n\t\t\t\t\ttitleShort: \"Sim, marcar ponto\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"confirmaMarcacao:nao\",\n\t\t\t\t\ttitle: \"NÃ£o, voltar\",\n\t\t\t\t\ttitleShort: \"NÃ£o, voltar\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmaMarcacaoOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "confirmaMarcacaoOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmaMarcacaoOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmaMarcacaoOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'confirmaMarcacaoBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const now = new Date();\n    const hour = String(now.getHours() ).padStart(2,'0');\n    const minutes = String(now.getMinutes()).padStart(2,'0');\n\n    const textHeader = \"\";\n    const textBody = `VocÃª quer seguir com a marcaÃ§Ã£o do seu ponto para Ã s ${hour}:${minutes}?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmaMarcacaoBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "confirmaMarcacaoOptions"
                        ],
                        "outputVariable": "confirmaMarcacaoBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmaMarcacaoBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmaMarcacaoBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"confirmaMarcacaoEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'confirmaMarcacaoEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "confirmaMarcacaoOptions"
                        ],
                        "outputVariable": "confirmaMarcacaoEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{confirmaMarcacaoEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "confirmaMarcacaoEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{confirmaMarcacaoEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "confirmaMarcacaoEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "confirmaMarcacaoEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "confirmaMarcacaoEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "confirmaMarcacaoEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c249de73-192a-4e74-8fd6-426d26e8aba6",
            "root": false,
            "$title": "Confirmar marcaÃ§Ã£o ponto",
            "$position": {
                "top": "1049px",
                "left": "1620px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ae4abe6b-0106-4e94-8c04-3e3274c87829": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d9477be8-f1d8-41ba-b121-53d981eff781",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "c6bdcbd8-a986-4d91-a5b1-433cded420d9",
                    "typeOfStateId": "state",
                    "$connId": "con_408",
                    "$id": "5672b67d-5515-41da-b06c-77f026b6248d",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "responseMarcarPonto@Sucesso"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "a13ef7be-c359-48c4-bd9b-e9be75556d92",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoAutenticacaoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = {\n    \"Senha\": \"{{config.passwordNorber}}\",\n    \"Usuario\": \"{{config.usernameNorber}}\" \n  }\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoAutenticacaoNorber] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoAutenticacaoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-48c4-bd9b-e9be75556d92",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "5e1cdadb-4372-43c5-bf1c-7eeb56d50514",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoAutenticacaoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoAutenticacaoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "9ee53d38-ff97-4eed-a3be-9c465f8965c8",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "AutenticaÃ§Ã£o Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {},
                        "method": "POST",
                        "body": "{{corpoAutenticacaoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/autenticacao/autenticar",
                        "responseStatusVariable": "statusAutenticacao",
                        "responseBodyVariable": "responseAutenticacao"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS7-4eed-a3be-9c465f8965c8",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "d5fcaf24-e81d-495f-a0c7-41e7a1e72832",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusAutenticacao"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "edcbd1b8-bf2c-44f2-9f10-57cb5e803297",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoMarcarPontoNorber",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dateTimeToClockin) {\n\n\tconst date = new Date(JSON.parse(dateTimeToClockin));\n\tdate.setHours(date.getHours() - 3)\n\n\tconst output = {\n        \"Empresa\": \"{{colaboradorSelecionado@empresaId}}\",\n        \"Matricula\": \"{{colaboradorSelecionado@matricula}}\",\n\t\t\"Marcacoes\": [date.toISOString()],\n    }\n\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoMarcarPontoNorber] \"+String(err);}}",
                        "inputVariables": [
                            "dateTimeToClockin"
                        ],
                        "outputVariable": "corpoMarcarPontoNorber",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTc-44f2-9f10-57cb5e803297",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoMarcarPontoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoMarcarPontoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "81093cf7-4cf9-4938-a8b1-7f7031547299",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoMarcarPontoNorber}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoMarcarPontoNorber"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e2c1916e-34be-4a98-ab90-9205ebebd185",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Marcar ponto Norber",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "token": "{{responseAutenticacao@ObjetoDeRetorno}}"
                        },
                        "method": "POST",
                        "body": "{{corpoMarcarPontoNorber}}",
                        "uri": "{{config.NorberBaseUrl}}/api/marcacoes/MarcacoesExterna",
                        "responseStatusVariable": "statusMarcarPonto",
                        "responseBodyVariable": "responseMarcarPonto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSe-4a98-ab90-9205ebebd185",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusMarcarPonto"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "18516cf2-91de-46f4-a0a1-6afd111e6ba0",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusMarcarPonto"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "6369a2a4-6e99-4392-8c13-f111dd38766e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' MARCAR_PONTO",
                    "settings": {
                        "variable": "errorType",
                        "value": "MARCAR_PONTO"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "true"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "responseMarcarPonto@Sucesso"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "7610e3a9-687e-4811-932f-7ebf008c61e2",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                }
            ],
            "id": "ae4abe6b-0106-4e94-8c04-3e3274c87829",
            "root": false,
            "$title": "[API] Marcar ponto",
            "$position": {
                "top": "1062px",
                "left": "1892px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9a7ca912-c026-492f-8214-1636ee8dce29": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c8587038-fca2-4244-a5b9-58414aed7d41",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "f3dcc9dc-1884-466d-856f-debd6f40b9fb",
                    "typeOfStateId": "state",
                    "$connId": "con_413",
                    "$id": "a14885f4-b10c-42b3-810f-8f1b40ddee92",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "[DWNT] Erro padrÃ£o"
                            ],
                            "variable": "state.previous.name"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "f072b17a-6c88-45b4-ba26-54b81e212f4c",
                    "typeOfStateId": "state",
                    "$connId": "con_418",
                    "$id": "f06b9751-b6c2-44e8-b7f3-d041349c357e",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9a7ca912-c026-492f-8214-1636ee8dce29",
            "root": false,
            "$title": "[Valida] Encerramento",
            "$position": {
                "top": "3200px",
                "left": "1530px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f072b17a-6c88-45b4-ba26-54b81e212f4c": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{avaliacaoCsatBuild@type}}",
                            "rawContent": "{{avaliacaoCsatBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_423",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "1",
                                "2"
                            ],
                            "variable": "avaliacaoCsatEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "b8ebd9c8-a56a-4b1e-b858-5e50131143c5"
                },
                {
                    "stateId": "7235f372-8973-4f8d-8dcc-903e4f86d1eb",
                    "typeOfStateId": "state",
                    "$connId": "con_428",
                    "$id": "5fecd4a1-14f7-424b-a537-419bd3524b83",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "3"
                            ],
                            "variable": "avaliacaoCsatEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "3b99a6d3-ba59-4b9a-905c-322551b0a2b3",
                    "typeOfStateId": "state",
                    "$connId": "con_433",
                    "$id": "f160be2a-80b6-42a3-ad71-7c24a039f390",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "4",
                                "5"
                            ],
                            "variable": "avaliacaoCsatEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "3f94084d-4902-44c9-8643-56af7fef5ab8"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'avaliacaoCsatOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"1\",\n\t\t\t\t\t\"title\": \"â­\",\n\t\t\t\t\t\"titleShort\": \"â­\",\n\t\t\t\t\t\"description\": \"\",\n\t\t\t\t\t\"active\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"2\",\n\t\t\t\t\t\"title\": \"â­â­\",\n\t\t\t\t\t\"titleShort\": \"â­â­\",\n\t\t\t\t\t\"description\": \"\",\n\t\t\t\t\t\"active\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"3\",\n\t\t\t\t\t\"title\": \"â­â­â­\",\n\t\t\t\t\t\"titleShort\": \"â­â­â­\",\n\t\t\t\t\t\"description\": \"\",\n\t\t\t\t\t\"active\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"4\",\n\t\t\t\t\t\"title\": \"â­â­â­â­\",\n\t\t\t\t\t\"titleShort\": \"â­â­â­â­\",\n\t\t\t\t\t\"description\": \"\",\n\t\t\t\t\t\"active\": true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t\"id\": \"5\",\n\t\t\t\t\t\"title\": \"â­â­â­â­â­\",\n\t\t\t\t\t\"titleShort\": \"â­â­â­â­â­\",\n\t\t\t\t\t\"description\": \"\",\n\t\t\t\t\t\"active\": true\n\t\t\t\t},\n\t\t\t\t// {\n\t\t\t\t// \t\"id\": \"4\",\n\t\t\t\t// \t\"title\": \"â­â­â­â­\",\n\t\t\t\t// \t\"titleShort\": \"â­â­â­â­\",\n\t\t\t\t// \t\"description\": \"\",\n\t\t\t\t// \t\"active\": true\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \t\"id\": \"3\",\n\t\t\t\t// \t\"title\": \"â­â­â­\",\n\t\t\t\t// \t\"titleShort\": \"â­â­â­\",\n\t\t\t\t// \t\"description\": \"\",\n\t\t\t\t// \t\"active\": true\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \t\"id\": \"2\",\n\t\t\t\t// \t\"title\": \"â­â­\",\n\t\t\t\t// \t\"titleShort\": \"â­â­\",\n\t\t\t\t// \t\"description\": \"\",\n\t\t\t\t// \t\"active\": true\n\t\t\t\t// },\n\t\t\t\t// {\n\t\t\t\t// \t\"id\": \"1\",\n\t\t\t\t// \t\"title\": \"â­\",\n\t\t\t\t// \t\"titleShort\": \"â­\",\n\t\t\t\t// \t\"description\": \"\",\n\t\t\t\t// \t\"active\": true\n\t\t\t\t// }\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'avaliacaoCsatOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "avaliacaoCsatOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{avaliacaoCsatOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "avaliacaoCsatOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'avaliacaoCsatBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Adoro feedbacks, e o seu serÃ¡ muito Ãºtil para meu aprendizado e para entender onde posso melhorar.\n\nEm uma escala de 1 a 5 estrelas, como vocÃª avalia sua experiÃªncia comigo?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'avaliacaoCsatBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "avaliacaoCsatOptions"
                        ],
                        "outputVariable": "avaliacaoCsatBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{avaliacaoCsatBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "avaliacaoCsatBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"avaliacaoCsatEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9â­ï¸]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'avaliacaoCsatEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "avaliacaoCsatOptions"
                        ],
                        "outputVariable": "avaliacaoCsatEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{avaliacaoCsatEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "avaliacaoCsatEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{avaliacaoCsatEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "avaliacaoCsatEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "avaliacaoCsatEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "avaliacaoCsatEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "avaliacaoCsatEscolha"
                        }
                    ]
                },
                {
                    "$id": "96e2869f-6a88-4a5b-81cf-01a367618a9d",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "TESTE 'inputMessage'",
                    "$invalid": false,
                    "settings": {
                        "variable": "inputMessage",
                        "value": "{{input.message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f072b17a-6c88-45b4-ba26-54b81e212f4c",
            "root": false,
            "$title": "AvaliaÃ§Ã£o CSAT",
            "$position": {
                "top": "3350px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "b8ebd9c8-a56a-4b1e-b858-5e50131143c5": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "9889d00d-1a2a-48e7-846d-a53878325dd9",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "23deda79-fa18-45a6-acc7-872974c30a4d",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "23deda79-fa18-45a6-acc7-872974c30a4d",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "fdedca6c-c62f-45d8-934b-c4a35c1450b3",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "f8db4c06-cb4a-4307-9d59-a8e7c11fc602",
                            "type": "text/plain",
                            "content": "Sinto muito, com certeza essa nÃ£o Ã© a experiÃªncia que gostaria que vocÃª tivesse por aqui. Me conta mais sobre o que rolou. Quero melhorar!",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "f8db4c06-cb4a-4307-9d59-a8e7c11fc602",
                                "type": "text/plain",
                                "content": "Sinto muito, com certeza essa nÃ£o Ã© a experiÃªncia que gostaria que vocÃª tivesse por aqui. Me conta mais sobre o que rolou. Quero melhorar!"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "ed84dcc4-80d4-4cb1-a617-f587081a8456",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "012b84ad-245f-4863-abc5-2e836d7cae98",
                    "typeOfStateId": "state",
                    "$connId": "con_438",
                    "$id": "d87615b0-952c-4f10-b1bb-c67df298f697",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "b8ebd9c8-a56a-4b1e-b858-5e50131143c5",
            "root": false,
            "$title": "Detrator",
            "$position": {
                "top": "3550px",
                "left": "2070px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "7235f372-8973-4f8d-8dcc-903e4f86d1eb": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "dacfb85f-5bed-4663-b3c1-0478222f60fe",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "9fec2640-3317-4914-b335-efd5d62bde16",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "9fec2640-3317-4914-b335-efd5d62bde16",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "d4bf1d07-1072-4a1c-bdf2-d306d1eea657",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "876d72d8-8fcf-44d9-a00e-7a6722d89ae8",
                            "type": "text/plain",
                            "content": "Poxa, gostaria que vocÃª tivesse uma experiÃªncia melhor. Me conta aqui o que posso melhorar para te ajudar. ðŸ˜Š",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "876d72d8-8fcf-44d9-a00e-7a6722d89ae8",
                                "type": "text/plain",
                                "content": "Poxa, gostaria que vocÃª tivesse uma experiÃªncia melhor. Me conta aqui o que posso melhorar para te ajudar. ðŸ˜Š"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "540b2c5c-3d16-4632-be5a-295ff4b2670e",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "012b84ad-245f-4863-abc5-2e836d7cae98",
                    "typeOfStateId": "state",
                    "$connId": "con_443",
                    "$id": "3ce268f8-b30d-4de7-8d3e-52745bec4af4",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "7235f372-8973-4f8d-8dcc-903e4f86d1eb",
            "root": false,
            "$title": "Neutro",
            "$position": {
                "top": "3400px",
                "left": "2070px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3b99a6d3-ba59-4b9a-905c-322551b0a2b3": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "db6bf75c-ed42-4a73-9faf-550ecd8cbee0",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "9c583a0d-ea2a-416b-8132-19ea12350c3c",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "9c583a0d-ea2a-416b-8132-19ea12350c3c",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "44ba8ce6-1143-4919-903e-a2eedbd0e89f",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "05f0f98a-1f8b-4404-8461-368f2451a479",
                            "type": "text/plain",
                            "content": "Eba, fico feliz em ter te ajudado. Me conta aqui no que mandei bem. Vou adorar saber! ðŸ˜Š",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "05f0f98a-1f8b-4404-8461-368f2451a479",
                                "type": "text/plain",
                                "content": "Eba, fico feliz em ter te ajudado. Me conta aqui no que mandei bem. Vou adorar saber! ðŸ˜Š"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "e059301e-b892-4706-aa1c-00fb7ae5d496",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "012b84ad-245f-4863-abc5-2e836d7cae98",
                    "typeOfStateId": "state",
                    "$connId": "con_448",
                    "$id": "c81d2d3e-bd69-4ea5-8178-0e38e0f66cbe",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3b99a6d3-ba59-4b9a-905c-322551b0a2b3",
            "root": false,
            "$title": "Promotor",
            "$position": {
                "top": "3250px",
                "left": "2070px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "012b84ad-245f-4863-abc5-2e836d7cae98": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "18f3e337-b5ac-4fac-b85d-b485b0ca70f4",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "9932d082-f698-4ff8-b301-fba44ff67d10",
                    "typeOfStateId": "state",
                    "$connId": "con_453",
                    "$id": "a5ce0d33-0354-4249-b3a8-e924b5db5c21",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "63c41efb-1990-4726-8adf-320277635b67"
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "d769f913-8dc7-4420-ae3d-ae834b7c199d",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Registro de comentÃ¡rios",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "ComentarioAvaliacao",
                        "action": "{{calendar.datetime}} | {{contact.email}} | {{avaliacaoCsatEscolha@title}} |{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "012b84ad-245f-4863-abc5-2e836d7cae98",
            "root": false,
            "$title": "Coleta comentÃ¡rio CSAT",
            "$position": {
                "top": "3350px",
                "left": "2340px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9932d082-f698-4ff8-b301-fba44ff67d10": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "7cb1468b-9a99-4392-b1c4-1fe333014f9b",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "83f197c7-5983-4359-847c-e41678405a09",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "83f197c7-5983-4359-847c-e41678405a09",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "8701d9ed-a3ee-4bb6-a5d0-690ac4bb597e",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "2973f86e-6069-4908-b971-c354f5ff94c1",
                            "type": "text/plain",
                            "content": "Obrigada pelo seu feedback!",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "2973f86e-6069-4908-b971-c354f5ff94c1",
                                "type": "text/plain",
                                "content": "Obrigada pelo seu feedback!"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "5f354213-9a38-4563-b9ec-3dc0da0967dc",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "c4f42319-71c0-42f2-8865-464f7a9932ac",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "c4f42319-71c0-42f2-8865-464f7a9932ac",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "88f6fd3b-ce57-4fff-a34b-e021f0e208fe",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "d76c1d05-8444-425f-a392-551559fff428",
                            "type": "text/plain",
                            "content": "Valeu pela conversa e atÃ© a prÃ³xima ðŸŒž",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "d76c1d05-8444-425f-a392-551559fff428",
                                "type": "text/plain",
                                "content": "Valeu pela conversa e atÃ© a prÃ³xima ðŸŒž"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "b7becaa1-9702-4fd5-9b74-80ae506a6d5e",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c2f4d68c-3323-4d71-b9ae-dae527786da9",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9932d082-f698-4ff8-b301-fba44ff67d10",
            "root": false,
            "$title": "Encerra avaliaÃ§Ã£o",
            "$position": {
                "top": "3362px",
                "left": "2606px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2f9035ce-4a81-4f1c-bb45-aec2117a96f8": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "b1f57952-f4b5-4de2-9ea2-1d616e438356",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "a5cae2ba-4d5d-42f3-b4cc-2c1f66358e86",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "a5cae2ba-4d5d-42f3-b4cc-2c1f66358e86",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "b3f76093-fd34-4556-8a1e-9675c3eb2c91",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "996b1271-dbbd-4b15-a804-f2e7fb1396a8",
                            "type": "text/plain",
                            "content": "NÃ£o estou conseguindo entender, mas vou transferir vocÃª para a equipe de atendimento para que vocÃª possa receber ajuda. ðŸ˜‰ ",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "996b1271-dbbd-4b15-a804-f2e7fb1396a8",
                                "type": "text/plain",
                                "content": "NÃ£o estou conseguindo entender, mas vou transferir vocÃª para a equipe de atendimento para que vocÃª possa receber ajuda. ðŸ˜‰ "
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "cf2d5520-0027-46ec-bd30-f87c8b213eae",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
                    "typeOfStateId": "state",
                    "$connId": "con_458",
                    "$id": "5a1c0679-30d8-4258-9bc4-91bec3d691c9",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "2f9035ce-4a81-4f1c-bb45-aec2117a96f8",
            "root": false,
            "$title": "Erro persistente 2x",
            "$position": {
                "top": "100px",
                "left": "3600px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "81e8919b-9bde-4a27-8652-fa2005132dd0": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{erroPersistenteBuild@type}}",
                            "rawContent": "{{erroPersistenteBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "994608ff-36ad-4e58-bc97-effb470eaad1"
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_463",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "erroPersistente:sim"
                            ],
                            "variable": "erroPersistenteEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95"
                },
                {
                    "stateId": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
                    "typeOfStateId": "state",
                    "$connId": "con_468",
                    "$id": "38ee89a9-965f-47e6-bf72-40dfc4450653",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "erroPersistente:nao"
                            ],
                            "variable": "erroPersistenteEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'erroPersistenteOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"erroPersistente:sim\",\n\t\t\t\t\ttitle: \"Sim, falar com atendente\",\n\t\t\t\t\ttitleShort: \"Sim\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"erroPersistente:nao\",\n\t\t\t\t\ttitle: \"Voltar ao menu principal\",\n\t\t\t\t\ttitleShort: \"Voltar ao menu principal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'erroPersistenteOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "erroPersistenteOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{erroPersistenteOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "erroPersistenteOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'erroPersistenteBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Ainda nÃ£o consigo te ajudar com este assunto, mas conheÃ§o alguÃ©m que pode. VocÃª gostaria de falar com um atendente para esclarecer sua dÃºvida?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'erroPersistenteBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "erroPersistenteOptions"
                        ],
                        "outputVariable": "erroPersistenteBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{erroPersistenteBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "erroPersistenteBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"erroPersistenteEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'erroPersistenteEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "erroPersistenteOptions"
                        ],
                        "outputVariable": "erroPersistenteEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{erroPersistenteEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "erroPersistenteEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{erroPersistenteEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "erroPersistenteEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "erroPersistenteEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "erroPersistenteEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "erroPersistenteEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "2f9035ce-4a81-4f1c-bb45-aec2117a96f8",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "81e8919b-9bde-4a27-8652-fa2005132dd0",
            "root": false,
            "$title": "[Menu] Erro comum",
            "$position": {
                "top": "241px",
                "left": "3601px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "122e0c83-96a3-453a-98b0-4999c487eaf3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2cc1bd89-f57b-491b-8a8f-5f6c2e34c507",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "122e0c83-96a3-453a-98b0-4999c487eaf3",
            "root": false,
            "$title": "[GO TO][Erro persistente] Algo mais",
            "$position": {
                "top": "726px",
                "left": "4199px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "1e092268-d9b5-4a45-930f-6abe3c80e787": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuSugestaoBuild@type}}",
                            "rawContent": "{{menuSugestaoBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_473",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuSugestao:report_erro"
                            ],
                            "variable": "menuSugestaoEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "6cf34963-1712-4de4-bd2a-a264d99bf142"
                },
                {
                    "stateId": "88697dd9-b21f-4de8-9f00-4f6830a6bc2d",
                    "typeOfStateId": "state",
                    "$connId": "con_478",
                    "$id": "cda8d383-b8c3-46cd-bdd1-6e9b6f2b1025",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuSugestao:novo_tema"
                            ],
                            "variable": "menuSugestaoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "40e0dbe6-042f-45f8-b78c-0f099ec1011b",
                    "typeOfStateId": "state",
                    "$connId": "con_483",
                    "$id": "bac7a01b-790e-4779-850a-9e64d286f966",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuSugestao:menu_principal"
                            ],
                            "variable": "menuSugestaoEscolha@id"
                        },
                        {
                            "values": [
                                "true"
                            ],
                            "source": "context",
                            "variable": "isManager",
                            "comparison": "equals"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "6edb74e1-6e34-42f7-b5f4-e0250cdfcbde",
                    "typeOfStateId": "state",
                    "$connId": "con_488",
                    "$id": "7584d6cd-566b-4f11-92a1-83143924e3e5",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuSugestao:menu_principal"
                            ],
                            "variable": "menuSugestaoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "bbd32abb-c1e7-4e40-8cdd-022a903573af"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuSugestaoOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuSugestao:report_erro\",\n\t\t\t\t\ttitle: \"Report de erro\",\n\t\t\t\t\ttitleShort: \"Report de erro\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuSugestao:novo_tema\",\n\t\t\t\t\ttitle: \"Novo tema\",\n\t\t\t\t\ttitleShort: \"Novo tema\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuSugestao:menu_principal\",\n\t\t\t\t\ttitle: \"Menu principal\",\n\t\t\t\t\ttitleShort: \"Menu principal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuSugestaoOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "menuSugestaoOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuSugestaoOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuSugestaoOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuSugestaoBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Uma das caracterÃ­sticas de ser Neonwer Ã© a busca constante pelo desenvolvimento, que Ã© o princÃ­pio #1.\n\nSeu insight Ã© essencial para o meu crescimento. Poderia me dizer qual Ã© a natureza da sua sugestÃ£o?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuSugestaoBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuSugestaoOptions"
                        ],
                        "outputVariable": "menuSugestaoBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuSugestaoBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuSugestaoBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuSugestaoEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuSugestaoEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuSugestaoOptions"
                        ],
                        "outputVariable": "menuSugestaoEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuSugestaoEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuSugestaoEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuSugestaoEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuSugestaoEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuSugestaoEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuSugestaoEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuSugestaoEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "1e092268-d9b5-4a45-930f-6abe3c80e787",
            "root": false,
            "$title": "SugestÃ£o",
            "$position": {
                "top": "3850px",
                "left": "1530px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "6cf34963-1712-4de4-bd2a-a264d99bf142": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "abfba90b-76b7-45e6-80bd-700ad49d68f3",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "225ad992-ef00-4dc6-ab8c-e8d7ca0d1ccc",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "225ad992-ef00-4dc6-ab8c-e8d7ca0d1ccc",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "4aeba940-b5be-4e36-b5a7-5202ff3934fe",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "c8eeebe1-fc70-46e9-a502-81658c909276",
                            "type": "text/plain",
                            "content": "Por favor, descreva com detalhes o erro que vocÃª encontrou:",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "c8eeebe1-fc70-46e9-a502-81658c909276",
                                "type": "text/plain",
                                "content": "Por favor, descreva com detalhes o erro que vocÃª encontrou:"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "922b77f9-1977-41a6-aae1-c3ac2b475310",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "98b224e7-3230-4e44-bbd8-433d4703effb",
                    "typeOfStateId": "state",
                    "$connId": "con_493",
                    "$id": "6c306d00-4e79-4571-b3c7-24b56b8f4916",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "9ba7031c-2711-4f30-9b47-377722e4ef28"
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "21d77b03-a700-4ec1-8973-fb4ebbe26648",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Comentario Reporte Erro",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Comentario Reporte Erro",
                        "action": "{{calendar.datetime}} | {{contact.email}} | {{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "6cf34963-1712-4de4-bd2a-a264d99bf142",
            "root": false,
            "$title": "Report de erro",
            "$position": {
                "top": "3950px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "88697dd9-b21f-4de8-9f00-4f6830a6bc2d": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "0d021c42-e295-403a-a37d-796a7a8e450d",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "5855899d-61de-45aa-88bb-8e87d33c0490",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "5855899d-61de-45aa-88bb-8e87d33c0490",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "8ff06802-bb58-4e0d-b142-9cc8faee4aa0",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "e243c965-bb0b-4e1b-ab0e-d009a99694a7",
                            "type": "text/plain",
                            "content": "Maravilha! Por favor, compartilhe sua sugestÃ£o em detalhes:",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "e243c965-bb0b-4e1b-ab0e-d009a99694a7",
                                "type": "text/plain",
                                "content": "Maravilha! Por favor, compartilhe sua sugestÃ£o em detalhes:"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "850bf5aa-b384-4a94-a7cc-0a278b79f780",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "3d058116-b3a0-4221-855e-b9dc13755979",
                    "typeOfStateId": "state",
                    "$connId": "con_498",
                    "$id": "471c2e66-3c4f-4166-94aa-735d5a8f2751",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "aa5f6fdc-4644-4f03-a360-a3d6b0404a7f"
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "fa93d0f2-cd10-486b-a31b-44a641a5cbe3",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Registro de eventos",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Comentario Novo Tema",
                        "action": "{{calendar.datetime}} | {{contact.email}} | {{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "88697dd9-b21f-4de8-9f00-4f6830a6bc2d",
            "root": false,
            "$title": "Novo tema",
            "$position": {
                "top": "3799px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "40e0dbe6-042f-45f8-b78c-0f099ec1011b": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "762d0bed-d652-494a-9ca6-ae026ec4b6df",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c34d8e32-c8fe-4447-bb70-acce39c0a0c7",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "40e0dbe6-042f-45f8-b78c-0f099ec1011b",
            "root": false,
            "$title": "[GO TO][SugestÃ£o] Menu gestor",
            "$position": {
                "top": "3950px",
                "left": "1260px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "6edb74e1-6e34-42f7-b5f4-e0250cdfcbde": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "762d0bed-d652-494a-9ca6-ae026ec4b6df",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "6edb74e1-6e34-42f7-b5f4-e0250cdfcbde",
            "root": false,
            "$title": "[GO TO][SugestÃ£o] Menu principal",
            "$position": {
                "top": "3750px",
                "left": "1260px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9c2100ba-aedd-4bd5-8584-850c6455a20c": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{dadosFolhaBuild@type}}",
                            "rawContent": "{{dadosFolhaBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "13102dcc-d2a8-48d3-a308-5b62f1670021",
                    "typeOfStateId": "state",
                    "$connId": "con_503",
                    "$id": "e97e5192-a8ca-4705-8f91-3df6dcd0bd13",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dadosFolha:calendario"
                            ],
                            "variable": "dadosFolhaEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "869b00dd-81be-411d-ba3f-b36c154ae4af",
                    "typeOfStateId": "state",
                    "$connId": "con_508",
                    "$id": "2e4d19ed-27f1-4bd7-b581-674f4885a699",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dadosFolha:holerite"
                            ],
                            "variable": "dadosFolhaEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "ce15bef4-9050-4b40-a0ce-ad475e4efd01",
                    "typeOfStateId": "state",
                    "$connId": "con_513",
                    "$id": "c68b33bc-ac99-44e3-98c6-816e1202e40e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dadosFolha:voltar"
                            ],
                            "variable": "dadosFolhaEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "df008c4b-9886-4276-9e6e-3a5e4fdd0bc9",
                    "typeOfStateId": "state",
                    "$connId": "con_518",
                    "$id": "dc4c0e92-80a0-4cd1-8d4d-9c8aa0d1c3dc",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dadosFolha:informe_rendimento"
                            ],
                            "variable": "dadosFolhaEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "879e074f-dd13-4c83-b8b2-135cc4dd9a55"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'dadosFolhaOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(source) {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"dadosFolha:holerite\",\n\t\t\t\t\ttitle: \"Holerite\",\n\t\t\t\t\ttitleShort: \"Holerite\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"dadosFolha:calendario\",\n\t\t\t\t\ttitle: \"CalendÃ¡rio de pagamento\",\n\t\t\t\t\ttitleShort: \"CalendÃ¡rio de pagamento\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"dadosFolha:informe_rendimento\",\n\t\t\t\t\ttitle: \"Informe de rendimentos\",\n\t\t\t\t\ttitleShort: \"Informe de rendimentos\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: source === \"0mn.io\"//false\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"dadosFolha:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'dadosFolhaOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "contact.source"
                        ],
                        "outputVariable": "dadosFolhaOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{dadosFolhaOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "dadosFolhaOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'dadosFolhaBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `E aÃ­, o que vocÃª gostaria de saber?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'dadosFolhaBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "dadosFolhaOptions"
                        ],
                        "outputVariable": "dadosFolhaBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{dadosFolhaBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "dadosFolhaBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"dadosFolhaEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'dadosFolhaEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "dadosFolhaOptions"
                        ],
                        "outputVariable": "dadosFolhaEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{dadosFolhaEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "dadosFolhaEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{dadosFolhaEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "dadosFolhaEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dadosFolhaEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dadosFolhaEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "dadosFolhaEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9c2100ba-aedd-4bd5-8584-850c6455a20c",
            "root": false,
            "$title": "Dados de folha",
            "$position": {
                "top": "300px",
                "left": "1350px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "869b00dd-81be-411d-ba3f-b36c154ae4af": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{holeriteBuild@type}}",
                            "rawContent": "{{holeriteBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "3926058c-3f9d-4fbb-913f-92af6ea8496c",
                    "typeOfStateId": "state",
                    "$connId": "con_523",
                    "$id": "a75e81fb-a17d-4224-9f56-bd56ef3af35b",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "0"
                            ],
                            "variable": "holeriteEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "9c2100ba-aedd-4bd5-8584-850c6455a20c",
                    "typeOfStateId": "state",
                    "$connId": "con_528",
                    "$id": "83b00f88-7067-45b5-a2ce-45b3684a27e2",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "holerite:voltar"
                            ],
                            "variable": "holeriteEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "96e5e18c-0452-426e-890a-92b444358cf5",
                    "typeOfStateId": "state",
                    "$connId": "con_533",
                    "$id": "44ff4568-731c-4f52-b155-4efea1319e63",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "invÃ¡lido"
                            ],
                            "variable": "holeriteEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "15e6c7dd-919e-4fd8-99a4-96b92e935ae0"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'holeriteOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"1\",\n\t\t\t\t\ttitle: \"Mensal\",\n\t\t\t\t\ttitleShort: \"Mensal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"4\",\n\t\t\t\t\ttitle: \"13Âº salÃ¡rio\",\n\t\t\t\t\ttitleShort: \"13Âº salÃ¡rio\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"3\",\n\t\t\t\t\ttitle: \"Adiantamento 13Âº salÃ¡rio\",\n\t\t\t\t\ttitleShort: \"Adiantamento 13Âº salÃ¡rio\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"6\",\n\t\t\t\t\ttitle: \"Adiantamento quinzenal\",\n\t\t\t\t\ttitleShort: \"Adiantamento quinzenal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"15\",\n\t\t\t\t\ttitle: \"P4P\",\n\t\t\t\t\ttitleShort: \"P4P\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"holerite:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'holeriteOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "holeriteOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{holeriteOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "holeriteOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'holeriteBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Escolha a folha de pagamento que vocÃª gostaria de consultar:`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'holeriteBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "holeriteOptions"
                        ],
                        "outputVariable": "holeriteBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{holeriteBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "holeriteBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"holeriteEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'holeriteEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "holeriteOptions"
                        ],
                        "outputVariable": "holeriteEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{holeriteEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "holeriteEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{holeriteEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "holeriteEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "holeriteEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "holeriteEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "holeriteEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "869b00dd-81be-411d-ba3f-b36c154ae4af",
            "root": false,
            "$title": "Menu holerite",
            "$position": {
                "top": "451px",
                "left": "1700px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "47a1588e-8aa4-4aa1-a995-8b6e1e1c0601": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "56a37c9e-42f4-43d1-80b0-2caadf3376f3",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "7da99009-e2ae-4057-a6df-9404b88e8589",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "7da99009-e2ae-4057-a6df-9404b88e8589",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "8aa24f17-74c5-437b-8891-e813d8044a96",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "2563bdeb-bc7a-4f2a-8c4b-f8783d62c8a0",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "2563bdeb-bc7a-4f2a-8c4b-f8783d62c8a0",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "72f799fc-d90d-4276-99bb-67b88d8d00dd",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "93b78455-150b-489f-9896-4e534826e5d6",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response, mes) {\n\ttry {\n\t\tconst listPayments = JSON.parse(response);\n\n        const payment = listPayments.find(item => Number(item['a:Referencia'].split('-')[1]) == mes);\n        \n        \n\t\treturn `Este mÃªs, serÃ¡ feito o pagamento da primeira parcela do 13Âº salÃ¡rio. A data de pagamento estÃ¡ marcada para *${formatDate(payment['a:DataDoPagamento'])}*`;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\n\nfunction formatDate(stringDate) {\n    const [ano, mes, dia] = stringDate\n        .split('T')[0]\n        .split('-');\n        \n    return `${dia}/${mes}/${ano}`;\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonCalendario13"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-489f-9896-4e534826e5d6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "47a1588e-8aa4-4aa1-a995-8b6e1e1c0601",
            "root": false,
            "$title": "1Âª parcela pagamento 13Âº",
            "$position": {
                "top": "50px",
                "left": "2430px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "30ae53ca-d572-4ac0-ba40-89ffe8014b85": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "d54ff381-78cf-449e-bffb-c0a6bb330410",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "93074b95-f14d-4769-907d-e8c66f7a296f",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "93074b95-f14d-4769-907d-e8c66f7a296f",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "6a7eceb9-ea14-46ca-8168-541914586f0a",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "51955c5c-a994-45f8-a9d4-abb9df50c273",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "51955c5c-a994-45f8-a9d4-abb9df50c273",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "8995f89e-c365-4b03-af95-0d5d6e99fc35",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "94965012-9a01-4328-9191-79c37e8035f4",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(pagamento, adiantamento) {\n\ttry {\n\t\tconst parsedAdiantamento = JSON.parse(adiantamento);\n\t\tconst parsedPagamento = JSON.parse(pagamento);\n\n\t\tconst [firstSemester, secondSemester] = parsedAdiantamento\n\t\t\t.sort((a, b) => a['a:Referencia'].localeCompare(b['a:Referencia']))\n\t\t\t.map(item => item['a:DataDoPagamento']);\n\n\t\treturn `Neste mÃªs, serÃ¡ efetuado o pagamento da parcela final do 13Âº salÃ¡rio. Lembrando que a primeira parcela foi paga no dia:\n\n*Admitidos atÃ© 15/06: ${formatDate(firstSemester)}*\n*Admitidos entre 16/06 e 15/11: ${formatDate(secondSemester)}*\n\nA data para o pagamento da parcela final serÃ¡ *${formatDate(parsedPagamento['a:DataDoPagamento'])}*`;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\n\nfunction formatDate(stringDate) {\n    const [ano, mes, dia] = stringDate\n        .split('T')[0]\n        .split('-');\n        \n    return `${dia}/${mes}/${ano}`;\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonCalendario13",
                            "convertXmlToJsonCalendarioAdiantamento13"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT1-4328-9191-79c37e8035f4",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "0d4fdf17-a8cf-442d-94e2-df3d3534ead5",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "30ae53ca-d572-4ac0-ba40-89ffe8014b85",
            "root": false,
            "$title": "2Âª parcela pagamento 13Âº",
            "$position": {
                "top": "201px",
                "left": "2428px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "13102dcc-d2a8-48d3-a308-5b62f1670021": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "771e401a-4d51-4a5b-8c3f-ea92362a9ec0",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "9a06106f-774b-4b2e-8160-71fada5f797a",
                    "typeOfStateId": "state",
                    "$connId": "con_538",
                    "$id": "02cf38cd-1891-4c0c-83f1-c54981108d0f",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "1a99158b-9460-4b43-ae44-1c33490d55af",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoCalendarioPagamento",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(personType) {\n  const codigoFolhaPagamento = personType === 'EMPLOYEE' ? 1 : 10;\n\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarListaInformacoesDaDataDePagamento>\n      <v1:filtro>\n        <v11:Ano>{{calendar.year}}</v11:Ano>\n        <v11:Empresa>\n          <v11:Codigo>{{contact.extras.empresaId}}</v11:Codigo>\n        </v11:Empresa>\n        <v11:Folha>\n          <v11:Codigo>${codigoFolhaPagamento}</v11:Codigo>\n        </v11:Folha>\n        <v11:TipoConceito>2</v11:TipoConceito>\n      </v1:filtro>\n    </v1:ConsultarListaInformacoesDaDataDePagamento>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoCalendarioPagamento] \"+String(err);}}",
                        "inputVariables": [
                            "personType"
                        ],
                        "outputVariable": "corpoCalendarioPagamento",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT0-4b43-ae44-1c33490d55af",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoCalendarioPagamento}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoCalendarioPagamento"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "956e1108-578c-408a-8044-7482c0da6080",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Calendario pagamento mensal",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeDataDePagamento/ConsultarListaInformacoesDaDataDePagamento"
                        },
                        "method": "POST",
                        "body": "{{corpoCalendarioPagamento}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicodedatadepagamento",
                        "responseStatusVariable": "statusBuscaCalendarioPagamentoMensal",
                        "responseBodyVariable": "responseBuscaCalendarioPagamentoMensal"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSc-408a-8044-7482c0da6080",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaCalendarioPagamentoMensal"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "3ea187c0-92d2-4b75-bcc9-0cd2a7401b9a",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonCalendarioPagamentoMensal",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    try{\n        let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    \n    return obj['s:Envelope']['s:Body'].ConsultarListaInformacoesDaDataDePagamentoResponse.ConsultarListaInformacoesDaDataDePagamentoResult['a:Retorno']['a:DataDePagamento']\n    } catch(error){\n        return false\n    }\n}",
                        "inputVariables": [
                            "responseBuscaCalendarioPagamentoMensal"
                        ],
                        "outputVariable": "convertXmlToJsonCalendarioPagamentoMensal"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "3ffa16b0-66cf-44ec-97c1-251c95dd4cd2",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoCalendarioPagamento",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n  const codigoFolhaPagamento = 6;\n\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarListaInformacoesDaDataDePagamento>\n      <v1:filtro>\n        <v11:Ano>{{calendar.year}}</v11:Ano>\n        <v11:Empresa>\n          <v11:Codigo>{{contact.extras.empresaId}}</v11:Codigo>\n        </v11:Empresa>\n        <v11:Folha>\n          <v11:Codigo>${codigoFolhaPagamento}</v11:Codigo>\n        </v11:Folha>\n        <v11:TipoConceito>2</v11:TipoConceito>\n      </v1:filtro>\n    </v1:ConsultarListaInformacoesDaDataDePagamento>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoCalendarioPagamento] \"+String(err);}}",
                        "inputVariables": [
                            "personType"
                        ],
                        "outputVariable": "corpoCalendarioPagamento",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-44ec-97c1-251c95dd4cd2",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoCalendarioPagamento}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoCalendarioPagamento"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e97e47b8-01b5-4732-917a-50f4b8732fa9",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Calendario pagamento adiantamento",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeDataDePagamento/ConsultarListaInformacoesDaDataDePagamento"
                        },
                        "method": "POST",
                        "body": "{{corpoCalendarioPagamento}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicodedatadepagamento",
                        "responseStatusVariable": "statusBuscaCalendarioPagamentoAdiantamento",
                        "responseBodyVariable": "responseBuscaCalendarioPagamentoAdiantamento"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS5-4732-917a-50f4b8732fa9",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaCalendarioPagamentoAdiantamento"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "5f4c8dcf-7cf6-48e2-9a52-ea3f884a7cae",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonCalendarioPagamentoresponseBuscaCalendarioPagamentoAdiantamento",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    try{\n        let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    \n    return obj['s:Envelope']['s:Body'].ConsultarListaInformacoesDaDataDePagamentoResponse.ConsultarListaInformacoesDaDataDePagamentoResult['a:Retorno']['a:DataDePagamento']\n    } catch(error){\n        return false\n    }\n}",
                        "inputVariables": [
                            "responseBuscaCalendarioPagamentoAdiantamento"
                        ],
                        "outputVariable": "convertXmlToJsonCalendarioPagamentoAdiantamento"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "13102dcc-d2a8-48d3-a308-5b62f1670021",
            "root": false,
            "$title": "[API] Calendario de pagamento",
            "$position": {
                "top": "100px",
                "left": "1710px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "85612eaf-6b19-406c-89e6-5445798b1494": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "eb411391-34fe-4b45-8053-c36761b85ea6",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "47a1588e-8aa4-4aa1-a995-8b6e1e1c0601",
                    "typeOfStateId": "state",
                    "$connId": "con_543",
                    "$id": "10df7fed-d2f3-478b-a20d-8b6b70603512",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "6",
                                "11"
                            ],
                            "variable": "calendar.month"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "30ae53ca-d572-4ac0-ba40-89ffe8014b85",
                    "typeOfStateId": "state",
                    "$connId": "con_548",
                    "$id": "1aced160-6bf2-4e66-9c48-e5b48f8a8f45",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "12"
                            ],
                            "variable": "calendar.month"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "0662948e-cda0-437d-937c-20bf068fe936",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoCalendario13",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(personType) {\n  const codigoFolhaPagamento = 3;\n  \n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarListaInformacoesDaDataDePagamento>\n      <v1:filtro>\n        <v11:Ano>{{calendar.year}}</v11:Ano>\n        <v11:Empresa>\n          <v11:Codigo>{{contact.extras.empresaId}}</v11:Codigo>\n        </v11:Empresa>\n        <v11:Folha>\n          <v11:Codigo>${codigoFolhaPagamento}</v11:Codigo>\n        </v11:Folha>\n        <v11:TipoConceito>2</v11:TipoConceito>\n      </v1:filtro>\n    </v1:ConsultarListaInformacoesDaDataDePagamento>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoCalendario13] \"+String(err);}}",
                        "inputVariables": [
                            "personType"
                        ],
                        "outputVariable": "corpoCalendario13",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT0-437d-937c-20bf068fe936",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoCalendario13}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoCalendario13"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "df0a146c-65cc-4f05-8605-dec55bd6bda5",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Calendario pagamento mensal",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeDataDePagamento/ConsultarListaInformacoesDaDataDePagamento"
                        },
                        "method": "POST",
                        "body": "{{corpoCalendario13}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicodedatadepagamento",
                        "responseStatusVariable": "statusCalendarioAdiantamento13",
                        "responseBodyVariable": "responseCalendarioAdiantamento13"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSc-4f05-8605-dec55bd6bda5",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusCalendarioAdiantamento13"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "135982a5-4902-4ba6-96aa-f496fa29130f",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonCalendario13",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    try{\n        let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    \n    return obj['s:Envelope']['s:Body'].ConsultarListaInformacoesDaDataDePagamentoResponse.ConsultarListaInformacoesDaDataDePagamentoResult['a:Retorno']['a:DataDePagamento']\n    } catch(error){\n        return false\n    }\n}",
                        "inputVariables": [
                            "responseCalendario13"
                        ],
                        "outputVariable": "convertXmlToJsonCalendario13"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "e928ea42-2db8-4915-9bcb-032614d7804d",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoCalendarioAdiantamento13",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(personType) {\n  const codigoFolhaPagamento = 4;\n  \n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarListaInformacoesDaDataDePagamento>\n      <v1:filtro>\n        <v11:Ano>{{calendar.year}}</v11:Ano>\n        <v11:Empresa>\n          <v11:Codigo>{{contact.extras.empresaId}}</v11:Codigo>\n        </v11:Empresa>\n        <v11:Folha>\n          <v11:Codigo>${codigoFolhaPagamento}</v11:Codigo>\n        </v11:Folha>\n        <v11:TipoConceito>2</v11:TipoConceito>\n      </v1:filtro>\n    </v1:ConsultarListaInformacoesDaDataDePagamento>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoCalendarioAdiantamento13] \"+String(err);}}",
                        "inputVariables": [
                            "personType"
                        ],
                        "outputVariable": "corpoCalendarioAdiantamento13",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT8-4915-9bcb-032614d7804d",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoCalendarioAdiantamento13}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoCalendarioAdiantamento13"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "9d7de870-d11e-444b-a541-b670fa526a5c",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Calendario pagamento mensal",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeDataDePagamento/ConsultarListaInformacoesDaDataDePagamento"
                        },
                        "method": "POST",
                        "body": "{{corpoCalendarioAdiantamento13}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicodedatadepagamento",
                        "responseStatusVariable": "statusCalendario13",
                        "responseBodyVariable": "responseCalendario13"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSe-444b-a541-b670fa526a5c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusCalendario13"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "03a8d4ab-f18f-4906-aadf-bf0140e4dcf2",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonCalendarioAdiantamento13",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    try{\n        let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    \n    return obj['s:Envelope']['s:Body'].ConsultarListaInformacoesDaDataDePagamentoResponse.ConsultarListaInformacoesDaDataDePagamentoResult['a:Retorno']['a:DataDePagamento']\n    } catch(error){\n        return false\n    }\n}",
                        "inputVariables": [
                            "responseCalendarioAdiantamento13"
                        ],
                        "outputVariable": "convertXmlToJsonCalendarioAdiantamento13"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "85612eaf-6b19-406c-89e6-5445798b1494",
            "root": false,
            "$title": "[API] Calendario 13Âº salÃ¡rio",
            "$position": {
                "top": "100px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "322fc6e3-8d4a-4158-8c8d-fd6e21404fe1": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "46d1be54-49ca-4146-9ddb-6a175d2f299e",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c2100ba-aedd-4bd5-8584-850c6455a20c",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "322fc6e3-8d4a-4158-8c8d-fd6e21404fe1",
            "root": false,
            "$title": "[GO TO][Principal] Menu folha",
            "$position": {
                "top": "1798.89px",
                "left": "340px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "fdbc3d19-ea8c-4080-98c4-162540d77725",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "92ca42fd-508c-4725-b8c4-2344ff9aadc4",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Taxa Transbordo",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Taxa Transbordo",
                        "action": "Transbordo"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "a38127a7-c884-4a59-a30c-63370bb0e03a",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "context": {
                            "type": "text/plain",
                            "value": "from:{{application.identifier}}"
                        },
                        "address": "Ath"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
            "root": false,
            "$title": "[Redirect] ATH",
            "$position": {
                "top": "370px",
                "left": "3960px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "05a158bf-3a50-4a85-81ca-b3cf6c01ba96": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "06e37bbc-29a8-404c-80ab-0a0cb6937b38",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1e092268-d9b5-4a45-930f-6abe3c80e787",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "05a158bf-3a50-4a85-81ca-b3cf6c01ba96",
            "root": false,
            "$title": "[GO TO][Principal] SugestÃ£o",
            "$position": {
                "top": "1801px",
                "left": "544px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "98b224e7-3230-4e44-bbd8-433d4703effb": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "eeae45ac-247a-45fe-8536-447cf8fa94fa",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0077909e-1f02-409a-a679-1dcbe444be7e",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0077909e-1f02-409a-a679-1dcbe444be7e",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "b5992347-c03b-459f-a4d1-8be44e3b8deb",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8055ec2d-5f54-4768-920b-c3f611e29e1d",
                            "type": "text/plain",
                            "content": "Muito obrigada pela sua sugestÃ£o! ðŸ’™ Vou me empenhar para continuar evoluindo.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8055ec2d-5f54-4768-920b-c3f611e29e1d",
                                "type": "text/plain",
                                "content": "Muito obrigada pela sua sugestÃ£o! ðŸ’™ Vou me empenhar para continuar evoluindo."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "8f4db3ee-a3af-4b60-9ad8-784f11d04497",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "98b224e7-3230-4e44-bbd8-433d4703effb",
            "root": false,
            "$title": "Agradece report de erro",
            "$position": {
                "top": "3937px",
                "left": "2004px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3d058116-b3a0-4221-855e-b9dc13755979": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "94ccf4ca-3571-480d-9851-e83733ea0692",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8bcb392c-5634-4751-8b00-0c6378081e91",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8bcb392c-5634-4751-8b00-0c6378081e91",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1daa35d2-1e78-45f5-9475-8cdae7909107",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b8e750ac-f6e1-43f8-b645-611418fb6596",
                            "type": "text/plain",
                            "content": "Obrigada pela sugestÃ£o! ðŸ’™ Vou me esforÃ§ar para continuar crescendo.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b8e750ac-f6e1-43f8-b645-611418fb6596",
                                "type": "text/plain",
                                "content": "Obrigada pela sugestÃ£o! ðŸ’™ Vou me esforÃ§ar para continuar crescendo."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "dad2673a-fc5f-4571-871b-c54cfdbf0324",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3d058116-b3a0-4221-855e-b9dc13755979",
            "root": false,
            "$title": "Agradece novo tema",
            "$position": {
                "top": "3789px",
                "left": "2003px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "7f7bfb69-b6f2-4b82-9b71-ad01a212740a": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "da3ba106-aa1a-4d0f-9ef5-4289c7773fba",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "00a7cb9d-e888-4404-b928-ba7ee1d9ad29",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "00a7cb9d-e888-4404-b928-ba7ee1d9ad29",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "be319fb6-3ed8-4b69-8816-d36fe53d01bd",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0e7288c5-2f4c-4d7a-9db0-4813ebf35ed3",
                            "type": "text/plain",
                            "content": "Tudo bem! Vamos continuar aqui.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0e7288c5-2f4c-4d7a-9db0-4813ebf35ed3",
                                "type": "text/plain",
                                "content": "Tudo bem! Vamos continuar aqui."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "07150d54-9541-4700-9a5b-a97bb6c70723",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "regular-error",
                    "typeOfStateId": "state",
                    "$connId": "con_553",
                    "$id": "57008a11-0502-4c06-ab10-92ca1179f159",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "122e0c83-96a3-453a-98b0-4999c487eaf3",
                    "typeOfStateId": "state",
                    "$connId": "con_558",
                    "$id": "c07f8442-3087-4690-8cda-eedd7168c546",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "22a84dec-9dbf-4e8d-866c-4f178ebc3266",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Update SDK (main)",
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(DWNT, contact_identity, tunnel_originator, random_guid) {\n    try {\n        DWNT = JSON.parse(DWNT|| \"{}\");\n\n        DWNT.journey = random_guid;\n\n        if (!DWNT.contact) DWNT.contact = {};\n        DWNT.contact.source = contact__source(contact_identity);\n        DWNT.contact.cellphone = contact__cellphone(contact_identity);\n        DWNT.contact.phone = contact__phone(contact_identity);\n        DWNT.contact.DDD = contact__DDD(contact_identity);\n        DWNT.contact.id = tunnel_originator ? tunnel_originator : contact_identity;\n\n        DWNT.contact.new = DWNT.contact.new === undefined;\n\n\t\tDWNT.error = null;\n        // NÃ£o atualizar, apenas neste update, o checkpoint para ter registro caso queira voltar no fluxo\n        // DWNT.checkpoints = [];\n\n    } catch(err) {}\n    return JSON.stringify(DWNT);\n}\n\nfunction contact__source(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    if (contactIdentity.includes(\"wa.gw.msging.net\")) {\n        return \"WHATSAPP\";\n    } else if (contactIdentity.includes(\"messenger\")) {\n        return \"FACEBOOK\";\n    } else if (contactIdentity.includes(\"instagram\")) {\n        return \"INSTAGRAM\";\n    } else if (contactIdentity.includes(\"businessmessages\")) {\n        return \"GOOGLE_BUSINESS_MESSAGE\";\n    } else if (contactIdentity.includes(\"mailgun\")) {\n        return \"E_MAIL\";\n    } else if (contactIdentity.includes(\"0mn\") || contactIdentity.includes(\"blip\")) {\n        return \"BLIP_CHAT\";\n    } else {\n        return \"OUTRO\";\n    }\n}\n\nfunction contact__phone(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0];\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n\nfunction contact__cellphone(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0].substring(2);\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n\nfunction contact__DDD(contactIdentity) {\n    contactIdentity = String(contactIdentity);\n    try {\n        if (contact__source(contactIdentity) !== \"WHATSAPP\") {\n            throw new Error(\"Not a whatsapp contact\");\n        }\n        return String(contactIdentity).split(\"@\")[0].substring(2, 4);\n    } catch(err) {\n        return \"Indefinido\";\n    }  \n}\n\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [[DWNT] Update SDK (main)] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "contact.identity",
                            "tunnel.originator",
                            "random.guid"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWNT-USRSCPTf-4e8d-866c-4f178ebc3266",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{DWNT}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "DWNT"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "7f7bfb69-b6f2-4b82-9b71-ad01a212740a",
            "root": false,
            "$title": "Mensagem nÃ£o abrir chamado",
            "$position": {
                "top": "738px",
                "left": "3952px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ed96a1fe-5177-4471-b412-ed7d3450eab0": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "be0d7003-5a70-4ddd-94f3-b0c9d0b276ab",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "6e7f8381-03e3-4faf-9621-511cd04b9106",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "6e7f8381-03e3-4faf-9621-511cd04b9106",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "6db0d72a-9985-4ee7-9971-0d14abcee031",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "ab2fe42f-bb42-4c5f-9522-920c7df9ee00",
                            "type": "text/plain",
                            "content": "{{{userData@first_name}}! Quando quiser retomar a conversa, Ã© sÃ³ me chamar. Estou por aqui para te ajudar!|{{userData@first_name}}! Se precisar de algo, Ã© sÃ³ me chamar. Estou por aqui para te ajudar! ðŸŒž|{{userData@first_name}}! Quando quiser continuar, Ã© sÃ³ me dar um toque. Estou por aqui! ðŸ˜‰|{{userData@first_name}}! Se precisar, Ã© sÃ³ me chamar. Estou pronta para te ajudar! ðŸš€|{{userData@first_name}}! Qualquer coisa, sÃ³ chamar! Estou pronta para te ajudar. ðŸ’¡}",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "ab2fe42f-bb42-4c5f-9522-920c7df9ee00",
                                "type": "text/plain",
                                "content": "{{{userData@first_name}}! Quando quiser retomar a conversa, Ã© sÃ³ me chamar. Estou por aqui para te ajudar!|{{userData@first_name}}! Se precisar de algo, Ã© sÃ³ me chamar. Estou por aqui para te ajudar! ðŸŒž|{{userData@first_name}}! Quando quiser continuar, Ã© sÃ³ me dar um toque. Estou por aqui! ðŸ˜‰|{{userData@first_name}}! Se precisar, Ã© sÃ³ me chamar. Estou pronta para te ajudar! ðŸš€|{{userData@first_name}}! Qualquer coisa, sÃ³ chamar! Estou pronta para te ajudar. ðŸ’¡}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "5f43a076-0b5f-4b1f-81c6-2deef54bb90c",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "ed96a1fe-5177-4471-b412-ed7d3450eab0",
            "root": false,
            "$title": "Inatividade",
            "$position": {
                "top": "500px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "4ee143c6-90ef-49b4-9bae-a175bc2d60b7": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{mesPagamentoBuild@type}}",
                            "rawContent": "{{mesPagamentoBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "869b00dd-81be-411d-ba3f-b36c154ae4af",
                    "typeOfStateId": "state",
                    "$connId": "con_563",
                    "$id": "257e2daa-cf3b-4520-a5c7-5d102b0de4fc",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "mesPagamento:voltar"
                            ],
                            "variable": "mesPagamentoEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_568",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "invÃ¡lido"
                            ],
                            "variable": "mesPagamentoEscolha"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "9101ed0e-bafd-4e76-a8d5-8bd094f0d771"
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "ced5f078-3878-4d2a-adf4-66966f57e878"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'mesPagamentoOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(listMonths) {\n\ttry {\n\t\tconst allOptions = JSON.parse(listMonths).map(item => ({\n\t\t\tid: `mesPagamento:${item.id}`,\n\t\t\ttitle: item.id,\n\t\t\ttitleShort: item.id,\n\t\t\tdescription: \"\",\n\t\t\tactive: true\n\n\t\t}));\n\n\t\tallOptions.push(\n\t\t\t\t{\n\t\t\t\t\tid: \"mesPagamento:voltar\",\n\t\t\t\t\ttitle: \"Menu anterior\",\n\t\t\t\t\ttitleShort: \"Menu anterior\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t)\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesPagamentoOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "listMonths"
                        ],
                        "outputVariable": "mesPagamentoOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesPagamentoOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesPagamentoOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'mesPagamentoBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Selecione o mÃªs de pagamento que vocÃª quer consultar!`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesPagamentoBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "mesPagamentoOptions"
                        ],
                        "outputVariable": "mesPagamentoBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesPagamentoBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesPagamentoBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"mesPagamentoEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesPagamentoEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "mesPagamentoOptions"
                        ],
                        "outputVariable": "mesPagamentoEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesPagamentoEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesPagamentoEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{mesPagamentoEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "mesPagamentoEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "mesPagamentoEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "mesPagamentoEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "mesPagamentoEscolha"
                        }
                    ]
                },
                {
                    "$id": "e7e0f620-e40b-4c55-abfa-07244f1a23e7",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'mesAnoBusca'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(itemEscolhidoObjeto){\n    try{ \n\t\tconst [mesBusca, anoBusca] = JSON.parse(itemEscolhidoObjeto).title.split('/');\n        \n        return {\n            mesBusca,\n            anoBusca\n        } \n    } catch(error){\n        return false\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'mesAnoBusca'] \"+String(err);}}",
                        "inputVariables": [
                            "mesPagamentoEscolha"
                        ],
                        "outputVariable": "mesAnoBusca",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "variable": "mesPagamentoEscolha",
                            "comparison": "notEquals"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "variable": "mesPagamentoEscolha",
                            "comparison": "exists"
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-4c55-abfa-07244f1a23e7",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{mesAnoBusca}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "mesAnoBusca"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "4ee143c6-90ef-49b4-9bae-a175bc2d60b7",
            "root": false,
            "$title": "MÃªs de pagamento",
            "$position": {
                "top": "344px",
                "left": "1931px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9101ed0e-bafd-4e76-a8d5-8bd094f0d771": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c403f596-ce10-4677-b0d2-fb20e4c4074a",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "53896bda-5937-439f-aca6-d492b92ce5e7",
                    "typeOfStateId": "state",
                    "$connId": "con_573",
                    "$id": "9dce9a49-e24c-4438-9f40-9bc871532a37",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f0451207-0e5d-4c81-aa45-9add604766ed",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoReciboHolerite",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarReciboDePagamentoDetalhado>\n      <v1:filtro>\n        <v11:Colaborador>\n          <v11:Empresa>\n            <v11:Codigo>{{colaboradorSelecionado@empresaId}}</v11:Codigo>\n          </v11:Empresa>\n          <v11:Matricula>{{colaboradorSelecionado@matricula}}</v11:Matricula>\n        </v11:Colaborador>\n        <v11:FolhaDePagamentoCodigo>{{holeriteEscolha@id}}</v11:FolhaDePagamentoCodigo>\n        <v11:Referencia>\n          <v11:Ano>{{mesAnoBusca@anoBusca}}</v11:Ano>\n          <v11:Mes>{{mesAnoBusca@mesBusca}}</v11:Mes>\n        </v11:Referencia>\n      </v1:filtro>\n    </v1:ConsultarReciboDePagamentoDetalhado>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoReciboHolerite] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoReciboHolerite",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTd-4c81-aa45-9add604766ed",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoReciboHolerite}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoReciboHolerite"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06e1f8d6-6423-4c0e-985a-da03f823f27f",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Recibo Holerite",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "\"lg.com.br/api/v1/ServicoDeReciboDePagamento/ConsultarReciboDePagamentoDetalhado\""
                        },
                        "method": "POST",
                        "body": "{{corpoReciboHolerite}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicoderecibodepagamento",
                        "responseStatusVariable": "statusBuscaReciboHolerite",
                        "responseBodyVariable": "responseBuscaReciboHolerite"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS3-4c0e-985a-da03f823f27f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaReciboHolerite"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "35a33ab4-f2b6-48e5-8e35-1c73ffe351d9",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonReciboHolerite",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj;\n}",
                        "inputVariables": [
                            "responseBuscaReciboHolerite"
                        ],
                        "outputVariable": "convertXmlToJsonReciboHolerite"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "0f7bc51c-eeaa-4e72-8174-fb3504cee90c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "recebidoHoleriteInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(obj) {\n\ttry {\n\t\tif (!obj) return false\n\n\t\tobj = JSON.parse(obj)\n\n\t\tconst corpo = obj[\"s:Envelope\"][\"s:Body\"][\"ConsultarReciboDePagamentoDetalhadoResponse\"][\"ConsultarReciboDePagamentoDetalhadoResult\"]['a:Retorno']\n\n\t\tconst output = {\n\t\t\tdescricao: corpo['a:DadosDoColaborador'] && corpo['a:DadosDoColaborador']['a:CargoEfetivo'] && corpo['a:DadosDoColaborador']['a:CargoEfetivo']['a:Descricao'] ? corpo['a:DadosDoColaborador']['a:CargoEfetivo']['a:Descricao'] : '',\n\t\t\tsalarioBase: corpo['a:SalarioBase'] ? `${corpo['a:SalarioBase']}` : '',\n\t\t\ttotalDesconto: corpo['a:TotalDesconto'] ? `${corpo['a:TotalDesconto']}` : '',\n\t\t\ttotalLiquido: corpo['a:TotalLiquido'] ? `${corpo['a:TotalLiquido']}` : '',\n\t\t\ttotalProvento: corpo['a:TotalProvento'] ? `${corpo['a:TotalProvento']}` : '',\n\t\t}\n\n\t\treturn output;\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [recebidoHoleriteInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonReciboHolerite"
                        ],
                        "outputVariable": "recebidoHoleriteInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "convertXmlToJsonReciboHolerite"
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "DWNT-USRSCPTa-4e72-8174-fb3504cee90c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{recebidoHoleriteInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "recebidoHoleriteInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9101ed0e-bafd-4e76-a8d5-8bd094f0d771",
            "root": false,
            "$title": "[API] Holerite",
            "$position": {
                "top": "449px",
                "left": "2417px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "4675ba58-d159-4af3-aa9f-4c5727113ac4": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuFeriasBuild@type}}",
                            "rawContent": "{{menuFeriasBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "8ce61f41-738b-4283-8d8c-014c7918c000",
                    "typeOfStateId": "state",
                    "$connId": "con_578",
                    "$id": "78189cf1-6901-4531-95f5-1e022f0a4649",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:menu_principal"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_583",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:aviso_ferias"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "c91973cf-38f3-4149-964d-2f7446405825"
                },
                {
                    "stateId": "e0807109-fdb0-42a6-be1d-73a1a82bf9a6",
                    "typeOfStateId": "state",
                    "$connId": "con_588",
                    "$id": "685ba886-db72-4a62-9f72-1e7591f203f1",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:marcacao"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "475597e1-6113-4f74-90e4-4711512ec6fd",
                    "typeOfStateId": "state",
                    "$connId": "con_593",
                    "$id": "2107bbb2-fad3-4b15-9ca4-d6e7b463cfce",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:recibo",
                                "menuFerias:data_pagamento"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "58d2e6b4-50e3-4d84-ad69-24858a250420",
                    "typeOfStateId": "state",
                    "$connId": "con_598",
                    "$id": "8ee17637-9caf-4adb-8dad-4a2141f8c77e",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:saldo"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "d82c7f93-c1db-4fac-b647-552c097d2b8e"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuFeriasOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:aviso_ferias\",\n\t\t\t\t\ttitle: \"Aviso de fÃ©rias\",\n\t\t\t\t\ttitleShort: \"Aviso de fÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:data_pagamento\",\n\t\t\t\t\ttitle: \"Data de pagamento\",\n\t\t\t\t\ttitleShort: \"Data de pagamento\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:marcacao\",\n\t\t\t\t\ttitle: \"MarcaÃ§Ã£o de fÃ©rias\",\n\t\t\t\t\ttitleShort: \"MarcaÃ§Ã£o de fÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:recibo\",\n\t\t\t\t\ttitle: \"Recibo de fÃ©rias\",\n\t\t\t\t\ttitleShort: \"Recibo de fÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:saldo\",\n\t\t\t\t\ttitle: \"Saldo de fÃ©rias\",\n\t\t\t\t\ttitleShort: \"Saldo de fÃ©rias\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuFerias:menu_principal\",\n\t\t\t\t\ttitle: \"Menu principal\",\n\t\t\t\t\ttitleShort: \"Menu principal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "menuFeriasOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuFeriasBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Sobre o que vocÃª deseja saber mais detalhes?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuFeriasOptions"
                        ],
                        "outputVariable": "menuFeriasBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWNT5eb1-4614-40a1-b156-b10ca3cc647c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "[DWNT] Add checkpoint",
                    "settings": {
                        "function": "run",
                        "source": "function run(DWNT, stateId) {\n\ttry {\n\t\tDWNT = JSON.parse(DWNT || '');\n\t\tDWNT.checkpoints = Array.from(DWNT.checkpoints || [])\n\t\tconst checkpoint = {\n\t\t\t\"state\": stateId, \n\t\t\t\"bot\": DWNT.application[\"bot\"], \n\t\t\t\"service\": DWNT.application[\"service\"]\n\t\t};\n\t\tconst index = DWNT.checkpoints.findIndex(cp => {\n\t\t\treturn cp.state == checkpoint.state && cp.bot == checkpoint.bot;\n\t\t});\n\n\t\t// Loops\n\t\tif (index >= 0) {\n\t\t\tDWNT.checkpoints.splice(0, index);\n\t\t} else {\n\t\t\tDWNT.checkpoints.unshift(checkpoint);\n\t\t}\n\n\t\tDWNT.hasCheckpoints = DWNT.checkpoints.length > 0 || undefined;\n\t\t\n\t} catch(err) {\n        DWNT = { err: String(err) };\n    }\n\treturn JSON.stringify(DWNT);\n}",
                        "inputVariables": [
                            "DWNT",
                            "state.id"
                        ],
                        "outputVariable": "DWNT",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuFeriasEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuFeriasOptions"
                        ],
                        "outputVariable": "menuFeriasEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuFeriasEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuFeriasEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuFeriasEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuFeriasEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuFeriasEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF1E90",
                    "label": "Checkpoint",
                    "id": "DWNT9da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "4675ba58-d159-4af3-aa9f-4c5727113ac4",
            "root": false,
            "$title": "Menu fÃ©rias",
            "$position": {
                "top": "1701px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "7951c1c9-d26c-40e9-a03c-826300ab3b87": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "a3f4b3ac-b799-48a9-beeb-e39ba6038532",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "d07b37a4-f32e-4f90-9a24-ffe2becc2989",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "7951c1c9-d26c-40e9-a03c-826300ab3b87",
            "root": false,
            "$title": "[GO TO][Principal] Menu fÃ©rias",
            "$position": {
                "top": "1653.33px",
                "left": "747.778px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d07b37a4-f32e-4f90-9a24-ffe2becc2989": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "df3598b0-d431-4560-bd38-01b802aa44ae",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "07c14769-1f20-4b5e-b415-66ef10b338b1",
                    "typeOfStateId": "state",
                    "$connId": "con_603",
                    "$id": "5e5441e4-8ce4-4286-9aa3-02aa47be04b3",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "16a3a3cd-ee33-41e5-83c7-cafd37db0485",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoFeriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n  const output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\" xmlns:arr=\"http://schemas.microsoft.com/2003/10/Serialization/Arrays\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v2:ConsultarPeriodosAquisitivosEmAbertoParaVariosContratos>\n      <v2:filtro>\n        <v1:CodigoDaEmpresa>{{colaboradorSelecionado@empresaId}}</v1:CodigoDaEmpresa>\n        <v1:ListaDeMatriculas>\n          <arr:string>{{colaboradorSelecionado@matricula}}</arr:string>\n        </v1:ListaDeMatriculas>\n      </v2:filtro>\n    </v2:ConsultarPeriodosAquisitivosEmAbertoParaVariosContratos>\n  </soapenv:Body>\n</soapenv:Envelope>`\n  try {\n    return output;\n  } catch (e) {\n    return output;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoFeriasInfo] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoFeriasInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT3-41e5-83c7-cafd37db0485",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoFeriasInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoFeriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "37c2669d-737d-4fa0-84f6-5a23c17a28f6",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Ferias Info",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeFerias/ConsultarPeriodosAquisitivosEmAbertoParaVariosContratos"
                        },
                        "method": "POST",
                        "body": "{{corpoFeriasInfo}}",
                        "uri": "{{config.LGBaseUrl}}/v2/servicodeferias",
                        "responseStatusVariable": "statusBuscaFeriasInfo",
                        "responseBodyVariable": "responseBuscaFeriasInfo"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSd-4fa0-84f6-5a23c17a28f6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaFeriasInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "bd57b2f6-08c2-4ee7-8ab8-f7fae908af6c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonFeriasInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n  try {\n        if (!xml) return false\n \n        const json = {};\n        const tagRegex = /<([^\\/!> ]+)(?: [^>]+)?>([^<]*)/g;\n        let match;\n        \n        while ((match = tagRegex.exec(xml)) !== null) {\n        const tagName = match[1];\n        const tagValue = match[2].trim();\n        \n        if (!json[tagName]) {\n            json[tagName] = tagValue || {};\n        } else if (Array.isArray(json[tagName])) {\n            json[tagName].push(tagValue || {});\n        } else {\n            json[tagName] = [json[tagName], tagValue || {}];\n        }\n        }\n        delete json['s:Envelope']\n        delete json['s:Body']\n        delete json['ConsultarPeriodosAquisitivosEmAbertoParaVariosContratosResponse']\n        delete json['ConsultarPeriodosAquisitivosEmAbertoParaVariosContratosResult']\n        delete json['a:CodigoDoErro']\n        delete json['a:Mensagens']\n        delete json['a:Tipo']\n        delete json['a:Retorno']\n        delete json['a:PeriodoAquisitivo']\n        delete json['a:IdentificacaoDeContrato']\n        delete json['a:Empresa']\n        delete json['a:CodigoDeIntegracao']\n        delete json['a:Codigo']\n        delete json['a:Matricula']\n       \n        const output = []\n        json['a:Atual'].forEach((v, index) => {\n            output.push({\n                atual: v,\n                dataInicio: json['a:DataInicio'][index],\n                dataInicioFormatado: `${json['a:DataInicio'][index].split('T')[0].split('-')[2]}/${json['a:DataInicio'][index].split('T')[0].split('-')[1]}/${json['a:DataInicio'][index].split('T')[0].split('-')[0]}`,\n                dataFim: json['a:DataFim'][index],\n                dataFimFormatado: `${json['a:DataFim'][index].split('T')[0].split('-')[2]}/${json['a:DataFim'][index].split('T')[0].split('-')[1]}/${json['a:DataFim'][index].split('T')[0].split('-')[0]}`,\n                dataFimPeriodoConcessivo: json['a:DataFimPeriodoConcessivo'][index],\n                dataFimPeriodoConcessivoFormatado: `${json['a:DataFimPeriodoConcessivo'][index].split('T')[0].split('-')[2]}/${json['a:DataFimPeriodoConcessivo'][index].split('T')[0].split('-')[1]}/${json['a:DataFimPeriodoConcessivo'][index].split('T')[0].split('-')[0]}`,\n                dataInicioPeriodoConcessivo: json['a:DataInicioPeriodoConcessivo'][index],\n                dataInicioPeriodoConcessivoFormatado: `${json['a:DataInicioPeriodoConcessivo'][index].split('T')[0].split('-')[2]}/${json['a:DataInicioPeriodoConcessivo'][index].split('T')[0].split('-')[1]}/${json['a:DataInicioPeriodoConcessivo'][index].split('T')[0].split('-')[0]}`,\n                faltasInjustificadas: json['a:FaltasInjustificadas'][index],\n                observacao: json['a:Observacao'][index] === {} ? \"\" : json['a:Observacao'][index],\n                parcelamento: json['a:Parcelamento'][index],\n                parcelamentoSimulacao: json['a:ParcelamentoSimulacao'][index],\n                saldoDeFerias: json['a:SaldoDeFerias'][index],\n                statusDoPeriodoAquisitivo: json['a:StatusDoPeriodoAquisitivo'][index],\n                totalDeDiasAdquiridos: json['a:TotalDeDiasAdquiridos'][index],\n                totalDeDiasDeDireito: json['a:TotalDeDiasDeDireito'][index],\n                totalDeDiasDeFruicao: json['a:TotalDeDiasDeFruicao'][index],\n                totalDeDiasDeLicenca: json['a:TotalDeDiasDeLicenca'][index],\n            })\n        });\n\n        return output || false\n  } catch(e) {\n        return false\n  }\n}",
                        "inputVariables": [
                            "responseBuscaFeriasInfo"
                        ],
                        "outputVariable": "convertXmlToJsonFeriasInfo"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": false
                },
                {
                    "$id": "3789a80a-c9df-4538-947f-6b4f584813fa",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "feriasAquisitivoInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(feriasInfoJson, diaAtual) {\n\ttry {\n\t\tferiasInfoJson = JSON.parse(feriasInfoJson)\n\n\t\tdiaAtual = new Date(diaAtual)\n\t\treturn feriasInfoJson.find((info) => info.atual === 'true' );\n\t\t\n\t} catch(e) {\n\t\treturn {};\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [feriasAquisitivoInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonFeriasInfo",
                            "calendar.datetime"
                        ],
                        "outputVariable": "feriasAquisitivoInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4538-947f-6b4f584813fa",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{feriasAquisitivoInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "feriasAquisitivoInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "d07b37a4-f32e-4f90-9a24-ffe2becc2989",
            "root": false,
            "$title": "[API] Saldo fÃ©rias",
            "$position": {
                "top": "1700px",
                "left": "1342px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "07c14769-1f20-4b5e-b415-66ef10b338b1": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "345413af-ce8d-4a0c-baf0-3a080c52deb6",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "016f624d-61e6-48e2-9175-656394a65201",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "016f624d-61e6-48e2-9175-656394a65201",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "e3a00423-fb0e-4afb-99cf-c045ab046f2d",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "5e35144c-d25b-445a-bf4f-77a812b3e593",
                            "type": "text/plain",
                            "content": "Ã“timo! Vou falar sobre os dias de descanso ðŸ–ï¸â€¨\n\nO saldo Ã© de *{{feriasAquisitivoInfo@saldoDeFerias}} dias de fÃ©rias* disponÃ­veis para aproveitar.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "5e35144c-d25b-445a-bf4f-77a812b3e593",
                                "type": "text/plain",
                                "content": "Ã“timo! Vou falar sobre os dias de descanso ðŸ–ï¸â€¨\n\nO saldo Ã© de *{{feriasAquisitivoInfo@saldoDeFerias}} dias de fÃ©rias* disponÃ­veis para aproveitar."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "7a9cdc84-ac99-4400-8662-59d179dff524",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "4675ba58-d159-4af3-aa9f-4c5727113ac4",
                    "typeOfStateId": "state",
                    "$connId": "con_608",
                    "$id": "54f85157-d385-4436-b054-eb1cd2f901b8",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "07c14769-1f20-4b5e-b415-66ef10b338b1",
            "root": false,
            "$title": "Informa saldo de fÃ©rias",
            "$position": {
                "top": "1689px",
                "left": "1580px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "8ce61f41-738b-4283-8d8c-014c7918c000": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "81262536-6ad7-4f9a-b41f-4275805d26f8",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "d2baf3dd-bc92-4b89-9b95-77ed8b1e1f14",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' MENU",
                    "settings": {
                        "variable": "errorType",
                        "value": "MENU"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "8ce61f41-738b-4283-8d8c-014c7918c000",
            "root": false,
            "$title": "[GO TO][Ferias] Menu",
            "$position": {
                "top": "1900px",
                "left": "1800px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "475597e1-6113-4f74-90e4-4711512ec6fd": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "0f845c57-fc1d-45fd-ba3e-2787773583b5",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "437bec32-19a5-4e68-9d12-9f6831959053",
                    "typeOfStateId": "state",
                    "$connId": "con_613",
                    "$id": "7d6aaef1-eacc-4e33-b593-0bfbe3032506",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "dbd50ddb-16c7-4f49-a642-7ab389e1695c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaFolhaPagamentoFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n       <v1:ConsultarLista>\n         <v1:filtro>\n            <v11:Empresa>\n               <v11:Codigo>{{colaboradorSelecionado@empresaId}}</v11:Codigo>\n            </v11:Empresa>\n            <v11:TipoDeFolha>1</v11:TipoDeFolha>\n         </v1:filtro>\n      </v1:ConsultarLista>\n    </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaFolhaPagamentoFerias] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaFolhaPagamentoFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4f49-a642-7ab389e1695c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaFolhaPagamentoFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaFolhaPagamentoFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "705ee713-3755-4ab2-9dd1-fc33822e633a",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca folhas de pagamento - Ferias",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeFolhaDePagamento/ConsultarLista"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaFolhaPagamentoFerias}}",
                        "uri": "{{config.LGBaseUrl}}/v1/ServicoDeFolhaDePagamento",
                        "responseStatusVariable": "statusBuscaFolhaPagamentoFerias",
                        "responseBodyVariable": "responseBuscaFolhaPagamentoFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS5-4ab2-9dd1-fc33822e633a",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaFolhaPagamentoFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "a8df5336-87e4-47ad-83df-0706d1d4f042",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonFolhasPagamentoFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj['s:Envelope']['s:Body'].ConsultarListaResponse.ConsultarListaResult['a:Retorno']['a:ObjetoComCodigoNumericoEDescricao'] || false\n}",
                        "inputVariables": [
                            "responseBuscaFolhaPagamentoFerias"
                        ],
                        "outputVariable": "convertXmlToJsonFolhasPagamentoFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "d7b3292a-254b-491d-8573-1b1370387b36",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "folhaPagamentoInfo",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(convertXmlToJsonFolhasPagamentoFerias) {\n\ttry {\n\t\tconvertXmlToJsonFolhasPagamentoFerias= JSON.parse(convertXmlToJsonFolhasPagamentoFerias)\n\t\t\n\t\tconvertXmlToJsonFolhasPagamentoFerias = convertXmlToJsonFolhasPagamentoFerias.map((v) => ({\n\t\t\t...v,\n\t\t\tcodigo: v['a:Codigo'],\n\t\t\tdescricao: v['a:Descricao'],\n\t\t}))\n\n\t\tconst info = convertXmlToJsonFolhasPagamentoFerias.find((v) => v.descricao.includes('1'))\n\n\t\tif(!info) return {}\n\n\t\treturn info;\n\t} catch(e) {\n\t\treturn {}\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [folhaPagamentoInfo] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonFolhasPagamentoFerias"
                        ],
                        "outputVariable": "folhaPagamentoInfo",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-491d-8573-1b1370387b36",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{folhaPagamentoInfo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "folhaPagamentoInfo"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "475597e1-6113-4f74-90e4-4711512ec6fd",
            "root": false,
            "$title": "[API] Folha de pagamento",
            "$position": {
                "top": "1600px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "437bec32-19a5-4e68-9d12-9f6831959053": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "51dfa859-46ef-4dd1-9859-0cdd96895840",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "6c58f46b-9751-44d2-8c1e-3fa463fcbdd0",
                    "typeOfStateId": "state",
                    "$connId": "con_618",
                    "$id": "323e9138-e421-43c5-be75-06f4f4469c86",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ],
                            "variable": "convertXmlToJsonProximasFerias"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c08d9e87-34ef-420b-8e8c-622887e00577",
                    "typeOfStateId": "state",
                    "$connId": "con_623",
                    "$id": "e8ca05b3-4968-4bee-a99d-a4be2be6fdc3",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "pagamento_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c2058332-130e-4bf8-b74e-53a103dc88b1",
                    "typeOfStateId": "state",
                    "$connId": "con_628",
                    "$id": "352279a7-4ede-492b-a3e8-f844e1b0a6ec",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "recibo_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c08d9e87-34ef-420b-8e8c-622887e00577",
                    "typeOfStateId": "state",
                    "$connId": "con_633",
                    "$id": "0acd1550-386e-4014-9099-a10f610e3470",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuFerias:data_pagamento"
                            ],
                            "variable": "menuFeriasEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c2058332-130e-4bf8-b74e-53a103dc88b1",
                    "typeOfStateId": "state",
                    "$connId": "con_638",
                    "$id": "1a31cb5a-0ce3-4766-b7ca-d6768e432711",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "61402ad6-908f-4b54-ba2b-e5b150cd0f49",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v2:ConsultarLista>\n      <v2:filtro>\n        <v1:Colaborador>\n          <v1:Empresa>\n            <v1:Codigo>{{colaboradorSelecionado@empresaId}}</v1:Codigo>\n          </v1:Empresa>\n          <v1:Matricula>{{colaboradorSelecionado@matricula}}</v1:Matricula>\n        </v1:Colaborador>\n      </v2:filtro>\n    </v2:ConsultarLista>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoFerias] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4b54-ba2b-e5b150cd0f49",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "2f12017c-624f-4532-92ef-b3e6311c4295",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Ferias",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeFerias/ConsultarLista"
                        },
                        "method": "POST",
                        "body": "{{corpoFerias}}",
                        "uri": "{{resource.LGBaseUrl}}/v2/servicodeferias",
                        "responseStatusVariable": "statusBuscaFerias",
                        "responseBodyVariable": "responseBuscaFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTSf-4532-92ef-b3e6311c4295",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "6c2e0157-bbb7-4fa5-a947-8af4fbd1dc9c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonProximasFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    try {\n        if (!xml) return false\n\n        const json = {};\n        const tagRegex = /<([^\\/!> ]+)(?: [^>]+)?>([^<]*)/g;\n        let match;\n\n        while ((match = tagRegex.exec(xml)) !== null) {\n            const tagName = match[1];\n            const tagValue = match[2].trim();\n\n            if (!json[tagName]) {\n                json[tagName] = tagValue || {};\n            } else if (Array.isArray(json[tagName])) {\n                json[tagName].push(tagValue || {});\n            } else {\n                json[tagName] = [json[tagName], tagValue || {}];\n            }\n        }\n        delete json['s:Envelope']\n        delete json['s:Body']\n        delete json['ConsultarListaResponse']\n        delete json['ConsultarListaResult']\n        delete json['a:CodigoDoErro']\n        delete json['a:Mensagens']\n        delete json['a:Tipo']\n        delete json['a:Retorno']\n        delete json['a:IdentificacaoDeContrato']\n        delete json['a:Empresa']\n        delete json['a:CodigoDeIntegracao']\n        delete json['a:Codigo']\n        delete json['a:Matricula']\n        delete json['a:ObjetoComCodigoNumericoEDescricao']\n        delete json['a:FeriasParcial']\n\n        const output = []\n\n        if (Array.isArray(json['a:DataDaOcorrencia'])) {\n            json['a:DataDaOcorrencia'].forEach((v, index) => {\n                const dataRetorno = new Date(json['a:DataFim'][index])\n\n                dataRetorno.setDate(dataRetorno.getDate() + 1)\n                const [anoRetorno, mesRetorno, diaRetorno] = dataRetorno.toISOString().split('T')[0].split('-')\n\n                const diffInMs = new Date(json['a:DataFim'][index]) - new Date(v)\n                const diffInDays = diffInMs / (1000 * 60 * 60 * 24) + 1\n\n                output.push({\n                    inicio: v,\n                    fim: json['a:DataFim'][index],\n                    inicioFormatado: `${v.split(\"T\")[0].split('-')[2]}/${v.split(\"T\")[0].split('-')[1]}/${v.split(\"T\")[0].split('-')[0]}`,\n                    fimFormatado: `${json['a:DataFim'][index].split(\"T\")[0].split('-')[2]}/${json['a:DataFim'][index].split(\"T\")[0].split('-')[1]}/${json['a:DataFim'][index].split(\"T\")[0].split('-')[0]}`,\n                    retornoFormatado: `${diaRetorno}/${mesRetorno}/${anoRetorno}`,\n                    diasDeGozo: diffInDays,\n                    anoInicio: `${v.split(\"T\")[0].split('-')[0]}`,\n                    mesInicio: `${v.split(\"T\")[0].split('-')[1]}`,\n                    anoFim: `${json['a:DataFim'][index].split(\"T\")[0].split('-')[0]}`,\n                    mesFim: `${json['a:DataFim'][index].split(\"T\")[0].split('-')[1]}`,\n                })\n            });\n        } else {\n\n            const v = json['a:DataDaOcorrencia'];\n\n            const dataRetorno = new Date(json['a:DataFim'])\n            dataRetorno.setDate(dataRetorno.getDate() + 1)\n            const [anoRetorno, mesRetorno, diaRetorno] = dataRetorno.toISOString().split('T')[0].split('-')\n\n            const diffInMs = new Date(json['a:DataFim']) - new Date(v)\n            const diffInDays = diffInMs / (1000 * 60 * 60 * 24) + 1\n\n            output.push({\n                inicio: v,\n                fim: json['a:DataFim'],\n                inicioFormatado: `${v.split(\"T\")[0].split('-')[2]}/${v.split(\"T\")[0].split('-')[1]}/${v.split(\"T\")[0].split('-')[0]}`,\n                fimFormatado: `${json['a:DataFim'].split(\"T\")[0].split('-')[2]}/${json['a:DataFim'].split(\"T\")[0].split('-')[1]}/${json['a:DataFim'].split(\"T\")[0].split('-')[0]}`,\n                retornoFormatado: `${diaRetorno}/${mesRetorno}/${anoRetorno}`,\n                diasDeGozo: diffInDays,\n                anoInicio: `${v.split(\"T\")[0].split('-')[0]}`,\n                mesInicio: `${v.split(\"T\")[0].split('-')[1]}`,\n                anoFim: `${json['a:DataFim'].split(\"T\")[0].split('-')[0]}`,\n                mesFim: `${json['a:DataFim'].split(\"T\")[0].split('-')[1]}`,\n            })\n        }\n\n\n\n\n        return output;\n    } catch (e) {\n        console.log(e)\n        return false\n    }\n}",
                        "inputVariables": [
                            "responseBuscaFerias"
                        ],
                        "outputVariable": "convertXmlToJsonProximasFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "9414c7f8-872c-4344-9b26-8f87cc7ef4a1",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "objFeriasSelecionada",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n    try {\n        const listFerias = JSON.parse(response);\n\n        const dataMaisRecente = listFerias.reduce((maisRecente, item) => {\n            return new Date(item.inicio) > new Date(maisRecente.inicio) ? item : maisRecente;\n        });\n\n        return dataMaisRecente;\n    } catch (error) {\n        return error.message;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [objFeriasSelecionada] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonProximasFerias"
                        ],
                        "outputVariable": "objFeriasSelecionada",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTc-4344-9b26-8f87cc7ef4a1",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{objFeriasSelecionada}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "objFeriasSelecionada"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "437bec32-19a5-4e68-9d12-9f6831959053",
            "root": false,
            "$title": "[API] Busca fÃ©rias",
            "$position": {
                "top": "1611px",
                "left": "2381px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c2058332-130e-4bf8-b74e-53a103dc88b1": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4c1eb60d-4111-40e1-8ace-3813399dd72d",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "1b452f23-652b-40ce-a733-3f077b7081a8",
                    "typeOfStateId": "state",
                    "$connId": "con_643",
                    "$id": "4c6248d0-b40b-4096-b73e-0af27d0d8e4a",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "6ffaab15-f10f-4dfd-ad8f-db98df82c800",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoReciboFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarReciboDePagamentoDetalhado>\n      <v1:filtro>\n        <v11:Colaborador>\n          <v11:Empresa>\n            <v11:Codigo>{{colaboradorSelecionado@empresaId}}</v11:Codigo>\n          </v11:Empresa>\n          <v11:Matricula>{{colaboradorSelecionado@matricula}}</v11:Matricula>\n        </v11:Colaborador>\n        <v11:FolhaDePagamentoCodigo>{{folhaPagamentoInfo@codigo}}</v11:FolhaDePagamentoCodigo>\n        <v11:Referencia>\n          <v11:Ano>{{objFeriasSelecionada@anoInicio}}</v11:Ano>\n          <v11:Mes>{{objFeriasSelecionada@mesInicio}}</v11:Mes>\n        </v11:Referencia>\n      </v1:filtro>\n    </v1:ConsultarReciboDePagamentoDetalhado>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoReciboFerias] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoReciboFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4dfd-ad8f-db98df82c800",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoReciboFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoReciboFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "0c849807-df03-443a-a0b7-bfa4f91e0d9c",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Buscar Recibo de fÃ©rias",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeReciboDePagamento/ConsultarReciboDePagamentoDetalhado"
                        },
                        "method": "POST",
                        "body": "{{corpoReciboFerias}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicoderecibodepagamento",
                        "responseStatusVariable": "statusBuscaReciboFerias",
                        "responseBodyVariable": "responseBuscaReciboFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS3-443a-a0b7-bfa4f91e0d9c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaReciboFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "fc9b13ac-4904-4e9f-ae0a-b2f3647a2522",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonReciboFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj || false;\n}",
                        "inputVariables": [
                            "responseBuscaReciboFerias"
                        ],
                        "outputVariable": "convertXmlToJsonReciboFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c2058332-130e-4bf8-b74e-53a103dc88b1",
            "root": false,
            "$title": "[API] Busca recibo inÃ­cio",
            "$position": {
                "top": "1600px",
                "left": "2609px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "1b452f23-652b-40ce-a733-3f077b7081a8": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "f37407bc-fb28-4c24-a607-ab468c93f2b4",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "43b73a6f-e0a7-4927-97ff-a6fdcedad811",
                    "typeOfStateId": "state",
                    "$connId": "con_648",
                    "$id": "1db9ee9b-0831-4841-adf9-9c5d5ace583c",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "cf23b7dd-e085-4e8d-800a-fd81e8911607",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoReciboFeriasFim",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarReciboDePagamentoDetalhado>\n      <v1:filtro>\n        <v11:Colaborador>\n          <v11:Empresa>\n            <v11:Codigo>{{colaboradorSelecionado@empresaId}}</v11:Codigo>\n          </v11:Empresa>\n          <v11:Matricula>{{colaboradorSelecionado@matricula}}</v11:Matricula>\n        </v11:Colaborador>\n        <v11:FolhaDePagamentoCodigo>{{folhaPagamentoInfo@codigo}}</v11:FolhaDePagamentoCodigo>\n        <v11:Referencia>\n          <v11:Ano>{{objFeriasSelecionada@anoFim}}</v11:Ano>\n          <v11:Mes>{{objFeriasSelecionada@mesFim}}</v11:Mes>\n        </v11:Referencia>\n      </v1:filtro>\n    </v1:ConsultarReciboDePagamentoDetalhado>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoReciboFeriasFim] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoReciboFeriasFim",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT5-4e8d-800a-fd81e8911607",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoReciboFeriasFim}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoReciboFeriasFim"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e1b12155-8d20-42bc-98a9-e9cb986a3202",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Buscar Recibo de fÃ©rias - Fim",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v1/ServicoDeReciboDePagamento/ConsultarReciboDePagamentoDetalhado"
                        },
                        "method": "POST",
                        "body": "{{corpoReciboFeriasFim}}",
                        "uri": "{{config.LGBaseUrl}}/v1/servicoderecibodepagamento",
                        "responseStatusVariable": "statusBuscaReciboFeriasFim",
                        "responseBodyVariable": "responseBuscaReciboFeriasFim"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS0-42bc-98a9-e9cb986a3202",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaReciboFeriasFim"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "29939499-155b-4e57-ac18-af9a30e39b50",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonReciboFeriasFim",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj || false;\n}",
                        "inputVariables": [
                            "responseBuscaReciboFeriasFim"
                        ],
                        "outputVariable": "convertXmlToJsonReciboFeriasFim"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "1b452f23-652b-40ce-a733-3f077b7081a8",
            "root": false,
            "$title": "[API] Busca recibo fim",
            "$position": {
                "top": "1600px",
                "left": "2811px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "67a90df9-39a9-4e27-95a1-d1ad777bca88": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuFeriasAnterioresBuild@type}}",
                            "rawContent": "{{menuFeriasAnterioresBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "a9bfec56-a680-4fc9-9fa3-1a7ce08dc3ba",
                    "typeOfStateId": "state",
                    "$connId": "con_653",
                    "$id": "0b9c54cc-401d-4e53-b25c-f8d4f771a496",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "feriasAnteriores:menu_anterior"
                            ],
                            "variable": "menuFeriasAnterioresEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "b36390d6-0dbc-4fad-8881-ba340de7111f",
                    "typeOfStateId": "state",
                    "$connId": "con_658",
                    "$id": "13c1678b-e2ae-4c86-89f4-0a2f33daa2fa",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "feriasAnteriores:menu_principal"
                            ],
                            "variable": "menuFeriasAnterioresEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_663",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "values": [
                                "invÃ¡lido"
                            ],
                            "variable": "menuFeriasAnterioresEscolha"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "3388a4b1-20ea-49da-9c34-78b7ce0d117f"
                },
                {
                    "stateId": "{{config.inactivityStateId}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "notExists",
                            "values": []
                        }
                    ],
                    "$invalid": false,
                    "$id": "9b95f3d9-4b00-4043-be8e-cc752c47b66e"
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuFeriasAnterioresOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n        const vacations = JSON.parse(response)\n            .sort((a, b) => new Date(b.inicio) - new Date(a.inicio))\n            .slice(0, 3)\n            .reduce((acc, item) => {\n                acc.push({\n                    id: JSON.stringify(item),\n                    title: item.inicioFormatado,\n                    titleShort: item.inicioFormatado,\n                    description: \"\",\n                    active: true\n                })\n                return acc;\n            }, []);\n\n            \n\n        return [...vacations, \n            {\n                id: \"feriasAnteriores:menu_anterior\",\n                title: \"Menu anterior\",\n                titleShort: \"Menu anterior\",\n                description: \"\",\n                active: true\n            },\n            {\n                id: \"feriasAnteriores:menu_principal\",\n                title: \"Menu principal\",\n                titleShort: \"Menu principal\",\n                description: \"\",\n                active: true\n            }];\n    } catch (error) {\n        return error.message;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasAnterioresOptions'] \"+String(err);}}",
                        "inputVariables": [
                            "convertxmltojsonproximasferias"
                        ],
                        "outputVariable": "menuFeriasAnterioresOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasAnterioresOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasAnterioresOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuFeriasAnterioresBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Se quiser conferir os recibos das fÃ©rias anteriores, Ã© sÃ³ escolher pelas datas abaixo!`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasAnterioresBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "menuFeriasAnterioresOptions"
                        ],
                        "outputVariable": "menuFeriasAnterioresBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasAnterioresBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasAnterioresBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuFeriasAnterioresEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuFeriasAnterioresEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuFeriasAnterioresOptions"
                        ],
                        "outputVariable": "menuFeriasAnterioresEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuFeriasAnterioresEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuFeriasAnterioresEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuFeriasAnterioresEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuFeriasAnterioresEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuFeriasAnterioresEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuFeriasAnterioresEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuFeriasAnterioresEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "67a90df9-39a9-4e27-95a1-d1ad777bca88",
            "root": false,
            "$title": "Menu fÃ©rias anteriores",
            "$position": {
                "top": "1599px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3388a4b1-20ea-49da-9c34-78b7ce0d117f": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "86dbc97b-189d-4b2e-9664-1a63e1c97a10",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "32ea5642-1d6b-4004-8539-109d2213b54c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "objFeriasSelecionada",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(input) {\n    try {\n        const userChoice = JSON.parse(input);\n\n        return JSON.parse(userChoice.id);\n    } catch (error) {\n        return error.message;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [objFeriasSelecionada] \"+String(err);}}",
                        "inputVariables": [
                            "menuFeriasAnterioresEscolha"
                        ],
                        "outputVariable": "objFeriasSelecionada",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTb-4004-8539-109d2213b54c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{objFeriasSelecionada}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "objFeriasSelecionada"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c2058332-130e-4bf8-b74e-53a103dc88b1",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3388a4b1-20ea-49da-9c34-78b7ce0d117f",
            "root": false,
            "$title": "[GO TO][Ferias anteriores] Busca recibo",
            "$position": {
                "top": "1586px",
                "left": "3601px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a9bfec56-a680-4fc9-9fa3-1a7ce08dc3ba": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "37732569-5d57-4cef-aa8e-48277c730d66",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "a42b9aa1-d7e6-46a0-8c82-bc0103537296",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' GO_BACK",
                    "settings": {
                        "variable": "errorType",
                        "value": "GO_BACK"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "a9bfec56-a680-4fc9-9fa3-1a7ce08dc3ba",
            "root": false,
            "$title": "[GO TO][Ferias anteriores] GO_BACK",
            "$position": {
                "top": "1800px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "b36390d6-0dbc-4fad-8881-ba340de7111f": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "98711995-02b9-474e-9836-5be56dd85ee8",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "cd73566b-c9ad-44ce-a2fe-c4398f3cfda7",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' GO_BACK",
                    "settings": {
                        "variable": "errorType",
                        "value": "MENU"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#F90300",
                    "label": "Erro Definido",
                    "id": "DWNT1d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "b36390d6-0dbc-4fad-8881-ba340de7111f",
            "root": false,
            "$title": "[GO TO][Ferias anteriores] Menu",
            "$position": {
                "top": "1394px",
                "left": "3330px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e3bfe3f0-2cfd-4076-a708-fc209bf297ff": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "2301ab7f-df23-4356-9852-78063bc472e3",
                        "type": "SendMessage",
                        "settings": {
                            "id": "028d1358-9905-4eed-a3ce-e37d590fd93a",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "028d1358-9905-4eed-a3ce-e37d590fd93a",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "8e49ef8d-e370-41fa-9b56-2f32fc668f39",
                        "type": "SendMessage",
                        "settings": {
                            "id": "63ca3a05-c664-48e3-bc2d-19fb6eda2533",
                            "type": "text/plain",
                            "content": "Vejo que vc nÃ£o estÃ¡ mais por aqui e por isso vou encerrar o atendimento. Se precisar de mim Ã© sÃ³ dar um \"Oi\" ðŸ˜‰\n\nAtÃ© mais ðŸ‘‹",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "63ca3a05-c664-48e3-bc2d-19fb6eda2533",
                                "type": "text/plain",
                                "content": "Vejo que vc nÃ£o estÃ¡ mais por aqui e por isso vou encerrar o atendimento. Se precisar de mim Ã© sÃ³ dar um \"Oi\" ðŸ˜‰\n\nAtÃ© mais ðŸ‘‹"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "d5d6721a-f2bf-4d05-82aa-e9bdbe7e3b9f",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] INATIVIDADE DO BOT",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "UserId": "{{contact.identity}}"
                        },
                        "category": "Inatividade",
                        "action": "default"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "e9931861-0ba8-470c-b09b-b5bf1069f97e",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] INATIVIDADE DO SERVIÃ‡O",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "UserId": "{{contact.identity}}"
                        },
                        "category": "Inatividade - default",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "4ceeb9c3-a5e5-4b5a-9468-352fb3ddf525",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#61D36F",
                    "label": "TrackEvent",
                    "id": "blip-tag-bc58ce94-4e76-4f66-a2c4-efb9b8ebb738",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e3bfe3f0-2cfd-4076-a708-fc209bf297ff",
            "root": false,
            "$title": "[MAIN] Inatividade",
            "$position": {
                "top": "852px",
                "left": "3143px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e0807109-fdb0-42a6-be1d-73a1a82bf9a6": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "45bedb12-c62e-4310-a1d4-e6bb8f6c84f4",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "cc3d1735-5149-43f0-b5e6-9ae411687663",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "cc3d1735-5149-43f0-b5e6-9ae411687663",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "97249e4c-5e18-4393-8700-978c954d6fbc",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "d3718e58-6a1c-48e6-800b-5320699be889",
                            "type": "text/plain",
                            "content": "{{messageMarcacao}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "d3718e58-6a1c-48e6-800b-5320699be889",
                                "type": "text/plain",
                                "content": "{{messageMarcacao}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1e4bc05f-11b5-49ca-929c-8f3ce106a14d",
                                "type": "text/plain",
                                "textContent": "User input",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "7166839b-69df-46d4-af12-2a08d61d6552",
                    "$typeOfContent": "",
                    "type": "ProcessCommand",
                    "$title": "[DWNT] Delete 'isRegexIntent'",
                    "settings": {
                        "to": "postmaster@msging.net",
                        "method": "delete",
                        "uri": "/contexts/{{contact.identity}}/isRegexIntent",
                        "variable": "isRegexIntentDeleteCmdResp"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "74958e2d-8249-48a5-b1fa-ebd7e8ca7e04",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "messageMarcacao",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\treturn `Para fazer agendar, alterar e cancelar os perÃ­odos de fÃ©rias, Ã© sÃ³ *acessar a plataforma pelo <https://login.lg.com.br/saml/auto/neon?f=4F53562B706671356742366F7231385A33392B6663673D3D|link>*.`\n\n\t} catch(e) {\n\t\treturn `Desculpe, nÃ£o consegui validar suas informaÃ§Ãµes neste momento.`\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [messageMarcacao] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "messageMarcacao",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT9-48a5-b1fa-ebd7e8ca7e04",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{messageMarcacao}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "messageMarcacao"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e0807109-fdb0-42a6-be1d-73a1a82bf9a6",
            "root": false,
            "$title": "MarcaÃ§Ã£o de fÃ©rias",
            "$position": {
                "top": "2000px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c91973cf-38f3-4149-964d-2f7446405825": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2d77e239-d7cb-4777-9fdf-7f2cfc65ab5f",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "e6b25c73-2721-4c7c-b685-153b085faa6b",
                    "typeOfStateId": "state",
                    "$connId": "con_668",
                    "$id": "4e04f977-32ef-4f20-af5d-7c398cff7e36",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "076ae13e-5c67-4faf-a306-6614c49b6fdc",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v2:ConsultarLista>\n      <v2:filtro>\n        <v1:Colaborador>\n          <v1:Empresa>\n            <v1:Codigo>{{colaboradorSelecionado@empresaId}}</v1:Codigo>\n          </v1:Empresa>\n          <v1:Matricula>{{colaboradorSelecionado@matricula}}</v1:Matricula>\n        </v1:Colaborador>\n      </v2:filtro>\n    </v2:ConsultarLista>\n  </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoFerias] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4faf-a306-6614c49b6fdc",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "2a8b557f-38b1-49f3-9aea-d14049e3c7ad",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Ferias",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeFerias/ConsultarLista"
                        },
                        "method": "POST",
                        "body": "{{corpoFerias}}",
                        "uri": "{{config.LGBaseUrl}}/v2/servicodeferias",
                        "responseStatusVariable": "statusBuscaFerias",
                        "responseBodyVariable": "responseBuscaFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS1-49f3-9aea-d14049e3c7ad",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "84a53511-1eb3-44db-844e-56821b685aee",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonProximasFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n  try {\n        if (!xml) return false\n \n        const json = {};\n        const tagRegex = /<([^\\/!> ]+)(?: [^>]+)?>([^<]*)/g;\n        let match;\n        \n        while ((match = tagRegex.exec(xml)) !== null) {\n        const tagName = match[1];\n        const tagValue = match[2].trim();\n        \n        if (!json[tagName]) {\n            json[tagName] = tagValue || {};\n        } else if (Array.isArray(json[tagName])) {\n            json[tagName].push(tagValue || {});\n        } else {\n            json[tagName] = [json[tagName], tagValue || {}];\n        }\n        }\n        delete json['s:Envelope']\n        delete json['s:Body']\n        delete json['ConsultarListaResponse']\n        delete json['ConsultarListaResult']\n        delete json['a:CodigoDoErro']\n        delete json['a:Mensagens']\n        delete json['a:Tipo']\n        delete json['a:Retorno']\n        delete json['a:IdentificacaoDeContrato']\n        delete json['a:Empresa']\n        delete json['a:CodigoDeIntegracao']\n        delete json['a:Codigo']\n        delete json['a:Matricula']\n        delete json['a:ObjetoComCodigoNumericoEDescricao']\n        delete json['a:FeriasParcial']\n       \n        const output = []\n        \n        if(Array.isArray(json['a:DataDaOcorrencia'])){\n            json['a:DataDaOcorrencia'].forEach((v, index) => {\n            const dataRetorno = new Date(json['a:DataFim'][index])\n            dataRetorno.setDate(dataRetorno.getDate() + 1)\n            const [anoRetorno, mesRetorno, diaRetorno] = dataRetorno.toISOString().split('T')[0].split('-')\n\n            const diffInMs = new Date(json['a:DataFim'][index]) - new Date(v)\n            const diffInDays  = diffInMs / (1000 * 60 * 60 * 24) + 1\n\n            output.push({\n                inicio: v,\n                fim: json['a:DataFim'][index],\n                inicioFormatado: `${v.split(\"T\")[0].split('-')[2]}/${v.split(\"T\")[0].split('-')[1]}/${v.split(\"T\")[0].split('-')[0]}`,\n                fimFormatado: `${json['a:DataFim'][index].split(\"T\")[0].split('-')[2]}/${json['a:DataFim'][index].split(\"T\")[0].split('-')[1]}/${json['a:DataFim'][index].split(\"T\")[0].split('-')[0]}`,\n                retornoFormatado: `${diaRetorno}/${mesRetorno}/${anoRetorno}`,\n                retorno: `${anoRetorno}-${mesRetorno}-${diaRetorno}`,\n                diasDeGozo: diffInDays,\n            })\n        });\n        } else {\n            const v = json['a:DataDaOcorrencia'];\n\n            const dataRetorno = new Date(json['a:DataFim'])\n            dataRetorno.setDate(dataRetorno.getDate() + 1)\n            const [anoRetorno, mesRetorno, diaRetorno] = dataRetorno.toISOString().split('T')[0].split('-')\n\n            const diffInMs = new Date(json['a:DataFim']) - new Date(v)\n            const diffInDays  = diffInMs / (1000 * 60 * 60 * 24) + 1\n\n            output.push({\n                inicio: v,\n                fim: json['a:DataFim'],\n                inicioFormatado: `${v.split(\"T\")[0].split('-')[2]}/${v.split(\"T\")[0].split('-')[1]}/${v.split(\"T\")[0].split('-')[0]}`,\n                fimFormatado: `${json['a:DataFim'].split(\"T\")[0].split('-')[2]}/${json['a:DataFim'].split(\"T\")[0].split('-')[1]}/${json['a:DataFim'].split(\"T\")[0].split('-')[0]}`,\n                retornoFormatado: `${diaRetorno}/${mesRetorno}/${anoRetorno}`,\n                retorno: `${anoRetorno}-${mesRetorno}-${diaRetorno}`,\n                diasDeGozo: diffInDays,\n            })\n        }\n\n        return output || false\n  } catch(e) {\n        return false\n  }\n}",
                        "inputVariables": [
                            "responseBuscaFerias"
                        ],
                        "outputVariable": "convertXmlToJsonProximasFerias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c91973cf-38f3-4149-964d-2f7446405825",
            "root": false,
            "$title": "[API] Aviso de fÃ©rias",
            "$position": {
                "top": "1862px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e6b25c73-2721-4c7c-b685-153b085faa6b": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "730822d2-3d55-43bb-b33f-a29cfd13ebb8",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "32c06ce1-06e3-40c1-8532-943c11baf652",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "32c06ce1-06e3-40c1-8532-943c11baf652",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "5bd81ae6-9059-4f9c-9bf2-2e2314cf23ac",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b3fe269a-2bfc-448c-ae12-d3d04b27d26e",
                            "type": "text/plain",
                            "content": "{{messageProximaFerias}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b3fe269a-2bfc-448c-ae12-d3d04b27d26e",
                                "type": "text/plain",
                                "content": "{{messageProximaFerias}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "caf484eb-cd49-4101-b954-29ad7070ccec",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "63f53e60-c573-4fde-bd82-3bdb9f464ee6",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "messageProximaFerias",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(feriasInfoJson, diaAtual, feriasAquisitivoInfo) {\n\tconst error = `Ops, nÃ£o encontrei a data no sistema. Que tal conversar com sua lideranÃ§a direta para confirmar se o perÃ­odo jÃ¡ foi aprovado? E lembre-se de assinar o aviso de fÃ©rias assim que ele estiver disponÃ­vel! ðŸŒž\n\nPara acessar o seu aviso de fÃ©rias, *acesse a plataforma pelo <https://prd-aa1.lg.com.br/Autoatendimento/Produtos/AAControls|link>*.`;\n\n\ttry {\n\t\tferiasInfoJson = JSON.parse(feriasInfoJson)\n\t\tferiasAquisitivoInfo = JSON.parse(feriasAquisitivoInfo)\n\n\t\tdiaAtual = new Date(diaAtual)\n\t\tdiaAtual.setHours(diaAtual.getHours() - 3)\n\t\tconst findFeriasInfo = feriasInfoJson.sort((a, b) => {\n\t\t\tconst diaAInfoInicio = new Date(a.inicio)\n\t\t\tconst diaBInfoInicio = new Date(b.inicio)\n\n\t\t\treturn diaAInfoInicio.getTime() - diaBInfoInicio.getTime()\n\t\t}).find((info) => {\n\t\t\tlet diaInfoInicio = new Date(info.inicio)\n\t\t\tlet diaInfoFim = new Date(info.fim)\n\t\t\t\n\t\t\tdiaInfoInicio.setHours(diaInfoInicio.getHours() - 3)\n\t\t\tdiaInfoFim.setHours(diaInfoFim.getHours() - 3)\n\n\t\t\treturn diaAtual.getTime() <= diaInfoFim.getTime()\n\t\t}) \n\n\t\tif (!findFeriasInfo) {\n\t\t\treturn error\n\t\t}\n\n\t\treturn `Seguem os dados das prÃ³ximas fÃ©rias agendadas:\n\t\t\n*PerÃ­odo de aquisiÃ§Ã£o referente:*\n${feriasAquisitivoInfo.dataInicioFormatado} a ${feriasAquisitivoInfo.dataFimFormatado}\n\n*Periodo de fÃ©rias:*\n${findFeriasInfo.inicioFormatado} a ${findFeriasInfo.fimFormatado}\n\n*Dias de retorno ao trabalho:*\n${findFeriasInfo.retornoFormatado}\n\n*Dias de fÃ©rias:*\n${findFeriasInfo.diasDeGozo}\n`\n\t} catch(e) {\n\t\treturn error\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [messageProximaFerias] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonProximasFerias",
                            "calendar.datetime",
                            "feriasAquisitivoInfo"
                        ],
                        "outputVariable": "messageProximaFerias",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT3-4fde-bd82-3bdb9f464ee6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{messageProximaFerias}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "messageProximaFerias"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e6b25c73-2721-4c7c-b685-153b085faa6b",
            "root": false,
            "$title": "Aviso de fÃ©rias",
            "$position": {
                "top": "1874px",
                "left": "2382px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "96e5e18c-0452-426e-890a-92b444358cf5": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "eb411391-34fe-4b45-8053-c36761b85ea6",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ],
                        "expiration": "00:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "4ee143c6-90ef-49b4-9bae-a175bc2d60b7",
                    "typeOfStateId": "state",
                    "$connId": "con_673",
                    "$id": "1aced160-6bf2-4e66-9c48-e5b48f8a8f45",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "isListValid"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "c1af5124-9ac3-44d9-a06a-45947b343507",
                    "typeOfStateId": "state",
                    "$connId": "con_678",
                    "$id": "59a2cf0a-2a14-405b-8ff7-f7c2e8883e43",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "15"
                            ],
                            "variable": "holeriteEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "2afe6ae9-03f6-4e85-ba3a-e5c8c3b738fb",
                    "typeOfStateId": "state",
                    "$connId": "con_683",
                    "$id": "005987e1-36cf-4654-a923-519b992f5530",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f66a6ba3-0bb9-49a4-aa62-7243d3526589",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET_V2 'jsonCalendarioPagamentos'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "async function run(holeriteEscolha) {\n    try {\n        const { id: escolhaId } = JSON.parse(holeriteEscolha);\n        const monthList = [];\n        let year = new Date().getFullYear();\n        const now = new Date();\n        const MIN_YEAR = now.getFullYear() - 1;\n        const DIFF_DAYS_PAYMENT = 2;\n\ndo {\n    const body = buildBodyRequest(year, escolhaId);\n    const response = await requestLG(body);\n    const responseFormatted = XMLConvert(response.body);\n\n    if (!responseFormatted) {\n        year--;\n        continue;\n    }\n\n    const dataArray = Array.isArray(responseFormatted) ? responseFormatted : [responseFormatted];\n\n    for (const item of dataArray) {\n        const dataPagamento = item[\"a:DataDoPagamento\"];\n        if (dataPagamento) {\n            const paymentDate = new Date(dataPagamento);\n            const diffDays = (paymentDate - now) / (1000 * 60 * 60 * 24);\n            if (diffDays <= DIFF_DAYS_PAYMENT) {\n                monthList.push(item);\n            }\n        }\n    }\n\n    year--;\n} while (monthList.length < 3 && year >= MIN_YEAR);\n\nmonthList.sort((a, b) => new Date(a[\"a:DataDoPagamento\"]) - new Date(b[\"a:DataDoPagamento\"]));\n\nreturn monthList.slice(-3);\n} catch (error) {\n    return error.message;\n}\n}\n\nasync function requestLG(body) {\n    const baseURL = `{{config.LGBaseUrl}}`\n    const URL = `${baseURL}/v1/ServicoDeDataDePagamento`;\n    const METHOD = 'POST';\n    const HEADERS = {\n        'Content-Type': 'text/xml',\n        'SOAPAction': `lg.com.br/api/v1/ServicoDeDataDePagamento/ConsultarListaInformacoesDaDataDePagamento`\n    }\n    const BODY = body;\n\n    const OPTIONS = {\n        method: METHOD,\n        headers: HEADERS,\n        body: BODY\n    }\n\n    try {\n        const response = await request.fetchAsync(URL, OPTIONS);\n        // const responseJson = await response.jsonAsync();\n\n        return response;\n        // return responseJson;\n    } catch (error) {\n        return error.message;\n    }\n}\n\nfunction buildBodyRequest(anoValidacao, escolhaId) {\n    try {\n        const codigoFolhaPagamento = escolhaId;\n\n        return `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v1=\"lg.com.br/api/v1\" xmlns:v11=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n    <v1:ConsultarListaInformacoesDaDataDePagamento>\n      <v1:filtro>\n        <v11:Ano>${anoValidacao}</v11:Ano>\n        <v11:Empresa>\n          <v11:Codigo>{{contact.extras.empresaId}}</v11:Codigo>\n        </v11:Empresa>\n        <v11:Folha>\n          <v11:Codigo>${codigoFolhaPagamento}</v11:Codigo>\n        </v11:Folha>\n        <v11:TipoConceito>2</v11:TipoConceito>\n      </v1:filtro>\n    </v1:ConsultarListaInformacoesDaDataDePagamento>\n  </soapenv:Body>\n</soapenv:Envelope>`;\n    } catch (error) {\n        return error.message;\n    }\n}\n\nfunction XMLConvert(xml) {\n    try {\n        let obj = {};\n        let tagStack = [];\n        let currentNode = obj;\n\n        // Regex patterns for XML parsing\n        const tagPattern = /<([^>]+)>/g;\n        let match;\n        let lastIndex = 0;\n\n        while ((match = tagPattern.exec(xml)) !== null) {\n            const tagContent = match[1];\n            const isEndTag = tagContent[0] === '/';\n\n            const textContent = xml.substring(lastIndex, match.index).trim();\n            if (textContent && tagStack.length > 0) {\n                const parentNode = tagStack[tagStack.length - 1];\n                if (!parentNode[\"_text\"]) {\n                    parentNode[\"_text\"] = textContent;\n                } else if (typeof parentNode[\"_text\"] === \"string\") {\n                    parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n                } else {\n                    parentNode[\"_text\"].push(textContent);\n                }\n            }\n\n            lastIndex = match.index + match[0].length;\n\n            if (isEndTag) {\n                tagStack.pop();\n                currentNode = tagStack[tagStack.length - 1] || obj;\n            } else {\n                const tagParts = tagContent.split(' ');\n                const tagName = tagParts[0];\n                const newNode = {};\n\n                if (currentNode[tagName] === undefined) {\n                    currentNode[tagName] = newNode;\n                } else if (Array.isArray(currentNode[tagName])) {\n                    currentNode[tagName].push(newNode);\n                } else {\n                    currentNode[tagName] = [currentNode[tagName], newNode];\n                }\n\n                if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                    tagStack.push(newNode);\n                    currentNode = newNode;\n                }\n            }\n        }\n\n        // Clean up _text keys\n        function cleanUp(obj) {\n            for (let key in obj) {\n                if (obj[key] && typeof obj[key] === \"object\") {\n                    if (obj[key]._text) {\n                        if (Object.keys(obj[key]).length === 1) {\n                            obj[key] = obj[key]._text;\n                        } else {\n                            obj[key].textValue = obj[key]._text;\n                            delete obj[key]._text;\n                        }\n                    } else if (Object.values(obj[key]).length === 0) {\n                        delete obj[key];\n                    }\n                    cleanUp(obj[key]);\n                }\n            }\n        }\n\n        cleanUp(obj);\n\n        return obj['s:Envelope']['s:Body'].ConsultarListaInformacoesDaDataDePagamentoResponse.ConsultarListaInformacoesDaDataDePagamentoResult['a:Retorno']['a:DataDePagamento']\n    } catch (error) {\n        return false\n    }\n}",
                        "inputVariables": [
                            "holeriteEscolha"
                        ],
                        "outputVariable": "jsonCalendarioPagamentos",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "41a76ded-aebd-469f-be6c-1f2786b7ec30",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listMonths'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n    try {\n        response = JSON.parse(response);\n\n        return response.map(item => {\n            const [year, month, day] = item[\"a:Referencia\"].split('T')[0].split('-');\n\n            return {\n                id: `${month}/${year}`,\n                title: `${month}/${year}`,\n                description: '',\n                active: true\n            }\n    })\n    } catch (error) {\n        return error.message;\n    }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'listMonths'] \"+String(err);}}",
                        "inputVariables": [
                            "jsonCalendarioPagamentos"
                        ],
                        "outputVariable": "listMonths",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTd-469f-be6c-1f2786b7ec30",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{listMonths}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "listMonths"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e672dc95-0c21-4d85-898e-6111ffb330ca",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isListValid'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(list) {\n\ttry {\n\t\treturn JSON.parse(list).length > 0;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'isListValid'] \"+String(err);}}",
                        "inputVariables": [
                            "listMonths"
                        ],
                        "outputVariable": "isListValid",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT1-4d85-898e-6111ffb330ca",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{isListValid}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "isListValid"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "4ee143c6-90ef-49b4-9bae-a175bc2d60b7",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "96e5e18c-0452-426e-890a-92b444358cf5",
            "root": false,
            "$title": "[API] Lista meses pagamento",
            "$position": {
                "top": "525px",
                "left": "1931px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ff20daef-1d32-4652-91f4-06976a5fcdd0": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "f401905b-026d-48cb-9ac3-4a9d4bb6ae0c",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "869b00dd-81be-411d-ba3f-b36c154ae4af",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "ff20daef-1d32-4652-91f4-06976a5fcdd0",
            "root": false,
            "$title": "[GO TO][Principal] Holerite",
            "$position": {
                "top": "1795px",
                "left": "750px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "6c58f46b-9751-44d2-8c1e-3fa463fcbdd0": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "46660b6b-d024-4e7e-9156-878fdf45aa9f",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "fb01067f-7114-4b68-aa10-8c5227165448",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "fb01067f-7114-4b68-aa10-8c5227165448",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "e1095e68-7aa5-4654-9d7f-fec8e3863169",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "1d41e79f-00be-4e56-bc82-3962fb39e36d",
                            "type": "text/plain",
                            "content": "{{message}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "1d41e79f-00be-4e56-bc82-3962fb39e36d",
                                "type": "text/plain",
                                "content": "{{message}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c37e4b38-3b34-4331-b2f1-3a2f4fdd086a",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "9c78ec66-fad2-4e80-86dd-cd8149cd0857",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "message",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isTeamView) {\n\ttry {\n\t\tisTeamView = JSON.parse(isTeamView);\n\n\t\tif(isTeamView){\n\t\t\treturn `NÃ£o identifiquei fÃ©rias cadastradas para esse colaborador, verifique se o mesmo jÃ¡ realizou solicitaÃ§Ã£o no sistema pelo <https://login.lg.com.br/saml/auto/neon?f=4F53562B706671356742366F7231385A33392B6663673D3D.|link do portal>`;\n\t\t} else {\n\t\t\treturn `NÃ£o identifiquei fÃ©rias cadastradas, verifique se jÃ¡ realizou solicitaÃ§Ã£o no sistema pelo <https://login.lg.com.br/saml/auto/neon?f=4F53562B706671356742366F7231385A33392B6663673D3D.|link do portal>`;\n\t\t}\n\t} catch(e) {\n\t\treturn e.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [message] \"+String(err);}}",
                        "inputVariables": [
                            "isTeamView"
                        ],
                        "outputVariable": "message",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT2-4e80-86dd-cd8149cd0857",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{message}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "message"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "6c58f46b-9751-44d2-8c1e-3fa463fcbdd0",
            "root": false,
            "$title": "Sem registro de fÃ©rias",
            "$position": {
                "top": "1755px",
                "left": "2614px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3926058c-3f9d-4fbb-913f-92af6ea8496c": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d8a5152e-1737-4b68-8a30-7ab8a3f559ab",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "4ee143c6-90ef-49b4-9bae-a175bc2d60b7",
                    "typeOfStateId": "state",
                    "$connId": "con_688",
                    "$id": "9583c148-0eb7-454c-9e68-d45b0c7d24f4",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "4ec70ca6-6e03-4801-8ecc-841b3862ecff",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listMonths'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run() {\n    try {\n        const now = new Date();  \n        mesAtual = now.getMonth()+1;\n        anoAtual = now.getFullYear();\n        \n        // CÃ¡lculo dos Ãºltimos 3 meses\n        const QUANTITY_MONTHS = 3;\n        const lastMonths = [];\n        for (let i = 0; i < QUANTITY_MONTHS; i++) {\n            let month = mesAtual - i;\n            let year = anoAtual;\n            if (month <= 0) {\n                month += 12;\n                year -= 1;\n            }\n            lastMonths.push({ month, year });\n        }\n        \n        // Preencher os itens com os Ãºltimos 3 meses em ordem\n        const itens = lastMonths.reverse().reduce((acc,{month, year}) => {\n            const optionInfo = `${month.toString().padStart(2, '0')}/${year}`;\n            acc.push({\n                title: optionInfo,\n                id: optionInfo,\n            });\n            \n            return acc;\n        }, []);\n\n        return itens;\n\n    } catch (e) {\n        return e.message;\n    }\n}",
                        "inputVariables": [],
                        "outputVariable": "listMonths",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "3926058c-3f9d-4fbb-913f-92af6ea8496c",
            "root": false,
            "$title": "Lista meses estÃ¡ticos",
            "$position": {
                "top": "287px",
                "left": "1700px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "4ceeb9c3-a5e5-4b5a-9468-352fb3ddf525": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "1aedd8bc-1f04-417c-b074-747e476cc20d",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#1EA1FF",
                    "label": "Redirect",
                    "id": "blip-tag-8d1fe934-661c-b704-d210-3a2fcdc44392",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "4ceeb9c3-a5e5-4b5a-9468-352fb3ddf525",
            "root": false,
            "$title": "[REDIRECT] Main",
            "$position": {
                "top": "617.571px",
                "left": "3337.43px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "0484f2cc-a568-4f79-ad4e-ca69cd456a01",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "700a024c-357d-4011-bdfb-e30ea7584f5d",
                    "typeOfStateId": "state",
                    "$connId": "con_693",
                    "$id": "3fad452c-b552-4360-bc48-51c7d65d88e4",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Start"
                            ],
                            "variable": "cameFromRegex"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "280fb914-9871-4f19-b8a7-eb1d81c71849",
                    "typeOfStateId": "state",
                    "$connId": "con_698",
                    "$id": "11345889-56f8-4691-a809-8cf53241c521",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Exceptions"
                            ],
                            "variable": "cameFromRegex"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "ce1dceb6-967d-4edf-a3ae-ac87c74c986b",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isRegexIntent'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "const INTENTS = [\n    { intent: \"saudacao\", patterns: [/^oi$/, /^ola$/, /^e(a[iy])$/, /^bom(dia|tarde|noite)$/, /^salve$/, /^falae?$/] },\n    { intent: \"despedida\", patterns: [/^(concluir)$/, /^(encerra(r|mento))$/, /^(tchau)/, /^(quero)?(sair)$/, /^(ate)(logo|mais)$/, /^(falou)$/, /^((quer((o)|(ia)))|(pode))?((fechar)|(encerrar)|(finalizar))(a)?(conversa)?$/, /^(ateh|flw|vlw)$/, /(ate)(logo)$/] },\n    { intent: \"ath\", patterns: [/^(ath)$/, /^(atend((imento)|(ente)))?(humano)$/, /^(eu)?(preciso)?(de)?(ajuda|suporte)/, /(quero)(falar|conversar)(com)?(um)?(atendente)$/] },\n    { intent: \"espelho_ponto\", patterns: [/^(espelho)(de)?(ponto)$/, /(ver)?(resumo|marcac(ao|oes))(\\w*)?(ponto)$/, /(pontos?)(do)(mes)$/] },\n    { intent: \"marcar_ponto\", patterns: [/^((bater)|(marca(cao|r))|(registrar))(meu|do|de|o)?(ponto)/, /(bater)(meu)?(ponto)/] },\n    { intent: \"banco_de_horas\", patterns: [/^(saldo)((no|d[eo])(banco))?(de)(horas)$/, /(quantas)?(horas)(\\w+)?(no|de)(banco)/, /^(horas)(extras)$/, /^(validar)(meu|minhas?)?(banco|saldo)(de)(ho?ra?s?)/, /^(horas?)(extras?)(\\w*)?(tenho|possuo)$/] },\n    { intent: \"menu_ponto\", patterns: [/^(((menu)|(falar))?((de)|(sobre))?)(ponto)$/, /(opcoes|informacoes)?(de|para)?(ponto)$/] },\n    { intent: \"aviso_ferias\", patterns: [/^(aviso)(d[ea]s?)?(minhas?)?(ferias)$/, /^notificar(ferias)$/, /(como|preciso|quero)(posso)?(notificar|avis(o|ar))(\\w*)?(ferias)/] },\n    { intent: \"pagamento_ferias\", patterns: [/^(pagamento)(d[ea]s?)?(minhas?)?(ferias)$/, /(quando)(vou)?(receb(o|er))(minhas?)?(ferias)$/] },\n    { intent: \"marcar_ferias\", patterns: [/^(solicitar|agendar|marca(r|cao))(d[ea]s?)?(minhas?)?(ferias)$/, /^pedir(ferias)$/] },\n    { intent: \"recibo_ferias\", patterns: [/^(recibo)(d[ea]s?)?(minhas?)?(ferias)$/, /(comprovante)(das?)?(minhas?)?(ferias)$/] },\n    { intent: \"saldo_ferias\", patterns: [/^(saldo)(d[ea]s?)?(minhas?)?(ferias)$/, /(quantos)(dias)(ainda)?(posso|tenho)?(tirar)?(de)?(ferias)/] },\n    { intent: \"ferias\", patterns: [/^(menu)?(de)?(ferias)$/, /(informacoes)(de|sobre)(ferias)$/, /(funcionam?)(as)?(minhas?)(ferias)$/] },\n    { intent: \"sugestao\", patterns: [/^(dar)?(uma)?(sugest[aÃ£]o)$/, /^avalia(r|cao)$/, /^deixar(opiniao)$/, /(como|posso)(d(eix)?ar)(uma?)(ideia|feedback)$/] },\n    { intent: \"dados_cadastrais\", patterns: [/^((me)(mostra)|(quero)?(ver)?)(meus)?(dados)(de)?(cadastr(o|ais))$/, /(minhas)(informacoes)(pessoais)$/] },\n    { intent: \"holerite\", patterns: [/^(onde)?(posso|quero)?(baix(o|ar)|acessar|ve(jo|r))?(meu)?(holerite|contracheque|(quanto)(vou)(receber))/, /^(extrato)?(salario)(do)?(mes)?/, /^((me)(envia|manda)(meu)?(holerite|contracheque))$/] },\n    { intent: \"calendario_pagamento_holerite\", patterns: [/^(quero)?((saber)(mais)|ver)?(meu|minha|o)?(calendario|data)(de)?(pa?ga?m?e?n?to?s?)$/, /^(quando)(recebo|cai)(\\w*)?(salario)$/, /(data)(\\w*)?(proximo)(pa?ga?m?e?n?to?)/] },\n    { intent: \"dados_de_folha\", patterns: [/^(onde)?(posso|quero)?(ver|acessar)?(meus|minha)?((dados)(d[ae])?(folha))|((folha)(de)(pa?ga?m?e?n?to?s?))$/, /^(consult(o|ar))(meu|minha)?(contracheque|(folha)(\\w*)?(pa?ga?me?nto?))$/] },\n];\n\nfunction run(input) {\n    if(input.includes(\"cameFrom_aifaq_regexIntent\")) {\n        input = input.split(\"cameFrom_aifaq_regexIntent:\")[1];\n    }\n\n    for (const { intent, patterns } of INTENTS) {\n        if (patterns.some((regex) => regex.test(textNormalizer(input)))) {\n            return intent;\n        }\n    }\n    return false;\n}\n\nfunction textNormalizer(dataToNormalize) {\n    return dataToNormalize\n        .normalize(\"NFD\")\n        .replace(/([^ÂªÂºa-zA-Z0-9]+)/g, \"\")\n        .toLowerCase();\n}",
                        "inputVariables": [
                            "input.content"
                        ],
                        "outputVariable": "isRegexIntent",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "90a5b753-05fd-4016-b7f5-a49ffca7b00a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39",
            "root": false,
            "$title": "Validar intenÃ§Ã£o RegEx",
            "$position": {
                "top": "288px",
                "left": "4590px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "aa0f724d-64e8-4c1b-bcf9-9484da74dacf": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "7b4cf57a-4f65-43b0-b8a8-46171e570c18",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "0fe2d6ff-bad1-4351-8c0f-0298c31fe857",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "0fe2d6ff-bad1-4351-8c0f-0298c31fe857",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "150b040d-65dd-4d92-84d5-706caa8408c1",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "9665e489-58d9-4c84-a1ab-2c62c8679723",
                            "type": "text/plain",
                            "content": "AtÃ© mais! ðŸ‘‹",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "9665e489-58d9-4c84-a1ab-2c62c8679723",
                                "type": "text/plain",
                                "content": "AtÃ© mais! ðŸ‘‹"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c56e1f66-c8ed-4cf8-9cca-40fca1afc8c1",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                }
            ],
            "id": "aa0f724d-64e8-4c1b-bcf9-9484da74dacf",
            "root": false,
            "$title": "Intent: Despedida",
            "$position": {
                "top": "257px",
                "left": "5687px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "700a024c-357d-4011-bdfb-e30ea7584f5d": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "9d878c43-6961-4cde-87c7-85af83daa122",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "aa0f724d-64e8-4c1b-bcf9-9484da74dacf",
                    "typeOfStateId": "state",
                    "$connId": "con_703",
                    "$id": "b107d890-0c5c-4513-8e79-f1a03364790f",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "despedida"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "e1b84b25-ebaa-448c-9f6b-206cbad8e3b7",
                    "typeOfStateId": "state",
                    "$connId": "con_708",
                    "$id": "12db63e8-3475-45b6-8e6f-133bb7c859cc",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "saudacao"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "655d6223-fc03-4cfc-8efa-1ed822bd8dcb",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'cameFromRegex' to 'null'",
                    "$invalid": false,
                    "settings": {
                        "variable": "cameFromRegex",
                        "value": "null"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "90a5b753-05fd-4016-b7f5-a49ffca7b00a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "700a024c-357d-4011-bdfb-e30ea7584f5d",
            "root": false,
            "$title": "Valida por origem: Start",
            "$position": {
                "top": "215px",
                "left": "4854px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "140708a7-0021-461f-8234-a2dbd4e5f9dc": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "215fe389-9655-4eb2-86e8-c0730f550293",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fac25e0e-89c9-47f2-a589-6bdc4bf3dfe6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'cameFromRegex' to 'Start'",
                    "$invalid": false,
                    "settings": {
                        "variable": "cameFromRegex",
                        "value": "Start"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "140708a7-0021-461f-8234-a2dbd4e5f9dc",
            "root": false,
            "$title": "[GO TO][Start] Validar intenÃ§Ã£o Regex",
            "$position": {
                "top": "262px",
                "left": "794px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "280fb914-9871-4f19-b8a7-eb1d81c71849": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "9d878c43-6961-4cde-87c7-85af83daa122",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "aa0f724d-64e8-4c1b-bcf9-9484da74dacf",
                    "typeOfStateId": "state",
                    "$connId": "con_713",
                    "$id": "b107d890-0c5c-4513-8e79-f1a03364790f",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "despedida"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "0d7642fc-8910-42b3-95d9-d8c60211fc2d",
                    "typeOfStateId": "state",
                    "$connId": "con_718",
                    "$id": "73f01670-c00f-4ce7-b2a1-e6a6aeabaad2",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "ath"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "92bca793-b768-41da-a723-05ec70534f83",
                    "typeOfStateId": "state",
                    "$connId": "con_723",
                    "$id": "f9d83f26-5edc-4214-b57e-53c398dd2d08",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ],
                            "variable": "isRegexIntent"
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "dasfasdfsdgad"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f438184d-19ea-41cd-b75a-a599fbbe4da9",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'cameFromRegex' to 'null'",
                    "$invalid": false,
                    "settings": {
                        "variable": "cameFromRegex",
                        "value": "null"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "90a5b753-05fd-4016-b7f5-a49ffca7b00a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "280fb914-9871-4f19-b8a7-eb1d81c71849",
            "root": false,
            "$title": "Valida por origem: Exceptions",
            "$position": {
                "top": "363px",
                "left": "4850px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2445bfcc-a50e-4c2e-adc7-176f78a0f1bc": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "215fe389-9655-4eb2-86e8-c0730f550293",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fac25e0e-89c9-47f2-a589-6bdc4bf3dfe6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'cameFromRegex' to 'Exceptions'",
                    "$invalid": false,
                    "settings": {
                        "variable": "cameFromRegex",
                        "value": "Exceptions"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "2445bfcc-a50e-4c2e-adc7-176f78a0f1bc",
            "root": false,
            "$title": "[GO TO][Exceptions] Validar intenÃ§Ã£o Regex",
            "$position": {
                "top": "399.778px",
                "left": "3587.33px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c1af5124-9ac3-44d9-a06a-45947b343507": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "2577a8b2-b869-477b-90ec-92284981be60",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "2a6325bc-821f-43c1-8948-8b8ce2b9c587",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "2a6325bc-821f-43c1-8948-8b8ce2b9c587",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "4f2299d7-a23e-4f87-9210-c69d55c9347e",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "9c10a649-b24c-40d1-a82d-adef211eceec",
                            "type": "text/plain",
                            "content": "Estamos quase lÃ¡! Nossa equipe estÃ¡ finalizando os detalhes para realizar o pagamento. A partir de 26/03/2025, vocÃª poderÃ¡ consultar o seu P4P aqui! \n\nNesta <https://sites.google.com/neon.com.br/biblioteca/jornada-neowner/desenvolvimento/reconhecimento/p4p|pÃ¡gina> da biblioteca, vocÃª pode acessar o simulador, alÃ©m de encontrar diversas informaÃ§Ãµes sobre o P4P.",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "9c10a649-b24c-40d1-a82d-adef211eceec",
                                "type": "text/plain",
                                "content": "Estamos quase lÃ¡! Nossa equipe estÃ¡ finalizando os detalhes para realizar o pagamento. A partir de 26/03/2025, vocÃª poderÃ¡ consultar o seu P4P aqui! \n\nNesta <https://sites.google.com/neon.com.br/biblioteca/jornada-neowner/desenvolvimento/reconhecimento/p4p|pÃ¡gina> da biblioteca, vocÃª pode acessar o simulador, alÃ©m de encontrar diversas informaÃ§Ãµes sobre o P4P."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "84df9029-3a28-4004-b4d6-a35779ebaa80",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c1af5124-9ac3-44d9-a06a-45947b343507",
            "root": false,
            "$title": "P4P nÃ£o encontrado",
            "$position": {
                "top": "687px",
                "left": "1931px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "8efe123b-14d0-427a-8165-7e865e087ab2": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "46d7ade9-689c-4712-b624-38da229b150a",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "8efe123b-14d0-427a-8165-7e865e087ab2",
            "root": false,
            "$title": "[GO TO][Start] Algo mais",
            "$position": {
                "top": "121px",
                "left": "794px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "0c495718-1cd2-4f37-93eb-4be55a5272da": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4be2f73f-2901-4e2a-8a53-5358f9503646",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "bb7c1385-bc4a-4d6f-b309-42aad13b767e",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "faq"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#5bc0eb",
                    "label": "Redirect",
                    "id": "DWNT0d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "0c495718-1cd2-4f37-93eb-4be55a5272da",
            "root": false,
            "$title": "Redirect FAQ",
            "$position": {
                "top": "285px",
                "left": "542px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "0d7642fc-8910-42b3-95d9-d8c60211fc2d": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "1817242e-c632-4dc6-8145-e54e74f56061",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "1eccacd1-77f2-4ab5-98f0-dc948d1291dc",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "1eccacd1-77f2-4ab5-98f0-dc948d1291dc",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "14ad14de-f937-4d8e-bb60-9278bbe3f52e",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "e74002a0-d281-4f97-9de5-3bfd71a6c1ba",
                            "type": "text/plain",
                            "content": "Certo, entendi que precisa de suporte.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "e74002a0-d281-4f97-9de5-3bfd71a6c1ba",
                                "type": "text/plain",
                                "content": "Certo, entendi que precisa de suporte."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "5f9b372a-c2e4-43c3-b21d-e2d12a2319fd",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "c742c3a8-b3e2-467b-920f-2647ae09ebf3",
                    "typeOfStateId": "state",
                    "$connId": "con_728",
                    "$id": "44676f7a-13ab-48cb-a5b0-e03f7d66508d",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "edd72cf8-183e-496e-9272-09354687d165",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "'Time' to 'false'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "false"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "0d7642fc-8910-42b3-95d9-d8c60211fc2d",
            "root": false,
            "$title": "Intent: Ath",
            "$position": {
                "top": "380px",
                "left": "5686px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "c742c3a8-b3e2-467b-920f-2647ae09ebf3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c6e8e9b0-f097-4e69-8961-2ff3c12e9fca",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "c742c3a8-b3e2-467b-920f-2647ae09ebf3",
            "root": false,
            "$title": "[GO TO][Intent] Ath - Default",
            "$position": {
                "top": "368px",
                "left": "5888px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "9f45ebdb-f529-488f-8e5e-20106ccc892b": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "ddd0ff07-ad98-462f-b7b6-30bc5a0224b2",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "15d5f408-9f4b-4312-b00d-82fad2749bc6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Ponto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "3a4c15fc-b945-46e9-8c29-8c893541dd4f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Ponto'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Ponto"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "95748d1a-8abc-41c7-a8d5-8422af10aa7b",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "7610e3a9-687e-4811-932f-7ebf008c61e2",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "9f45ebdb-f529-488f-8e5e-20106ccc892b",
            "root": false,
            "$title": "Intent: Ponto",
            "$position": {
                "top": "518px",
                "left": "5686px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "72db954c-7595-42de-8c3c-00813d133f9c": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{cpfErroPersistenteBuild@type}}",
                            "rawContent": "{{cpfErroPersistenteBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_733",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "cpfErroPersistente:tentar_novamente"
                            ],
                            "variable": "cpfErroPersistenteEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "d51fa683-357a-4187-8f15-01f54a1545de"
                },
                {
                    "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
                    "typeOfStateId": "state",
                    "$connId": "con_738",
                    "$id": "4d372f2a-1236-46ce-94cc-8cf87e7263a8",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "cpfErroPersistente:pops"
                            ],
                            "variable": "cpfErroPersistenteEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'cpfErroPersistenteOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"cpfErroPersistente:tentar_novamente\",\n\t\t\t\t\ttitle: \"Tentar novamente\",\n\t\t\t\t\ttitleShort: \"Tentar novamente\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"cpfErroPersistente:pops\",\n\t\t\t\t\ttitle: \"Falar com Pops\",\n\t\t\t\t\ttitleShort: \"Falar com Pops\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'cpfErroPersistenteOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "cpfErroPersistenteOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{cpfErroPersistenteOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "cpfErroPersistenteOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'cpfErroPersistenteBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Seu usuÃ¡rio do Slack nÃ£o parece corresponder ao CPF informado. Escolha uma das opÃ§Ãµes abaixo: ðŸ‘‡`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'cpfErroPersistenteBuild'] \"+String(err);}}",
                        "inputVariables": [
                            "DWNT",
                            "cpfErroPersistenteOptions"
                        ],
                        "outputVariable": "cpfErroPersistenteBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{cpfErroPersistenteBuild}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "cpfErroPersistenteBuild"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"cpfErroPersistenteEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'cpfErroPersistenteEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "cpfErroPersistenteOptions"
                        ],
                        "outputVariable": "cpfErroPersistenteEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{cpfErroPersistenteEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "cpfErroPersistenteEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{cpfErroPersistenteEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "cpfErroPersistenteEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "cpfErroPersistenteEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "cpfErroPersistenteEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "cpfErroPersistenteEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "72db954c-7595-42de-8c3c-00813d133f9c",
            "root": false,
            "$title": "CPF erro persistente",
            "$position": {
                "top": "594px",
                "left": "3587px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d51fa683-357a-4187-8f15-01f54a1545de": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "9762db64-295d-45d5-8be5-1150d4912ead",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "06d43781-32fa-4f7a-a346-7d24b63c0f3e",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] PRA ONDE FOI",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.previous.name}}] Pra onde foi",
                        "action": "{{state.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "5b766e6a-17a8-4b70-b4c9-c707c5191d2c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] DE ONDE VEIO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] De onde veio",
                        "action": "{{state.previous.name}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ddf0754b-23aa-4eef-938c-428d91412614",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[TRACKING] HORA DE ACESSO",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "id": "{{contact.identity}}"
                        },
                        "category": "[{{state.name}}] Hora de Acesso",
                        "action": "{{calendar.hour}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "df84d682-e45d-41f3-8f00-2975857c8134",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "d51fa683-357a-4187-8f15-01f54a1545de",
            "root": false,
            "$title": "[GO TO][Erro CPF] Pergunta CPF",
            "$position": {
                "top": "750px",
                "left": "3587px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "90a5b753-05fd-4016-b7f5-a49ffca7b00a": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "58099d6c-2435-4d59-8fd9-a27303713ab2",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "adb63186-7acd-4c05-9c0c-d6e1452f28f5",
                    "typeOfStateId": "state",
                    "$connId": "con_743",
                    "$id": "e288c7c9-48b5-4ffc-8d5a-40c0b008e100",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ],
                            "variable": "isManager"
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "isRegexIntent",
                            "values": [
                                "marcar_ponto"
                            ]
                        },
                        {
                            "source": "context",
                            "variable": "isTeamView",
                            "comparison": "equals",
                            "values": [
                                "true"
                            ]
                        },
                        {
                            "source": "context",
                            "comparison": "equals",
                            "variable": "colaboradorMarcaPonto",
                            "values": [
                                "false"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "f7cb5d75-f715-4258-818c-6448142d5382",
                    "typeOfStateId": "state",
                    "$connId": "con_748",
                    "$id": "1e0b357a-aba1-43de-a7fd-d0bfae3c6283",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "colaboradorSelecionado"
                        },
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "colaboradorSelecionado",
                            "values": [
                                "false"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "6536db58-63c4-4f29-9936-d5eece83acb0",
                    "typeOfStateId": "state",
                    "$connId": "con_753",
                    "$id": "cb4e1c03-9208-425e-b2cc-0ce06d35c00a",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "90a5b753-05fd-4016-b7f5-a49ffca7b00a",
            "root": false,
            "$title": "[Valida] Regras para acessar intenÃ§Ã£o",
            "$position": {
                "top": "628px",
                "left": "4885px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f7cb5d75-f715-4258-818c-6448142d5382": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "0752bd8f-0465-46a0-8d02-79521abf72e6",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "9f45ebdb-f529-488f-8e5e-20106ccc892b",
                    "typeOfStateId": "state",
                    "$connId": "con_758",
                    "$id": "a5987453-f9eb-44d7-a3ff-00fe0e50c465",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menu_ponto"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "0752e4de-36f9-4f38-af5d-a179f2e99ec4",
                    "typeOfStateId": "state",
                    "$connId": "con_763",
                    "$id": "930c0dc8-0521-4c4e-8ac9-11e97faa3e70",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "espelho_ponto"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "fd379cd7-b845-40b7-9571-bbf06ad803e6",
                    "typeOfStateId": "state",
                    "$connId": "con_768",
                    "$id": "edacf121-244e-41ae-ad66-9f05bf6c622b",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "marcar_ponto"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "1945f330-f75a-459c-a399-c595622072c4",
                    "typeOfStateId": "state",
                    "$connId": "con_773",
                    "$id": "4814c448-d886-4333-81dd-ad621f9a6575",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "banco_de_horas"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "d4d74ab0-b802-4aec-b309-a5fd7dcad4e9",
                    "typeOfStateId": "state",
                    "$connId": "con_778",
                    "$id": "b69091e0-fc6f-4ff9-8375-7915d9721240",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "5e7e79dd-17f2-45e0-af72-0e3486212580",
                    "typeOfStateId": "state",
                    "$connId": "con_783",
                    "$id": "8d51ecfa-3bbe-4820-9101-d7e4477a9f34",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "aviso_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "5c06fa46-51a2-49b7-872e-47565b91e652",
                    "typeOfStateId": "state",
                    "$connId": "con_788",
                    "$id": "52aa024a-6d26-43ec-b2cd-7eaaf8b576fb",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "saldo_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "dbe1a863-b055-4fa0-8f87-69d2bda6bf38",
                    "typeOfStateId": "state",
                    "$connId": "con_793",
                    "$id": "be8a0eca-1223-4e9a-b34f-e0e36710293c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "pagamento_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "56d005c6-a4f6-4cf4-a3d0-e0f9f250f4b2",
                    "typeOfStateId": "state",
                    "$connId": "con_798",
                    "$id": "5e66f482-3b97-45bc-b79f-82f00cd17c95",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "marcar_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "f5de0deb-e4b4-4662-80c1-cfe2c88aadc6",
                    "typeOfStateId": "state",
                    "$connId": "con_803",
                    "$id": "ee21c446-9071-44cc-ab34-3b3c9c31c93f",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "recibo_ferias"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "1a4c8d4e-3de8-4429-8f71-458f12047680",
                    "typeOfStateId": "state",
                    "$connId": "con_808",
                    "$id": "111488c7-79b4-46d2-b619-dd148314b211",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "sugestao"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "edf245c0-d576-4219-a7f8-a3a5bc7197c3",
                    "typeOfStateId": "state",
                    "$connId": "con_813",
                    "$id": "f7c0a59b-ea96-46cb-927f-759c937cef7a",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dados_cadastrais"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "de381c4f-a8fc-49f6-8484-3ae61ef26d39",
                    "typeOfStateId": "state",
                    "$connId": "con_818",
                    "$id": "e8f3af8f-5482-4a8b-9aea-4771c73e1b99",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Holerite"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "e19f9c36-d2d1-4320-8b2e-f7f457000a3d",
                    "typeOfStateId": "state",
                    "$connId": "con_823",
                    "$id": "d92bde94-f2d5-4115-a22c-fc08d1bccae4",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "calendario_pagamento_holerite"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "f7dfbd78-0350-4d0e-a3f2-805b1c447437",
                    "typeOfStateId": "state",
                    "$connId": "con_828",
                    "$id": "d18ba592-db45-4c81-bc0e-f030055f38b6",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "dados_de_folha"
                            ],
                            "variable": "isRegexIntent"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "873f3d80-74b5-44db-9287-f2c95c660216",
                    "typeOfStateId": "state",
                    "$connId": "con_833",
                    "$id": "dd470b15-b6bf-486a-934d-1a5e0cb285a8",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "regular-error",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "f7cb5d75-f715-4258-818c-6448142d5382",
            "root": false,
            "$title": "[Valida] Intent Regex",
            "$position": {
                "top": "639px",
                "left": "5120px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "6536db58-63c4-4f29-9936-d5eece83acb0": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "38fba4f9-2dce-443d-91b9-1712e8688fb4",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "ac7d34b2-f9e8-4664-9c69-14fd19ca8292",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "ac7d34b2-f9e8-4664-9c69-14fd19ca8292",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "79f310ce-9b11-45e9-9a89-0b50bfb7b37b",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "91341099-44f4-4fa5-84c4-1bc859c570d3",
                            "type": "text/plain",
                            "content": "Desculpe, mas ainda nÃ£o tenho informaÃ§Ã£o sobre quem gostaria de conversar.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "91341099-44f4-4fa5-84c4-1bc859c570d3",
                                "type": "text/plain",
                                "content": "Desculpe, mas ainda nÃ£o tenho informaÃ§Ã£o sobre quem gostaria de conversar."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "92bb8257-b28e-46ca-8423-036507cd23b5",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "welcome",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "6536db58-63c4-4f29-9936-d5eece83acb0",
            "root": false,
            "$title": "Colaborador nÃ£o selecionado",
            "$position": {
                "top": "801px",
                "left": "4885px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "0752e4de-36f9-4f38-af5d-a179f2e99ec4": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "8ea8034e-44d0-414a-ba6c-b6fd36a2b41a",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "ab533be0-bd38-44ee-8d74-86011a866554",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Ponto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "91571601-a138-4064-bbe9-8e1bf2057ee7",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Ponto'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Ponto"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "d6cc8d17-22f7-4cbe-96a6-ab75ba33cebb",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "80ffe2e1-ce80-45d2-ae4c-73f508f8884a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "0752e4de-36f9-4f38-af5d-a179f2e99ec4",
            "root": false,
            "$title": "Intent: Espelho de ponto",
            "$position": {
                "top": "523px",
                "left": "6249px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "fd379cd7-b845-40b7-9571-bbf06ad803e6": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "86c57fe7-652f-4fa7-a6d5-d81993a16167",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "cf316e6a-1cfa-4508-8145-daaa9da9962f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Ponto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "6bee3260-3c51-41f9-aedd-042a9dfeabb4",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Ponto'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Ponto"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "e8faaec6-0911-43fe-ae89-1656f797175a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c249de73-192a-4e74-8fd6-426d26e8aba6",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "fd379cd7-b845-40b7-9571-bbf06ad803e6",
            "root": false,
            "$title": "Intent: Marcar ponto",
            "$position": {
                "top": "522px",
                "left": "6061px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "adb63186-7acd-4c05-9c0c-d6e1452f28f5": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "6c780690-708d-45b4-8864-6389f070ee9f",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "161297b7-7829-4587-a260-8a90f7762db0",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "161297b7-7829-4587-a260-8a90f7762db0",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "159b73af-c314-4f7f-8cf9-403294a57697",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "3980af6d-42f5-45e3-8bc8-899ab8755ffc",
                            "type": "text/plain",
                            "content": "Como gestor, vocÃª tem outras possibilidades alÃ©m de 'Marcar ponto'.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "3980af6d-42f5-45e3-8bc8-899ab8755ffc",
                                "type": "text/plain",
                                "content": "Como gestor, vocÃª tem outras possibilidades alÃ©m de 'Marcar ponto'."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "19833ff7-fc83-4271-b126-82c4b18c7116",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{error@return.state}}",
                    "typeOfStateId": "variable",
                    "$id": "b015cb08-cbf1-4b12-ad7a-4ac17a67ec40",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "error"
                        },
                        {
                            "source": "context",
                            "variable": "error@return.state",
                            "comparison": "notEquals",
                            "values": [
                                "null"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "adb63186-7acd-4c05-9c0c-d6e1452f28f5",
            "root": false,
            "$title": "Colaborador gestor",
            "$position": {
                "top": "640px",
                "left": "4646px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "1945f330-f75a-459c-a399-c595622072c4": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "b990e635-fd8e-4ede-8d65-8b8ab0970585",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2868c63a-4b8b-4e7a-98d9-ae1b6e01031d",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Ponto"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "0cba461a-8fa1-4f68-a6a4-03b8ee120dbe",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Ponto'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Ponto"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "0d94778f-db49-4c79-829c-cbb2fa7552d4",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "d275a4c0-4bc9-41f5-8561-bdb58bfbde80",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "1945f330-f75a-459c-a399-c595622072c4",
            "root": false,
            "$title": "Intent: Banco de horas",
            "$position": {
                "top": "521px",
                "left": "5874px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d4d74ab0-b802-4aec-b309-a5fd7dcad4e9": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "d07b37a4-f32e-4f90-9a24-ffe2becc2989",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "d4d74ab0-b802-4aec-b309-a5fd7dcad4e9",
            "root": false,
            "$title": "Intent: FÃ©rias",
            "$position": {
                "top": "651px",
                "left": "5688px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "5e7e79dd-17f2-45e0-af72-0e3486212580": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d1898684-0002-467f-ad5d-504376f183de",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2bc5b143-307d-4689-813e-8f93180cabbe",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "549f0a58-e6f4-40b6-96b2-632d82e4328f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "b47130a2-ac22-4ec6-b455-bbb0e207b4c1",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "c91973cf-38f3-4149-964d-2f7446405825",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "5e7e79dd-17f2-45e0-af72-0e3486212580",
            "root": false,
            "$title": "Intent: Aviso de fÃ©rias",
            "$position": {
                "top": "651.75px",
                "left": "5885.25px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "92bca793-b768-41da-a723-05ec70534f83": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "349095f7-96bc-4c0f-876d-6f77428784dd",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "regular-error",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "92bca793-b768-41da-a723-05ec70534f83",
            "root": false,
            "$title": "[GO TO] DWNT Erro PadrÃ£o",
            "$position": {
                "top": "405px",
                "left": "5083px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e1b84b25-ebaa-448c-9f6b-206cbad8e3b7": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "0b9f0b90-34a0-44cb-9c65-923b4b9c1ca4",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "ff8370c1-1c81-4b20-9097-9e002d0deca7",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "e1b84b25-ebaa-448c-9f6b-206cbad8e3b7",
            "root": false,
            "$title": "[GO TO] Welcome back",
            "$position": {
                "top": "205px",
                "left": "5082px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "5c06fa46-51a2-49b7-872e-47565b91e652": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d1898684-0002-467f-ad5d-504376f183de",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2bc5b143-307d-4689-813e-8f93180cabbe",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "549f0a58-e6f4-40b6-96b2-632d82e4328f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "b47130a2-ac22-4ec6-b455-bbb0e207b4c1",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "d07b37a4-f32e-4f90-9a24-ffe2becc2989",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "5c06fa46-51a2-49b7-872e-47565b91e652",
            "root": false,
            "$title": "Intent: Saldo de fÃ©rias",
            "$position": {
                "top": "650px",
                "left": "6082px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "dbe1a863-b055-4fa0-8f87-69d2bda6bf38": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d1898684-0002-467f-ad5d-504376f183de",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2bc5b143-307d-4689-813e-8f93180cabbe",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "549f0a58-e6f4-40b6-96b2-632d82e4328f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "b47130a2-ac22-4ec6-b455-bbb0e207b4c1",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "475597e1-6113-4f74-90e4-4711512ec6fd",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "dbe1a863-b055-4fa0-8f87-69d2bda6bf38",
            "root": false,
            "$title": "Intent: Pagamento de fÃ©rias",
            "$position": {
                "top": "647px",
                "left": "6270px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "56d005c6-a4f6-4cf4-a3d0-e0f9f250f4b2": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d1898684-0002-467f-ad5d-504376f183de",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2bc5b143-307d-4689-813e-8f93180cabbe",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "549f0a58-e6f4-40b6-96b2-632d82e4328f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "b47130a2-ac22-4ec6-b455-bbb0e207b4c1",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "e0807109-fdb0-42a6-be1d-73a1a82bf9a6",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "56d005c6-a4f6-4cf4-a3d0-e0f9f250f4b2",
            "root": false,
            "$title": "Intent: Marcar fÃ©rias",
            "$position": {
                "top": "644px",
                "left": "6467px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f5de0deb-e4b4-4662-80c1-cfe2c88aadc6": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "d1898684-0002-467f-ad5d-504376f183de",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "2bc5b143-307d-4689-813e-8f93180cabbe",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "FÃ©rias"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "549f0a58-e6f4-40b6-96b2-632d82e4328f",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'FÃ©rias'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "FÃ©rias"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "b47130a2-ac22-4ec6-b455-bbb0e207b4c1",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "475597e1-6113-4f74-90e4-4711512ec6fd",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f5de0deb-e4b4-4662-80c1-cfe2c88aadc6",
            "root": false,
            "$title": "Intent: Recibo fÃ©rias",
            "$position": {
                "top": "646px",
                "left": "6659px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "1a4c8d4e-3de8-4429-8f71-458f12047680": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "SugestÃ£o"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'SugestÃ£o'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "SugestÃ£o"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1e092268-d9b5-4a45-930f-6abe3c80e787",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "1a4c8d4e-3de8-4429-8f71-458f12047680",
            "root": false,
            "$title": "Intent: SugestÃ£o",
            "$position": {
                "top": "1011px",
                "left": "5689px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "edf245c0-d576-4219-a7f8-a3a5bc7197c3": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Dados cadastrais"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Dados cadastrais'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "SugestÃ£o"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "f18ad063-e98c-4489-a19d-e001393e1a57",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "edf245c0-d576-4219-a7f8-a3a5bc7197c3",
            "root": false,
            "$title": "Intent: Dados cadastrais",
            "$position": {
                "top": "875px",
                "left": "5686px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "de381c4f-a8fc-49f6-8484-3ae61ef26d39": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Holerite"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Holerite'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Holerite"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "869b00dd-81be-411d-ba3f-b36c154ae4af",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "de381c4f-a8fc-49f6-8484-3ae61ef26d39",
            "root": false,
            "$title": "Intent: Holerite",
            "$position": {
                "top": "773px",
                "left": "5684px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e19f9c36-d2d1-4320-8b2e-f7f457000a3d": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Holerite"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Holerite'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Holerite"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "13102dcc-d2a8-48d3-a308-5b62f1670021",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e19f9c36-d2d1-4320-8b2e-f7f457000a3d",
            "root": false,
            "$title": "Intent: Calendario pagamento",
            "$position": {
                "top": "768px",
                "left": "5888px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f7dfbd78-0350-4d0e-a3f2-805b1c447437": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "473bb7d3-1e2c-47f0-819c-5e8bf6fee056",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "f8826173-bfc3-425c-8dfc-550799c9d366",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'subfluxo'",
                    "$invalid": false,
                    "settings": {
                        "variable": "subfluxo",
                        "value": "Holerite"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "f1731b6f-66ba-432e-9f1a-5db8a5330d68",
                    "$typeOfContent": "",
                    "type": "MergeContact",
                    "$title": "SET 'Time' to 'Holerite'",
                    "$invalid": false,
                    "settings": {
                        "extras": {
                            "Time": "Holerite"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "60075a7c-45ae-4e6b-b1ab-d095154608a0",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "Assunto iniciado",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "Assunto iniciado",
                        "action": "{{subfluxo}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "subfluxo"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c2100ba-aedd-4bd5-8584-850c6455a20c",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#C3423F",
                    "label": "MergeContact",
                    "id": "DWNTcc79-1eae-4759-9316-cd22153acf3f",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f7dfbd78-0350-4d0e-a3f2-805b1c447437",
            "root": false,
            "$title": "Intent: Dados de folha",
            "$position": {
                "top": "767px",
                "left": "6088px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "e7da0b7e-fc93-4907-aeed-e2c1529dc5ba": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "46837833-f6de-49cf-b40a-d75fe8574826",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "81534408-4de8-44c9-a7c2-8d19e346db70",
                    "typeOfStateId": "state",
                    "$connId": "con_838",
                    "$id": "7cee2361-cb8e-400d-8da8-c22b698ac525",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "13d5fc53-7254-4f5b-a8d2-1dec0e13628e",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Talk BLU",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Authorization": "Key aG9tb2xvZ2FjYW82MTpKanlhVVRoUHdMRTRCY2tSc0g2TA=="
                        },
                        "method": "POST",
                        "body": "{\n  \"id\": \"{{random.guid}}\",\n  \"to\": \"postmaster@ai.msging.net\",\n  \"method\": \"set\",\n  \"uri\": \"/analysis\",\n  \"type\": \"application/vnd.iris.ai.analysis-request+json\",\n  \"resource\": {\n    \"text\":\"{{input.content}}\"\n  }\n}",
                        "uri": "https://rhneon.http.msging.net/commands",
                        "responseStatusVariable": "statusBlu",
                        "responseBodyVariable": "responseBlu"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-HTTPSTS4-4f5b-a8d2-1dec0e13628e",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBlu"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#32DE8A",
                    "label": "HTTP/Command",
                    "id": "DWNT2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "e7da0b7e-fc93-4907-aeed-e2c1529dc5ba",
            "root": false,
            "$title": "Talk BLU",
            "$position": {
                "top": "1230px",
                "left": "5275px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "81534408-4de8-44c9-a7c2-8d19e346db70": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2488a4d5-d8ef-4dbc-ba9b-a0b60b9aadf2",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "de381c4f-a8fc-49f6-8484-3ae61ef26d39",
                    "typeOfStateId": "state",
                    "$connId": "con_843",
                    "$id": "3347f0ff-38f8-4f4e-8d24-bfc4adc2c471",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Redirect Holerite"
                            ],
                            "variable": "intentName"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "0d7642fc-8910-42b3-95d9-d8c60211fc2d",
                    "typeOfStateId": "state",
                    "$connId": "con_848",
                    "$id": "92713a19-de39-4944-a157-abe2daa2dc07",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Redirect Ath"
                            ],
                            "variable": "intentName"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                },
                {
                    "stateId": "a7bea458-e279-4ece-8eed-d8142761159f",
                    "typeOfStateId": "state",
                    "$connId": "con_853",
                    "$id": "98b49c83-dc06-4277-8056-6e5c1ab0dce2",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "Start"
                            ],
                            "variable": "cameFromRegex"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "3d073500-9daf-4f7a-ba0b-20d3e8fcebae",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'intentName'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst {intentions} = JSON.parse(response).resource;\n\n\t\tif(intentions[0].score > 0.9) {\n\t\t\treturn intentions[0].name;\n\t\t}\n\t\treturn false;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'intentName'] \"+String(err);}}",
                        "inputVariables": [
                            "responseBlu"
                        ],
                        "outputVariable": "intentName",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTf-4f7a-ba0b-20d3e8fcebae",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{intentName}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "intentName"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "ddaec227-adb8-4697-acb2-a33d29e6a656",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[BLU] Reconhecimento intent",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[BLU] NÃ£o-Reconhecimento intent",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "variable": "isBluIntentAvailable",
                            "comparison": "equals",
                            "values": [
                                "false"
                            ]
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "81e8919b-9bde-4a27-8652-fa2005132dd0",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "81534408-4de8-44c9-a7c2-8d19e346db70",
            "root": false,
            "$title": "[Valida] Percentual entendimento",
            "$position": {
                "top": "1461px",
                "left": "5328px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "61bd8839-b607-4b4d-ba74-3fa79360e050": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "e1c43cd1-7112-441d-8ba9-c943e579b883",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "cd7c3e4d-fdd0-477c-8f00-a377090723f0",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "cd7c3e4d-fdd0-477c-8f00-a377090723f0",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "3280f5af-04ab-4f12-8502-c81b79157540",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "250c5279-f144-4d24-976e-a898bdb0bbe0",
                            "type": "text/plain",
                            "content": "{{isBluIntentAvailable}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "250c5279-f144-4d24-976e-a898bdb0bbe0",
                                "type": "text/plain",
                                "content": "{{isBluIntentAvailable}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "aafcc69b-7d4a-41cd-9beb-fc5fd7bfb97f",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "stateId": "{{error@return.state}}",
                    "typeOfStateId": "variable",
                    "$id": "28ca33b2-3162-4e5c-b45d-44ef819ac11d",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "error@return"
                        },
                        {
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "error@return.state",
                            "values": [
                                "null"
                            ]
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "a2409484-4ada-4afc-ba89-670477031ad6",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isBluIntentAvailable'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst {intentions} = JSON.parse(response).resource;\n\n\t\tif(intentions[0].score > 0.9) {\n\t\t\treturn intentions[0].answer.value;\n\t\t}\n\t\treturn false;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'isBluIntentAvailable'] \"+String(err);}}",
                        "inputVariables": [
                            "responseBlu"
                        ],
                        "outputVariable": "isBluIntentAvailable",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4afc-ba89-670477031ad6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{isBluIntentAvailable}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "isBluIntentAvailable"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "80dae85f-6454-42e7-8152-abf68eeebf1c",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[BLU] Reconhecimento intent",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[BLU] Reconhecimento intent",
                        "action": "{{intentName}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "intentName"
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "61bd8839-b607-4b4d-ba74-3fa79360e050",
            "root": false,
            "$title": "Resposta BLU",
            "$position": {
                "top": "1230px",
                "left": "5468px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "a7bea458-e279-4ece-8eed-d8142761159f": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "9934ae8f-40cb-40df-9cf4-a8df508cdbcb",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "ff8370c1-1c81-4b20-9097-9e002d0deca7",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "a7bea458-e279-4ece-8eed-d8142761159f",
            "root": false,
            "$title": "[GO TO][Talk BLU] Welcome Back",
            "$position": {
                "top": "1046px",
                "left": "5480px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ce15bef4-9050-4b40-a0ce-ad475e4efd01": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "0a6745e8-e41e-4d46-bc5b-7df22b4e0886",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "ce15bef4-9050-4b40-a0ce-ad475e4efd01",
            "root": false,
            "$title": "[GO TO][Dados folha] Menu principal",
            "$position": {
                "top": "438.25px",
                "left": "1350.5px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d77d4d6d-b1b0-419f-9a86-cd0df97a0dbb": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "faee8a7c-6e62-45b3-88df-1b53fdc6e0d2",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "d77d4d6d-b1b0-419f-9a86-cd0df97a0dbb",
            "root": false,
            "$title": "[GO TO][Ponto] Menu principal",
            "$position": {
                "top": "1188px",
                "left": "1350px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2d1b641f-ff9d-40fd-b16a-404fc250f77a": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4564f5aa-b5bd-46a0-8cdd-cadcd9715b5c",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "1028bb11-81cb-49fa-b0b1-c2c95321a07a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "2d1b641f-ff9d-40fd-b16a-404fc250f77a",
            "root": false,
            "$title": "[GO TO][Confirma Dados] Menu principal",
            "$position": {
                "top": "2300px",
                "left": "2314px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2afe6ae9-03f6-4e85-ba3a-e5c8c3b738fb": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "21857993-93c5-43dc-81a3-7a64036dbb9d",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "b72299be-415f-4d29-af57-38a2b26dc81a",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "b72299be-415f-4d29-af57-38a2b26dc81a",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "14f64dd1-6c5d-46c9-96e1-ef8c10ddfb88",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "17eced75-a054-4e67-b0ca-4a6c8478ae87",
                            "type": "text/plain",
                            "content": "Ops, nÃ£o encontrei informaÃ§Ãµes sobre sua *Holerite* no sistema.\n\nMas nÃ£o se preocupe, para visualizar o seu holerite completo, *acesse esse <https://login.lg.com.br/login/gente/neon|link>*. ðŸ˜‰",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "17eced75-a054-4e67-b0ca-4a6c8478ae87",
                                "type": "text/plain",
                                "content": "Ops, nÃ£o encontrei informaÃ§Ãµes sobre sua *Holerite* no sistema.\n\nMas nÃ£o se preocupe, para visualizar o seu holerite completo, *acesse esse <https://login.lg.com.br/login/gente/neon|link>*. ðŸ˜‰"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "7249f782-d3a4-43a5-91f3-6a0b1580ef72",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "2afe6ae9-03f6-4e85-ba3a-e5c8c3b738fb",
            "root": false,
            "$title": "Holerite nÃ£o encontrado",
            "$position": {
                "top": "628px",
                "left": "2160px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "d2a50ed0-870e-47bd-a4dc-d2c3d6f2aac8": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "fcbb20f2-ee34-45cf-b294-4129e0cffc48",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f5acb05-6691-4038-8e16-c6ec11e88315",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "1e68a46d-1282-4592-80e7-55da9a689cc9",
                        "$typeOfContent": "raw-content",
                        "type": "SendRawMessage",
                        "settings": {
                            "metadata": {},
                            "type": "{{menuErroApiBuild@type}}",
                            "rawContent": "{{menuErroApiBuild@content}}"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "ec8aa268-551d-43f6-a978-91117ca740ba",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "typeOfStateId": "state",
                    "$connId": "con_858",
                    "$id": "0ecdb84c-7540-4f17-8217-d910cdeb136c",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuErroApi:sim"
                            ],
                            "variable": "menuErroApiEscolha@id"
                        }
                    ],
                    "$invalid": false,
                    "stateId": "312cae2d-8be2-45e2-9b20-29da191f351b"
                },
                {
                    "stateId": "dee768ef-d9bb-42b8-8782-dca2ea07f9d5",
                    "typeOfStateId": "state",
                    "$connId": "con_863",
                    "$id": "39340bcc-0350-4edb-a3d5-132d66796705",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "equals",
                            "values": [
                                "menuErroApi:menu_principal"
                            ],
                            "variable": "menuErroApiEscolha@id"
                        }
                    ],
                    "$isBuilderDefaultOutput": true,
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "fe42f782-88b7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuErroApiOptions'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\tconst allOptions =\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: \"menuErroApi:sim\",\n\t\t\t\t\ttitle: \"Sim\",\n\t\t\t\t\ttitleShort: \"Sim\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: \"menuErroApi:menu_principal\",\n\t\t\t\t\ttitle: \"Menu principal\",\n\t\t\t\t\ttitleShort: \"Menu principal\",\n\t\t\t\t\tdescription: \"\",\n\t\t\t\t\tactive: true\n\t\t\t\t}\n\t\t\t];\n\n\t\treturn allOptions.filter(item => item.active);\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuErroApiOptions'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "menuErroApiOptions",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT7-4497-b308-f8eb0d2f389c",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuErroApiOptions}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuErroApiOptions"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "607d6f1d-f55f-4a14-a8ca-da836f4e8840",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'menuErroApiBuild'",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(dwnt, options) {\n  try {\n    const { source } = JSON.parse(dwnt).contact;\n    const allOptions = JSON.parse(options);\n    const isMenuList = source === \"WHATSAPP\" && allOptions.length > 3; // Para sempre menu quick reply, setar como 'false'\n\n    const textHeader = \"\";\n    const textBody = `Sinto muito, ainda estou com problema no sistema. VocÃª gostaria de abrir um chamado para esclarecer sua dÃºvida?`;\n    const textFooter = ``;\n    const nameButton = `Ver opÃ§Ãµes`;\n\n    let arrayOptionButtons;\n\n    if (isMenuList) {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger24Chars = item.title.length > 24;\n          acc.push({\n            id: item.id,\n            title: titleLonger24Chars ? item.title.titleShort : item.title,\n            description: item.description,\n          });\n        }\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"list\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              button: nameButton,\n              sections: [\n                {\n                  title: \"\",\n                  rows: arrayOptionButtons,\n                },\n              ],\n            },\n          },\n        },\n      };\n    } else if (source === \"WHATSAPP\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          const titleLonger20Chars = item.title.length > 20;\n          acc.push({\n            type: \"reply\",\n            reply: {\n              id: item.id,\n              title: titleLonger20Chars ? item.titleShort : item.title,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/json\",\n        content: {\n          recipient_type: \"individual\",\n          type: \"interactive\",\n          interactive: {\n            type: \"button\",\n            header: {\n              type: \"text\",\n              text: textHeader,\n            },\n            body: {\n              text: textBody,\n            },\n            footer: {\n              text: textFooter,\n            },\n            action: {\n              buttons: arrayOptionButtons,\n            },\n          },\n        },\n      };\n    } else if (source === \"INSTAGRAM\") {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            scope: \"immediate\",\n            options: arrayOptionButtons,\n        },\n      };\n    } else {\n      arrayOptionButtons = allOptions.reduce((acc, item) => {\n        if (item.active) {\n          acc.push({\n            type: \"application/json\",\n            text: item.title,\n            value: {\n              button_id: item.id,\n            },\n          });\n        }\n\n        return acc;\n      }, []);\n\n      return {\n        type: \"application/vnd.lime.select+json\",\n        content: {\n            text: textBody,\n            // \"scope\":\"persistent\",\n            options: arrayOptionButtons,\n        },\n      };\n    }\n  } catch (error) {\n    return error.message;\n  }\n}",
                        "inputVariables": [
                            "DWNT",
                            "menuErroApiOptions"
                        ],
                        "outputVariable": "menuErroApiBuild",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "15828c1e-828a-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET \"menuErroApiEscolha\"",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(userInput, options) {\n  try {\n    if (!userInput) {\n      return \"invÃ¡lido\";\n    }\n    \n    const optionsMenu = JSON.parse(options);\n    const { metadata, content } = JSON.parse(userInput) || \"invÃ¡lido\";\n\n    const isBlipChatClick = checkBlipChatClick(content)\n    const isInstagramClick = checkInstagramClick(content, metadata);\n    const isWAClick = checkWAClick(metadata);\n    \n    let optionIdChoosed = null;\n    \n    if (isWAClick) {\n      optionIdChoosed = \n      metadata[\"#wa.interactive.list.id\"] ||\n      metadata[\"#wa.interactive.button.id\"] || \n      \"invÃ¡lido\";\n\n    } else if (isBlipChatClick) {\n      optionIdChoosed = content[\"button_id\"] || \"invÃ¡lido\";\n\n    } else if (isInstagramClick) {\n      optionIdChoosed = isInstagramClick.value[\"button_id\"] || \"invÃ¡lido\";\n      \n    }\n\n    if (!optionIdChoosed) {\n      const formattedContent = textNormalizer(content);\n      return (\n        optionsMenu.find((item) =>\n            textNormalizer(item.title) === formattedContent ||\n            textNormalizer(item.titleShort) === formattedContent\n        ) || \"invÃ¡lido\"\n      );\n    }\n\n    return (\n      optionsMenu.find((item) => item.id === optionIdChoosed) || \"invÃ¡lido\"\n    );\n  } catch (e) {\n    return \"invÃ¡lido\";\n  }\n}\n\nfunction checkWAClick(metadata) {\n  try {\n\n    return metadata.hasOwnProperty(\"#wa.interactive.list.id\") || \n    metadata.hasOwnProperty(\"#wa.interactive.button.id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkBlipChatClick(content) {\n  try {\n\n    return content.hasOwnProperty(\"button_id\");\n  } catch(error) {\n    return false;\n  }\n}\n\nfunction checkInstagramClick(content, metadata) {\n  try {\n    const parse = JSON.parse(content);\n\n    if(!metadata[\"#tunnel.originator\"].includes(\"@instagram\")) return false;\n\n    return parse;\n  } catch (error) {\n    return false;\n  }\n}\n\nfunction textNormalizer(dataToNormalize) {\n  return dataToNormalize\n    .normalize(\"NFD\")\n    .replace(/([^Âªa-zÃ¡Ã Ã¢Ã£Ã©Ã¨ÃªÃ­Ã¯Ã³Ã´ÃµÃ¶ÃºÃ§Ã±0-9]+)/gi, \"\")\n    .toLowerCase();\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'menuErroApiEscolha'] \"+String(err);}}",
                        "inputVariables": [
                            "input.message",
                            "menuErroApiOptions"
                        ],
                        "outputVariable": "menuErroApiEscolha",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPTa-4163-8366-f38e20877980",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{menuErroApiEscolha}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "menuErroApiEscolha"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e508d039-d1a5-48d2-af91-d622e1392a9a",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[MENU ESCOLHA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[MENU ESCOLHA] - {{state.name}}",
                        "action": "{{menuErroApiEscolha@title}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "notEquals",
                            "variable": "menuErroApiEscolha"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuErroApiEscolha"
                        }
                    ]
                },
                {
                    "$id": "fd19aaff-d7ef-4b94-8b44-124f7fe760c6",
                    "$typeOfContent": "",
                    "type": "TrackEvent",
                    "$title": "[ESCOLHA INVÃLIDA] state.name",
                    "$invalid": false,
                    "settings": {
                        "extras": {},
                        "category": "[ESCOLHA INVÃLIDA] - {{state.name}}",
                        "action": "{{input.content}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "menuErroApiEscolha"
                        },
                        {
                            "values": [
                                "invÃ¡lido"
                            ],
                            "source": "context",
                            "comparison": "equals",
                            "variable": "menuErroApiEscolha"
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "id": "blip-tag-7ce7194a-2f5c-4d53-b9e7-2ff6c40746a9",
                    "label": "SendMessage",
                    "background": "#EE82EE",
                    "canChangeBackground": false
                },
                {
                    "background": "#fde74c",
                    "label": "Input",
                    "id": "DWNT60bd-871d-474b-b62a-18cdeac03f7d",
                    "canChangeBackground": false
                },
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "d2a50ed0-870e-47bd-a4dc-d2c3d6f2aac8",
            "root": false,
            "$title": "Menu erro API",
            "$position": {
                "top": "409px",
                "left": "3047px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "312cae2d-8be2-45e2-9b20-29da191f351b": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "ac410ba4-8e4c-4a6e-bb44-530ea2cc1077",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "312cae2d-8be2-45e2-9b20-29da191f351b",
            "root": false,
            "$title": "[GO TO][Erro API] Ath",
            "$position": {
                "top": "533px",
                "left": "3049px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "df008c4b-9886-4276-9e6e-3a5e4fdd0bc9": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "8ad42a33-1bcc-4f62-a77c-f942c41db6ae",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "f00cff72-f5aa-40ff-a1bc-67c692d70fbe",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "f00cff72-f5aa-40ff-a1bc-67c692d70fbe",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "3fbf5179-0be4-4c3e-8b1b-44512c7a727e",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "af1c0a93-9674-46b2-bc66-a383ced34391",
                            "type": "text/plain",
                            "content": "{{messageRendimentos}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "af1c0a93-9674-46b2-bc66-a383ced34391",
                                "type": "text/plain",
                                "content": "{{messageRendimentos}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "02b7d8aa-b731-4a7f-a792-918827c5851d",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#db0cb2f9-e035-47d6-9b2c-b1344621c347",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ],
                    "stateId": "{{dwnCore@fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                },
                {
                    "$id": "DWNT4654-c1b9-42d9-bc9d-6ddf3d8d4f56",
                    "conditions": [
                        {
                            "comparison": "exists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "stateId": "{{DWNT@states.fallback}}",
                    "typeOfStateId": "variable",
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "48393d40-f368-4093-b85d-52eefed1a657",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'message'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\ttry {\n\t\treturn `Para visualizar o seu informe de rendimentos, *acesse esse <https://login.lg.com.br/saml/auto/neon?f=79472B6C614F376E7947472B39476E6B424F722F6A773D3D|link>*.`;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\n\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'message'] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "messageRendimentos",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "DWNT-USRSCPT8-4093-b85d-52eefed1a657",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{messageRendimentos}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "messageRendimentos"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "9c8fcb9f-5329-4bd4-8147-16158b790fd4",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [],
            "id": "df008c4b-9886-4276-9e6e-3a5e4fdd0bc9",
            "root": false,
            "$title": "Link informe de rendimentos",
            "$position": {
                "top": "606px",
                "left": "1702px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "DWN/ERR_BLK#dbaa315a-b338-43cb-bd45-1e24881760fd": {
            "id": "DWN/ERR_BLK#dbaa315a-b338-43cb-bd45-1e24881760fd",
            "$title": "DWN Error",
            "$contentActions": [
                {
                    "action": {
                        "$id": "DWN/ERR_CNT_ACT#5d5f83a1-6203-445d-9588-d1847001cc69",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "8f096d6c-090a-4cd5-822a-da96e4bef4de",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8f096d6c-090a-4cd5-822a-da96e4bef4de",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwnMessage",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "notEquals",
                                "variable": "dwnMessage",
                                "values": [
                                    "null"
                                ]
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "DWN/ERR_CNT_ACT#5d5f83a1-6203-445d-9588-d1847001cc69",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                            "type": "text/plain",
                            "content": "{{dwnMessage}}",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "bd5256e0-16f5-4840-a5f3-ff4c0cdc830f",
                                "type": "text/plain",
                                "content": "{{dwnMessage}}"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "exists",
                                "variable": "dwnMessage",
                                "values": []
                            },
                            {
                                "source": "context",
                                "comparison": "notEquals",
                                "variable": "dwnMessage",
                                "values": [
                                    "null"
                                ]
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c39ce00c-b206-4683-b888-20820c928696",
                                "type": "text/plain",
                                "content": "User input"
                            },
                            "editable": false,
                            "deletable": false,
                            "position": "right"
                        },
                        "$invalid": false,
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "$id": "DWN/ERR_COND#11d3bb17-477f-4747-82de-caf96126feb2",
                    "stateId": "{{dwn@error.goto.id}}",
                    "typeOfStateId": "variable",
                    "conditions": [
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "dwnError"
                        },
                        {
                            "source": "context",
                            "comparison": "notExists",
                            "values": [],
                            "variable": "dwnCore@redirect"
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "dwn@error"
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.goto",
                            "values": []
                        },
                        {
                            "source": "context",
                            "comparison": "exists",
                            "values": [],
                            "variable": "dwn@error.goto.id"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "DWN/ERR_CRT_MSG#8cff6e71-d902-4cd1-8119-d3c0b171e4ed",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "DWN Create Message",
                    "settings": {
                        "function": "dwnRun",
                        "source": "/**\n * @author     [Beuren Bechlin] <beuren.bechlin@dawntech.dev>\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n *\n * ---\n *\n * This software is the proprietary property of Dawntech.\n * Possession, use, duplication, or dissemination of this software is strictly\n * prohibited unless you have received prior written permission from\n * Dawntech.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nasync function dwnRun(coreStr, errorStr) {\n  coreStr = coreStr || \"\";\n  errorStr = errorStr || \"\";\n  let message = null;\n  let core = null;\n  let error = null;\n  try {\n    core = JSON.parse(coreStr);\n    if (errorStr) {\n      error = DwnError.fromDwnError(errorStr) || null;\n    }\n    if (!error && core.error) {\n      error = DwnError.fromJson(core.error);\n    }\n    if (error && error.type !== \"PROPAGATE\") {\n      message = error.message || null;\n    }\n    if (message) {\n      message = message.trim();\n    }\n  } catch (err) {\n  }\n  return message;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n",
                        "inputVariables": [
                            "dwnCore",
                            "dwnError"
                        ],
                        "outputVariable": "dwnMessage"
                    },
                    "conditions": [],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "DWN/ERR_GOTO_RED#9855c068-609d-44ac-89a6-680e4cd7623d",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "DWN Go to",
                    "settings": {
                        "address": "{{dwn@error.goto.service}}",
                        "context": {
                            "type": "text/plain",
                            "value": "{\n    \"state\": \"{{dwn@error.goto.id}}\",\n    \"service\": \"{{dwn@error.goto.service}}\",\n    \"error\": \"GOTO\"\n}"
                        }
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "notExists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwnCore@redirect"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwn@error.goto"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "DWN/ERR_PROP_RED#bbb75cc3-2623-470f-bea2-ba371ffaaaa3",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "DWN Propagate Error",
                    "settings": {
                        "address": "{{dwnCore@propagate}}",
                        "context": {
                            "type": "text/plain",
                            "value": "{\n    \"state\": \"{{dwn@error.state.id}}\",\n    \"service\": \"{{dwn@error.state.service}}\",\n    \"error\": \"PROPAGATE\"\n}"
                        }
                    },
                    "conditions": [
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwnError"
                        },
                        {
                            "values": [],
                            "source": "context",
                            "comparison": "exists",
                            "variable": "dwnCore@propagate"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "typeOfStateId": "state",
                "$invalid": false
            },
            "$tags": [],
            "$position": {
                "top": "401px",
                "left": "3327px"
            },
            "root": false,
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "DWN/TAGS_BLK#2450f0ee-a0d1-42a4-8d4a-d011f37126e6": {
            "id": "DWN/TAGS_BLK#2450f0ee-a0d1-42a4-8d4a-d011f37126e6",
            "$title": "DWN Tags",
            "$contentActions": [],
            "$conditionOutputs": [],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "$tags": [
                {
                    "background": "#FFFF00",
                    "label": "DWN - Disable Error",
                    "id": "DWN/TAG_DIS_ERR#9c457030-3296-4370-829d-f428641750e4",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF0000",
                    "label": "DWN - Error",
                    "id": "DWN/TAG_ERR#16871d75-ce98-44e3-bf61-64c9a764ebb9",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF8000",
                    "label": "DWN - Prepare",
                    "id": "DWN/TAG_PREP#aa459da7-ffa4-47c8-8487-6295b8f01d32",
                    "canChangeBackground": false
                },
                {
                    "background": "#0000FF",
                    "label": "DWN - Reset",
                    "id": "DWN/TAG_RST#978a9c38-c025-4181-9bbd-966ff8ff9bb0",
                    "canChangeBackground": false
                },
                {
                    "background": "#FF00FF",
                    "label": "DWN - Custom Expiration",
                    "id": "DWN/TAG_CUST_EXP#ef8eaf43-f10b-470d-be3e-58b6fa87c39a",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                },
                {
                    "background": "#8B00FF",
                    "label": "DWN - Input",
                    "id": "DWN/TAG_INP#ec687a82-cfa6-4f64-acae-0ed4e6209764",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FF00",
                    "label": "DWN - Merge Contact",
                    "id": "DWN/TAG_MRG_CNT#75550d25-28a5-43f4-b509-3306608554fa",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "$position": {
                "top": "10000px",
                "left": "10000px"
            },
            "root": false,
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "3eb3d8c4-3200-46ed-9b2b-95a820463d86": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "f5d28008-6f31-44ab-9026-b8ca221b20f4",
                        "$typeOfContent": "chat-state",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "fdd4ff2b-449c-4171-b883-3dc0e9187c3f",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "fdd4ff2b-449c-4171-b883-3dc0e9187c3f",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        }
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "40674d11-8d4d-443e-8c02-ac06af967ce8",
                        "$typeOfContent": "text",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "253ab483-9600-473f-9fa9-f7adc806c7ad",
                            "type": "text/plain",
                            "content": "Tudo certo por aqui! ðŸŽ‰\n\nAgora vocÃª pode me enviar alguma dÃºvida que tenha, ou digitar #menu para voltar Ã s opÃ§Ãµes principais.",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "253ab483-9600-473f-9fa9-f7adc806c7ad",
                                "type": "text/plain",
                                "content": "Tudo certo por aqui! ðŸŽ‰\n\nAgora vocÃª pode me enviar alguma dÃºvida que tenha, ou digitar #menu para voltar Ã s opÃ§Ãµes principais."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        }
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": false,
                        "$cardContent": {
                            "document": {
                                "id": "70f26a5c-f854-4761-bce9-8508b8b93760",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "0:30"
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "stateId": "92a846c6-8d09-46df-b90f-7507cd435b2b",
                    "typeOfStateId": "state",
                    "$connId": "con_868",
                    "$id": "0f1e117d-69e7-4481-8b3d-9b8cecf8a9eb",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "3eb3d8c4-3200-46ed-9b2b-95a820463d86",
            "root": false,
            "$title": "Coleta interaÃ§Ã£o para AI",
            "$position": {
                "top": "910px",
                "left": "539px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "92a846c6-8d09-46df-b90f-7507cd435b2b": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "4392d80a-f48f-4b32-8fb5-07d3c767afbd",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "stateId": "66759194-551f-4cbd-b7a4-586cdf2f6e0a",
                    "typeOfStateId": "state",
                    "$connId": "con_873",
                    "$id": "0fab6662-d519-4df0-801d-fd6d27b40bf8",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "#menu"
                            ]
                        }
                    ],
                    "$invalid": false
                },
                {
                    "stateId": "ef933c48-4b04-4a39-b924-6b9491ef4940",
                    "typeOfStateId": "state",
                    "$connId": "con_878",
                    "$id": "e4c461b7-07ac-4acb-ad67-96b05166893d",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "92a846c6-8d09-46df-b90f-7507cd435b2b",
            "root": false,
            "$title": "[Valida] Pular AI",
            "$position": {
                "top": "981px",
                "left": "790px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ef933c48-4b04-4a39-b924-6b9491ef4940": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "2fff2e84-a612-4a76-9e6e-a18a5231fe2a",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [
                {
                    "$id": "78cf71bd-3ba8-4ccf-b277-693f51030413",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "AI",
                        "context": {
                            "type": "text/plain",
                            "value": "{{input.content}}"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "source": "input",
                            "comparison": "equals",
                            "values": [
                                "TESTE_APAGAR_EXCEPTIONS"
                            ]
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "ef933c48-4b04-4a39-b924-6b9491ef4940",
            "root": false,
            "$title": "[Redirect] AI",
            "$position": {
                "top": "981px",
                "left": "1011px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "873f3d80-74b5-44db-9287-f2c95c660216": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "69c440bf-9360-4efc-a141-e7e5531718d3",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [
                {
                    "$id": "a149e580-7b4f-4a40-b51b-8dcd34167f36",
                    "$typeOfContent": "",
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "AI",
                        "context": {
                            "type": "text/plain",
                            "value": "concatPayloadAI:{{input.content}}"
                        }
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "873f3d80-74b5-44db-9287-f2c95c660216",
            "root": false,
            "$title": "[Redirect] Talk to Gepeto",
            "$position": {
                "top": "802px",
                "left": "5120px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "ff315329-e13e-4beb-af24-ff684ff74894": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "9a1062cc-a154-4daf-bb26-be62d551978e",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "66759194-551f-4cbd-b7a4-586cdf2f6e0a",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "ff315329-e13e-4beb-af24-ff684ff74894",
            "root": false,
            "$title": "[GO TO][Start] Validar Gestor/Colaborador",
            "$position": {
                "top": "108px",
                "left": "988px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "f82ec425-ffd4-426b-b892-2f45131139a7": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "215fe389-9655-4eb2-86e8-c0730f550293",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [
                {
                    "$id": "fac25e0e-89c9-47f2-a589-6bdc4bf3dfe6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "SET 'cameFromRegex' to 'AI FAQ'",
                    "$invalid": false,
                    "settings": {
                        "variable": "cameFromRegex",
                        "value": "AI FAQ"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "a4f5afaa-4ca6-43a0-9689-06a2f9d38f39",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#0080FF",
                    "label": "DWN - Track Events",
                    "id": "DWN/TAG_TRK_EVT#c9ac2aa2-f775-44ee-bd9a-ab6da9d7c548",
                    "canChangeBackground": false
                }
            ],
            "id": "f82ec425-ffd4-426b-b892-2f45131139a7",
            "root": false,
            "$title": "[GO TO][Start] Validar intenÃ§Ã£o Regex From AI",
            "$position": {
                "top": "268px",
                "left": "984px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "2c52fe13-a787-4623-9c7b-750f93b50447": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "052cdd56-b6b9-4afc-96f8-3463a9ba403c",
                        "$typeOfContent": "chat-state",
                        "type": "SendMessage",
                        "settings": {
                            "id": "dd8bf2f7-6111-4423-9571-b301b4537391",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            },
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "dd8bf2f7-6111-4423-9571-b301b4537391",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "fc08f49e-460f-4339-bf3f-b008c78748a7",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "ad0bdc75-0027-492f-83a8-d79102d91e6f",
                            "type": "text/plain",
                            "content": "Redirecionando para PRD..",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "ad0bdc75-0027-492f-83a8-d79102d91e6f",
                                "type": "text/plain",
                                "content": "Redirecionando para PRD.."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "40115cce-67f5-4bc9-88a8-2770ba9cb515",
                        "$typeOfContent": "text",
                        "type": "SendMessage",
                        "settings": {
                            "id": "88623b19-56df-4e48-a1de-f003d9fc4e8c",
                            "type": "text/plain",
                            "content": "<https://www.google.com.br|Clique aqui>",
                            "metadata": {
                                "#message.spinText": "true"
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "88623b19-56df-4e48-a1de-f003d9fc4e8c",
                                "type": "text/plain",
                                "content": "<https://www.google.com.br|Clique aqui>"
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        },
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "08957eea-cf8b-45a9-ba55-513a82a2beb7",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false,
                        "expiration": "00:30",
                        "conditions": [
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "dwnError",
                                "values": []
                            },
                            {
                                "comparison": "notExists",
                                "source": "context",
                                "variable": "errorType",
                                "values": []
                            }
                        ]
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "8a6504d0-f2da-41b9-a384-58939d42dbab",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "Main"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                }
            ],
            "id": "2c52fe13-a787-4623-9c7b-750f93b50447",
            "root": false,
            "$title": "[Redirect] PRD",
            "$position": {
                "top": "38px",
                "left": "274px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "982ae9bd-cc54-4b59-9f33-f2d9dbfcbe55": {
            "$contentActions": [
                {
                    "action": {
                        "$id": "b2f1d20c-9358-47fe-a814-c7e579359112",
                        "$typeOfContent": "chat-state",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "f1be8da4-e8c2-45c5-9990-46ab8bde5d25",
                            "type": "application/vnd.lime.chatstate+json",
                            "content": {
                                "state": "composing",
                                "interval": 1000
                            }
                        },
                        "$cardContent": {
                            "document": {
                                "id": "f1be8da4-e8c2-45c5-9990-46ab8bde5d25",
                                "type": "application/vnd.lime.chatstate+json",
                                "content": {
                                    "state": "composing",
                                    "interval": 1000
                                }
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        }
                    },
                    "$invalid": false
                },
                {
                    "action": {
                        "$id": "66ab63dd-d042-43ba-bb85-dcf9993cd93a",
                        "$typeOfContent": "text",
                        "$description": "",
                        "$inputSchema": {
                            "type": "object",
                            "properties": {},
                            "required": []
                        },
                        "type": "SendMessage",
                        "settings": {
                            "id": "8d10069f-e0a0-478a-a494-f93e72046f0c",
                            "type": "text/plain",
                            "content": "Redirecionando para HML..",
                            "metadata": {}
                        },
                        "$cardContent": {
                            "document": {
                                "id": "8d10069f-e0a0-478a-a494-f93e72046f0c",
                                "type": "text/plain",
                                "content": "Redirecionando para HML.."
                            },
                            "editable": true,
                            "deletable": true,
                            "position": "left"
                        }
                    },
                    "$invalid": false
                },
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "606f52c6-6128-41ee-a9b3-633e50e652c6",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [],
            "$leavingCustomActions": [
                {
                    "$id": "8d2c65f8-fa38-48cc-a25d-181c22718aef",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "Main - HML"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        }
                    ]
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [
                {
                    "background": "#779CAB",
                    "label": "TrackEvents",
                    "id": "DWNTe5a9-aaf2-4282-9d74-493810becee1",
                    "canChangeBackground": false
                },
                {
                    "background": "#00FFFF",
                    "label": "DWN - Redirect",
                    "id": "DWN/TAG_RED#ac020f84-3722-47eb-8250-3845d1af6d86",
                    "canChangeBackground": false
                }
            ],
            "id": "982ae9bd-cc54-4b59-9f33-f2d9dbfcbe55",
            "root": false,
            "$title": "[Redirect] HML",
            "$position": {
                "top": "161px",
                "left": "272px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "8aec0dfb-728e-460f-9d79-d9d0a1e10c28": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "c7e110f1-5ff6-46f0-8bc2-7195f6ea4588",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [
                {
                    "stateId": "3eb3d8c4-3200-46ed-9b2b-95a820463d86",
                    "typeOfStateId": "state",
                    "$connId": "con_883",
                    "$id": "c9ace91b-8c5c-4382-b1cb-d7d8eb407ba1",
                    "conditions": [
                        {
                            "source": "input",
                            "comparison": "exists",
                            "values": []
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$enteringCustomActions": [
                {
                    "$id": "bef29429-1324-47b4-a3dd-01acc284d20f",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "corpoBuscaSubordinados",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run() {\n\tconst output = `<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:dto=\"lg.com.br/svc/dto\" xmlns:v2=\"lg.com.br/api/v2\" xmlns:v1=\"lg.com.br/api/dto/v1\">\n   <soapenv:Header>\n      <dto:LGAutenticacao>\n         <dto:TokenUsuario>\n            <dto:Senha>{{config.LGAuthPassword}}</dto:Senha>\n            <dto:Usuario>{{config.LGAuthUser}}</dto:Usuario>\n            <dto:GuidTenant>{{config.LGAuthGuidTenant}}</dto:GuidTenant>\n         </dto:TokenUsuario>\n      </dto:LGAutenticacao>\n      <dto:LGContextoAmbiente>\n        <dto:Ambiente>{{config.LGAuthEnviroment}}</dto:Ambiente>\n      </dto:LGContextoAmbiente>\n   </soapenv:Header>\n   <soapenv:Body>\n      <v2:ConsulteListaDeSubordinadosDoGestor>\n         <v2:filtro>\n            <v1:Colaborador>\n               <v1:Empresa>\n                  <v1:Codigo>{{contact.extras.empresaId}}</v1:Codigo>\n               </v1:Empresa>\n               <v1:Matricula>{{contact.extras.matricula}}</v1:Matricula>\n            </v1:Colaborador>\n            <v1:ConsiderarDiretos>1</v1:ConsiderarDiretos>\n            <v1:ConsiderarIndiretos>0</v1:ConsiderarIndiretos>\n            <v1:QuantidadeMaximaDeRetorno>50</v1:QuantidadeMaximaDeRetorno>\n            <v1:TipoDaSituacao>2</v1:TipoDaSituacao>\n         </v2:filtro>\n      </v2:ConsulteListaDeSubordinadosDoGestor>\n   </soapenv:Body>\n</soapenv:Envelope>`\n\ttry {\n\t\treturn output;\n\t} catch (e) {\n\t\treturn output;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [corpoBuscaSubordinados] \"+String(err);}}",
                        "inputVariables": [],
                        "outputVariable": "corpoBuscaSubordinados",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "4ea3e90c-264b-44ce-b9fd-5c33e73fbd03",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{corpoBuscaSubordinados}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "corpoBuscaSubordinados"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "c2437df1-ff82-4305-8305-247e6d7b93c0",
                    "$typeOfContent": "",
                    "type": "ProcessHttp",
                    "$title": "Busca Subordinados",
                    "$invalid": false,
                    "settings": {
                        "headers": {
                            "Content-Type": "text/xml",
                            "SOAPAction": "lg.com.br/api/v2/ServicoDeContratoDeTrabalho/ConsulteListaDeSubordinadosDoGestor"
                        },
                        "method": "POST",
                        "body": "{{corpoBuscaSubordinados}}",
                        "uri": "{{config.LGBaseUrl}}/v2/servicodecontratodetrabalho",
                        "responseStatusVariable": "statusBuscaSubordinados",
                        "responseBodyVariable": "responseBuscaSubordinados"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "229c9f83-35e9-425c-bc00-323e1f1d6a4f",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' API",
                    "settings": {
                        "variable": "errorType",
                        "value": "API"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "1",
                                "3",
                                "4",
                                "5"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "statusBuscaSubordinados"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "e3023573-bfc4-4c09-9ab9-94fc6c9f17a0",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "convertXmlToJsonSubordinados",
                    "$invalid": false,
                    "settings": {
                        "function": "run",
                        "source": "function run(xml) {\n    let obj = {};\n    let tagStack = [];\n    let currentNode = obj;\n    \n    // Regex patterns for XML parsing\n    const tagPattern = /<([^>]+)>/g;\n    let match;\n    let lastIndex = 0;\n    \n    while ((match = tagPattern.exec(xml)) !== null) {\n        const tagContent = match[1];\n        const isEndTag = tagContent[0] === '/';\n        \n        const textContent = xml.substring(lastIndex, match.index).trim();\n        if (textContent && tagStack.length > 0) {\n            const parentNode = tagStack[tagStack.length - 1];\n            if (!parentNode[\"_text\"]) {\n                parentNode[\"_text\"] = textContent;\n            } else if (typeof parentNode[\"_text\"] === \"string\") {\n                parentNode[\"_text\"] = [parentNode[\"_text\"], textContent];\n            } else {\n                parentNode[\"_text\"].push(textContent);\n            }\n        }\n\n        lastIndex = match.index + match[0].length;\n\n        if (isEndTag) {\n            tagStack.pop();\n            currentNode = tagStack[tagStack.length - 1] || obj;\n        } else {\n            const tagParts = tagContent.split(' ');\n            const tagName = tagParts[0];\n            const newNode = {};\n\n            if (currentNode[tagName] === undefined) {\n                currentNode[tagName] = newNode;\n            } else if (Array.isArray(currentNode[tagName])) {\n                currentNode[tagName].push(newNode);\n            } else {\n                currentNode[tagName] = [currentNode[tagName], newNode];\n            }\n\n            if (!isEndTag && tagContent[tagContent.length - 1] !== '/') {\n                tagStack.push(newNode);\n                currentNode = newNode;\n            }\n        }\n    }\n\n    // Clean up _text keys\n    function cleanUp(obj) {\n        for (let key in obj) {\n            if (obj[key] && typeof obj[key] === \"object\") {\n                if (obj[key]._text) {\n                    if (Object.keys(obj[key]).length === 1) {\n                        obj[key] = obj[key]._text;\n                    } else {\n                        obj[key].textValue = obj[key]._text;\n                        delete obj[key]._text;\n                    }\n                } else if (Object.values(obj[key]).length === 0) {\n                    delete obj[key];\n                }\n                cleanUp(obj[key]);\n            }\n        }\n    }\n\n    cleanUp(obj);\n    return obj;\n}",
                        "inputVariables": [
                            "responseBuscaSubordinados"
                        ],
                        "outputVariable": "convertXmlToJsonSubordinados"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": false
                },
                {
                    "$id": "ca3b5f44-744e-43dd-b110-daece4cc76a0",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "quantSubordinados",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(convertXmlToJson) {\n\ttry {\n\t\tconvertXmlToJson = JSON.parse(convertXmlToJson)\n\n\t\tlet infos = convertXmlToJson[\"s:Envelope\"][\"s:Body\"][\"ConsulteListaDeSubordinadosDoGestorResponse\"][\"ConsulteListaDeSubordinadosDoGestorResult\"][\"a:Retorno\"][\"a:ContratoDeTrabalhoParcialV2\"]\n\t\t\n\t\tif (infos.length === undefined) {\n\t\t\tinfos = [infos].filter((v) => v)\n\t\t}\n\n\t\treturn infos.length\n\t} catch (e) {\n\t\treturn 0\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [quantSubordinados] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonSubordinados"
                        ],
                        "outputVariable": "quantSubordinados",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ],
                    "continueOnError": true
                },
                {
                    "$id": "dddb7a3d-ec27-4473-af8f-d96a92e77771",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{quantSubordinados}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "quantSubordinados"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "6d35b28c-2f5d-4b40-8535-994409a5ecbe",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'isManager'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tconst quantSubordinados = Number(response);\n\n\t\treturn quantSubordinados > 0;\n\t} catch (error) {\n\t\treturn error.message;\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'isManager'] \"+String(err);}}",
                        "inputVariables": [
                            "quantSubordinados"
                        ],
                        "outputVariable": "isManager",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "156637e8-56c5-47ab-b092-b9c6815c272d",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{isManager}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "isManager"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "82feca12-7751-42b7-a3d6-bfff406dddc9",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "isTeamView - false",
                    "$invalid": false,
                    "settings": {
                        "variable": "isTeamView",
                        "value": "false"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "6f3ce350-35f7-4dad-aeef-8a7107a22c9b",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'listaColaboradores'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(response) {\n\ttry {\n\t\tif (!response) return false;\n\n\t\tresponse = JSON.parse(response);\n\n\t\tlet listaColaboradores = response[\"s:Envelope\"][\"s:Body\"][\"ConsulteListaDeSubordinadosDoGestorResponse\"][\"ConsulteListaDeSubordinadosDoGestorResult\"]['a:Retorno'][\"a:ContratoDeTrabalhoParcialV2\"];\n\n\t\tif(!Array.isArray(listaColaboradores)) {\n            listaColaboradores = [listaColaboradores]\n        }\n\n\t\treturn listaColaboradores.map(item => ({\n            empresaId: item[\"a:Empresa\"][\"a:Empresa\"] || item[\"a:Empresa\"][\"a:Codigo\"],\n            matricula: item[\"a:Matricula\"],\n            NivelUnidadeOrganizacional: item[\"a:NivelUnidadeOrganizacional\"],\n            nome: item[\"a:Nome\"].split(\" \").map((str2) => str2.charAt(0).toUpperCase() + str2.slice(1).toLowerCase()).join(\" \"),\n            tipoSituacao: item[\"a:TipoDaSituacao\"]\n        }));\n\t} catch(e) {\n\t\treturn false\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'listaColaboradores'] \"+String(err);}}",
                        "inputVariables": [
                            "convertXmlToJsonSubordinados"
                        ],
                        "outputVariable": "listaColaboradores",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "08e3ba52-5581-4d9b-acf7-bd4a38bf22d6",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{listaColaboradores}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "listaColaboradores"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$leavingCustomActions": [
                {
                    "$id": "636ada53-e5dc-45eb-85ac-a41c4a9c5790",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "colaboradorSelecionado",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(contact) {\n\ttry {\n\t\tcontact = JSON.parse(contact);\n\n\t\tif (contact.extras) return {\n\t\t\t...contact,\n\t\t\t...contact.extras,\n\t\t}\n\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t} catch(e) {\n\t\treturn {\n\t\t\t\"matricula\": \"{{contact.extras.matricula}}\",\n\t\t\t\"empresaId\": \"{{contact.extras.empresaId}}\",\n\t\t\t\"pessoaId\": \"{{contact.extras.pessoaId}}\",\n\t\t}\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [colaboradorSelecionado] \"+String(err);}}",
                        "inputVariables": [
                            "contact.serialized"
                        ],
                        "outputVariable": "colaboradorSelecionado",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "ecf4bc6d-c99e-4249-8837-97224f462487",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{colaboradorSelecionado}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "colaboradorSelecionado"
                        }
                    ],
                    "$invalid": false
                },
                {
                    "$id": "256da5aa-ce1d-4252-8575-30f2bfac0cc6",
                    "$typeOfContent": "",
                    "type": "ExecuteScriptV2",
                    "$title": "SET 'tipoColaborador'",
                    "$invalid": false,
                    "settings": {
                        "function": "dwnt_run",
                        "source": "function run(isManager) {\n\ttry {\n\t\treturn isManager == 'true' ? 'Gestor' : 'Colaborador';\n\t} catch (error) {\n\t\treturn 'Colaborador';\n\t}\n}\nfunction dwnt_run(){try{return run.apply(null, arguments);}catch(err){return \"SCRIPT_ERROR [SET 'tipoColaborador'] \"+String(err);}}",
                        "inputVariables": [
                            "isManager"
                        ],
                        "outputVariable": "tipoColaborador",
                        "LocalTimeZoneEnabled": false
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        }
                    ]
                },
                {
                    "$id": "cfde7f24-e222-4de4-83a1-82f57031f142",
                    "$typeOfContent": "",
                    "type": "SetVariable",
                    "$title": "[DWNT] 'errorType' SCRIPT_ERROR",
                    "settings": {
                        "variable": "errorType",
                        "value": "{{tipoColaborador}}"
                    },
                    "conditions": [
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "dwnError",
                            "values": []
                        },
                        {
                            "comparison": "notExists",
                            "source": "context",
                            "variable": "errorType",
                            "values": []
                        },
                        {
                            "values": [
                                "SCRIPT_ERROR"
                            ],
                            "source": "context",
                            "comparison": "startsWith",
                            "variable": "tipoColaborador"
                        }
                    ],
                    "$invalid": false
                }
            ],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "fallback",
                "$invalid": false
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "8aec0dfb-728e-460f-9d79-d9d0a1e10c28",
            "root": false,
            "$title": "[API] Infos de gestor",
            "$position": {
                "top": "882px",
                "left": "281px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        },
        "11eaf4c2-d44c-4306-9d44-ebadda2d3a18": {
            "$contentActions": [
                {
                    "input": {
                        "bypass": true,
                        "$cardContent": {
                            "document": {
                                "id": "f5601aa2-8d4b-415b-bfa5-e97f68423262",
                                "type": "text/plain",
                                "textContent": "Entrada do usuÃ¡rio",
                                "content": "Entrada do usuÃ¡rio"
                            },
                            "editable": false,
                            "deletable": true,
                            "position": "right",
                            "editing": false
                        },
                        "$invalid": false
                    },
                    "$invalid": false
                }
            ],
            "$conditionOutputs": [],
            "$enteringCustomActions": [
                {
                    "$id": "bb29bc32-4ff7-4e13-82c7-2925c6178227",
                    "$typeOfContent": "",
                    "$description": "",
                    "$inputSchema": {
                        "type": "object",
                        "properties": {},
                        "required": []
                    },
                    "type": "Redirect",
                    "$title": "Redirecionar a um serviÃ§o",
                    "$invalid": false,
                    "settings": {
                        "address": "Ex-colaboradores",
                        "context": {
                            "type": "text/plain",
                            "value": "{{input.content}}"
                        }
                    },
                    "conditions": []
                }
            ],
            "$leavingCustomActions": [],
            "$inputSuggestions": [],
            "$defaultOutput": {
                "stateId": "onboarding",
                "$invalid": false,
                "typeOfStateId": "state"
            },
            "$localCustomActions": [],
            "isAiGenerated": false,
            "$tags": [],
            "id": "11eaf4c2-d44c-4306-9d44-ebadda2d3a18",
            "root": false,
            "$title": "[Redirect] Ex-colaborador",
            "$position": {
                "top": "23px",
                "left": "543px"
            },
            "$invalidContentActions": false,
            "$invalidOutputs": false,
            "$invalidCustomActions": false,
            "$invalid": false
        }
    },
    "globalActions": {
        "$contentActions": [],
        "$conditionOutputs": [],
        "$enteringCustomActions": [
            {
                "$id": "DWN/GLB_CFG_SCT#58416585-da94-4180-a36a-7fe6a963acf1",
                "$typeOfContent": "",
                "type": "ExecuteScriptV2",
                "$title": "DWN [SETTINGS] Config",
                "settings": {
                    "function": "dwnRun",
                    "source": "\nvar DEFAULT_LIST = {\n  block: false,\n  allow: true\n};\nvar DEFAULT_THRESHOLD = {\n  minScore: 0.75,\n  maxStack: 3\n};\nvar DEFAULT_DISABLE = {\n  inactivity: false,\n  intents: []\n};\nvar DEFAULT_STACK_SIZES = {\n  requests: 3,\n  logs: 10,\n  intents: 3,\n  errors: 5,\n  checkpoints: 5\n};\nvar DEFAULT_GLOBAL_INTENTS = [\n  {\n    id: \"CLOSE\",\n    label: \"Sair\",\n    type: \"regex\",\n    patterns: [\"sair\", \"encerrar\"],\n    goto: null\n  },\n  {\n    id: \"CHECKPOINT_BACK\",\n    label: \"Voltar\",\n    type: \"regex\",\n    patterns: [\"voltar\"]\n  }\n];\nvar DEFAULT_GREETING = {\n  [\"MORNING\"]: \"Bom dia\",\n  [\"AFTERNOON\"]: \"Boa tarde\",\n  [\"EVENING\"]: \"Boa noite\",\n  [\"NIGHT\"]: \"Boa noite\"\n};\nvar DEFAULT_ERROR_MESSAGES = {\n  [\"UNEXPECTED_INPUT\"]: [\n    \"Desculpe, nÃ£o consegui entender.\\n\\n<b>Escolha uma opÃ§Ã£o do menu ou tente com outras palavras,</b> por favor.\",\n    \"NÃ£o entendi o que vocÃª quis dizer.\\n\\n<b>Poderia tentar novamente?</b>\"\n  ],\n  [\"UNEXPECTED_OPTION\"]: [\n    \"NÃ£o entendi sua mensagem, desculpe...\\n\\n<b>Confira as opÃ§Ãµes do menu e escolha uma,</b> por favor.\",\n    \"Essa nÃ£o Ã© uma das opÃ§Ãµes...\\n\\n<b>Confira as opÃ§Ãµes do menu e escolha uma,</b> por favor.\"\n  ],\n  [\"INACTIVITY\"]: [\n    //\"JÃ¡ faz uns minutinhos desde a sua Ãºltima mensagem...\",\n    \"Faz um tempo que vocÃª nÃ£o envia mensagens...\\n\\n<b>Vou encerrar a conversa, mas Ã© sÃ³ enviar um â€œOiâ€ para retomar!</b>\"\n  ],\n  [\"HTTP_ERROR\"]: [\n    \"Desculpe, meu sistema estÃ¡ indisponÃ­vel agora...\\n\\n<b>Por favor, tente novamente mais tarde.</b>\"\n  ],\n  [\"SCRIPT_ERROR\"]: [\n    \"Desculpe, nÃ£o consigo te ajudar nesse momento...\\n\\n<b>Por favor, tente novamente mais tarde.</b>\"\n  ],\n  [\"RECURRENT_ERROR\"]: [\n    \"Ainda nÃ£o estou conseguindo te entender...\\n\\n<i>â„¹ï¸ Caso esteja com dificuldades no WhatsApp, busque nossos outros canais de atendimento.</i>\\n\\n<b>Seu atendimento serÃ¡ encerrado, mas vocÃª pode reiniciar a qualquer momento mandando um â€œoiâ€.</b>\"\n  ]\n};\nvar DEFAULT_TYPE_MESSAGES = {\n  [\"AUDIO\"]: [\n    \"NÃ£o consigo ouvir Ã¡udios agora...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ouvir Ã¡udios agora! ðŸ”ˆðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ],\n  [\"VIDEO\"]: [\n    \"NÃ£o consigo ver vÃ­deos agora...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ver vÃ­deos agora... ðŸŽ¥ðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ],\n  [\"IMAGE\"]: [\n    \"NÃ£o consigo ver imagens agora...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ver imagens agora... ðŸ–¼ðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ],\n  [\"STICKER\"]: [\n    \"NÃ£o consigo ver figurinhas...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ver figurinhas... ðŸ–¼ðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ],\n  [\"DOCUMENT\"]: [\n    \"NÃ£o consigo ver arquivos agora...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ver arquivos agora... ðŸ“„ðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ],\n  [\"LOCATION\"]: [\n    \"NÃ£o consigo ver a localizaÃ§Ã£o agora...\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\",\n    \"Opa, nÃ£o posso ver a localizaÃ§Ã£o agora... ðŸ“ðŸš«\\n\\n<b>Envie apenas texto ou uma das opÃ§Ãµes do menu, por favor.</b>\"\n  ]\n};\nvar DEFAULT_INTENT_MESSAGES = {\n  [\"CLOSE\"]: [\n    \"Obrigado por nos contatar! ðŸ˜Š Se precisar de mais ajuda, nÃ£o hesite em nos procurar novamente.\"\n  ]\n};\nvar DEFAULT_ERROR = {\n  default: \"UNEXPECTED_INPUT\",\n  inactivity: \"INACTIVITY\"\n};\nvar DEFAULT_DAYPARTS = {\n  [\"MORNING\"]: [6, 7, 8, 9, 10, 11],\n  [\"AFTERNOON\"]: [12, 13, 14, 15, 16, 17],\n  [\"EVENING\"]: [18, 19, 20, 21],\n  [\"NIGHT\"]: [22, 23, 0, 1, 2, 3, 4, 5]\n};\nvar DEFAULT_LABEL = {\n  [\"UNEXPECTED\"]: \"Inesperado\",\n  [\"ABANDONED\"]: \"Abandonado\",\n  [\"RESOLVED\"]: \"Finalizado\",\n  [\"ERROR\"]: \"Erro\"\n};\nvar DEFAULT_PASSWORD = \"admin\";\nvar DEFAULT_PROPAGATE = null;\nvar DEFAULT_CONTACT_GROUPS = [1];\nvar DEFAULT_DEBUG = false;\nasync function dwnRun(stateId, errorStr, setupStr) {\n  let config = {\n    ...await process(stateId, errorStr, setupStr)\n    // Define your custom config here\n  };\n  return JSON.stringify(config);\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n\n\nasync function process(stateId, errorStr, setupStr) {\n  stateId = stateId || \"\";\n  errorStr = errorStr || \"\";\n  setupStr = setupStr || \"\";\n  let error = DwnError.fromDwnError(errorStr);\n  let config = {};\n  try {\n    const setup = JSON.parse(setupStr);\n    config = createDefaultConfig(setup);\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[create-config] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\n        \"MISCONFIGURATION_ERROR\",\n        description,\n        {\n          stack,\n          goto: null\n        }\n      );\n    }\n    error = err;\n  }\n  if (error && error.toString() !== errorStr) {\n    await context.setVariableAsync(\"dwnError\", error.toString());\n  }\n  if (stateId && stateId.startsWith(\"desk:\")) {\n    await context.setVariableAsync(\"dwnBypass\", \"true\");\n  } else {\n    await context.deleteVariableAsync(\"dwnBypass\");\n  }\n  return config;\n}\nfunction createDefaultConfig(setup) {\n  const current = setup.services ? setup.services.current : undefined;\n  const main = setup.services ? setup.services.main : undefined;\n  const contract = setup.connection ? setup.connection.contract : undefined;\n  const key = setup.connection ? setup.connection.key : undefined;\n  const gmt = setup.gmt;\n  if ([current, main, contract, key, gmt].some((v) => v === undefined)) {\n    throw new Error(\"Invalid Setup Configuration\");\n  }\n  if (!DEFAULT_ERROR_MESSAGES || !DEFAULT_ERROR_MESSAGES[\"UNEXPECTED_INPUT\"]) {\n    throw new Error(\n      \"Default error messages for UNEXPECTED_INPUT are not defined.\"\n    );\n  }\n  const service = {\n    current,\n    main\n  };\n  const connection = {\n    contract,\n    key\n  };\n  let config = {\n    gmt,\n    service,\n    connection,\n    list: DEFAULT_LIST,\n    threshold: DEFAULT_THRESHOLD,\n    stackSize: DEFAULT_STACK_SIZES,\n    intents: DEFAULT_GLOBAL_INTENTS,\n    disabled: DEFAULT_DISABLE,\n    messages: {\n      error: DEFAULT_ERROR_MESSAGES,\n      type: DEFAULT_TYPE_MESSAGES,\n      greeting: DEFAULT_GREETING,\n      intent: DEFAULT_INTENT_MESSAGES\n    },\n    daypart: DEFAULT_DAYPARTS,\n    error: DEFAULT_ERROR,\n    label: DEFAULT_LABEL,\n    password: DEFAULT_PASSWORD,\n    propagate: DEFAULT_PROPAGATE,\n    groups: DEFAULT_CONTACT_GROUPS,\n    debug: DEFAULT_DEBUG\n  };\n  return config;\n}\n",
                    "inputVariables": [
                        "state.id",
                        "dwnError",
                        "config.dwnSetup"
                    ],
                    "outputVariable": "dwnLocalConfig"
                },
                "conditions": [],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_UPD_CORE#501691cd-c65d-45eb-9338-117a29c49211",
                "$typeOfContent": "",
                "type": "ExecuteScriptV2",
                "$title": "DWN Update Core",
                "settings": {
                    "function": "dwnRun",
                    "source": "/**\n * @author     [Beuren Bechlin] <beuren.bechlin@dawntech.dev>\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n *\n * ---\n *\n * This software is the proprietary property of Dawntech.\n * Possession, use, duplication, or dissemination of this software is strictly\n * prohibited unless you have received prior written permission from\n * Dawntech.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar dwnGlobalConfig = \"resource.dwnGlobalConfig\".replace(\"resource.\", \"\");\nasync function dwnRun(coreStr, localStr, globalStr, statesStr, prepareStr, errorStr, inputContent, inputType, inputMessage, stateId) {\n  coreStr = coreStr || \"\";\n  localStr = localStr || \"\";\n  globalStr = globalStr || \"\";\n  statesStr = statesStr || \"\";\n  prepareStr = prepareStr || \"\";\n  errorStr = errorStr || \"\";\n  let core;\n  let config = undefined;\n  let local;\n  let global;\n  let states = {};\n  let prepare = undefined;\n  let error = DwnError.fromDwnError(errorStr);\n  let warnings = [];\n  let _states = {\n\t\t\"onboarding\": \"Start\",\n\t\t\"fallback\": \"Exceptions\",\n\t\t\"welcome\": \"Welcome\",\n\t\t\"error\": \"Default error\",\n\t\t\"ff8370c1-1c81-4b20-9097-9e002d0deca7\": \"Welcome Back\",\n\t\t\"df84d682-e45d-41f3-8f00-2975857c8134\": \"Pergunta CPF\",\n\t\t\"f18ad063-e98c-4489-a19d-e001393e1a57\": \"[API] Dados cadastrais\",\n\t\t\"a37c375b-a5e1-478a-a5dc-b4c82cd06a11\": \"Link espelho\",\n\t\t\"d275a4c0-4bc9-41f5-8561-bdb58bfbde80\": \"[API] Saldo banco de horas\",\n\t\t\"c6bdcbd8-a986-4d91-a5b1-433cded420d9\": \"Ponto marcado\",\n\t\t\"9a06106f-774b-4b2e-8160-71fada5f797a\": \"CalendÃ¡rio de pagamento\",\n\t\t\"53896bda-5937-439f-aca6-d492b92ce5e7\": \"Amostra holerite\",\n\t\t\"c08d9e87-34ef-420b-8e8c-622887e00577\": \"Data de pagamento\",\n\t\t\"43b73a6f-e0a7-4927-97ff-a6fdcedad811\": \"Recibo de fÃ©rias\",\n\t\t\"58d2e6b4-50e3-4d84-ad69-24858a250420\": \"Saldo de fÃ©rias\",\n\t\t\"dwnttags-9f2e-4d19-a96b-ec0d35ed339e\": \"DWNT Tags\",\n\t\t\"DWNT2ed1-aada-425e-a805-2558a70a1dbf\": \"#DEBUG by Dawntech\",\n\t\t\"regular-error\": \"[DWNT] Erro padrÃ£o\",\n\t\t\"3e11813d-1938-426b-9450-0edb310e4aa1\": \"[Valida] CPF no contexto\",\n\t\t\"57c05347-6980-49e1-8beb-6a521aecf1be\": \"[Valida] UsuÃ¡rio Slack com API LG\",\n\t\t\"5a8623b5-b11b-4609-a91f-267dc41874a8\": \"[Valida] CPF registrado LG\",\n\t\t\"a808db71-41e9-4e7b-aed1-409bcad915a7\": \"[Valida input] CPF\",\n\t\t\"1028bb11-81cb-49fa-b0b1-c2c95321a07a\": \"Menu principal\",\n\t\t\"66759194-551f-4cbd-b7a4-586cdf2f6e0a\": \"[Valida] Gestor/Colaborador\",\n\t\t\"c34d8e32-c8fe-4447-bb70-acce39c0a0c7\": \"Menu inicial gestor\",\n\t\t\"dee768ef-d9bb-42b8-8782-dca2ea07f9d5\": \"[GO TO][Exceptions] Menu principal\",\n\t\t\"5bc135d7-be9c-4b4b-8318-dc0518dd93c8\": \"Menu lista colaboradores\",\n\t\t\"6edffe44-690c-4d76-886f-7149bc663ae3\": \"[GO TO][Principal] Dados cadastrais\",\n\t\t\"c0379d4a-f3c8-4712-90c7-b94b79767e0c\": \"Resumo dados cadastrais\",\n\t\t\"c659269f-7921-4663-92c5-88172fd55834\": \"[API] Dados colaborador por PessoaID\",\n\t\t\"a6e8037d-27ec-42cb-82e2-7d860245ed0d\": \"ConfirmaÃ§Ã£o de dados\",\n\t\t\"fbabed30-85a5-4262-a963-947342a25cc4\": \"Dados corretos\",\n\t\t\"de2ef4ca-217c-4713-8e29-54d6cb656877\": \"Dados incorretos\",\n\t\t\"9c8fcb9f-5329-4bd4-8147-16158b790fd4\": \"Algo mais\",\n\t\t\"be2501fb-a16b-4612-834c-19b379feb6c3\": \"[GO TO][Algo mais] Menu principal\",\n\t\t\"7563cc00-7b1a-45e7-9d2d-ff452c27ab00\": \"[GO TO][Algo mais] Lista colaboradores\",\n\t\t\"5c24f954-d145-4f43-8e29-6e2098646352\": \"[GO TO][Algo mais] Encerramento\",\n\t\t\"f3dcc9dc-1884-466d-856f-debd6f40b9fb\": \"Mensagem encerramento\",\n\t\t\"9563b911-d190-4745-943d-07bbc9e2ef72\": \"[GO TO][Dados cadastrais] Algo mais\",\n\t\t\"c2f4d68c-3323-4d71-b9ae-dae527786da9\": \"Redirect Start\",\n\t\t\"01ec69f0-c1c3-42de-a47f-8a5921b110b3\": \"[API] Dados colaborador LG\",\n\t\t\"e9bc5e0a-b8ac-4e4b-be12-9ab8f5fe0600\": \"[GO TO][Exceptions] Welcome\",\n\t\t\"33bdf555-d3c9-41cd-a91b-4a52fe12e9c3\": \"[GO TO][Algo mais] Menu gestor\",\n\t\t\"7610e3a9-687e-4811-932f-7ebf008c61e2\": \"Menu ponto\",\n\t\t\"80ffe2e1-ce80-45d2-ae4c-73f508f8884a\": \"Espelho de ponto\",\n\t\t\"92bf7f07-4223-4391-899e-7cf5c66d2f5e\": \"[API] Tarefa de consulta espelho\",\n\t\t\"b8f3cc03-0733-4c21-99f0-a3d70fceabf3\": \"InÃ­cio busca espelho\",\n\t\t\"2c62a8ad-6102-4232-a90d-5ac66a36d618\": \"[API] GeraÃ§Ã£o link espelho\",\n\t\t\"3ef0404e-263f-49e6-bb06-752957356f2e\": \"[GO TO][Principal] Menu ponto\",\n\t\t\"fa621865-73f0-49ef-8d12-aeea13d6ad98\": \"Saldo banco de horas\",\n\t\t\"f8b1e371-5b4d-422b-a81e-2cc252a033e9\": \"GO BACK\",\n\t\t\"c249de73-192a-4e74-8fd6-426d26e8aba6\": \"Confirmar marcaÃ§Ã£o ponto\",\n\t\t\"ae4abe6b-0106-4e94-8c04-3e3274c87829\": \"[API] Marcar ponto\",\n\t\t\"9a7ca912-c026-492f-8214-1636ee8dce29\": \"[Valida] Encerramento\",\n\t\t\"f072b17a-6c88-45b4-ba26-54b81e212f4c\": \"AvaliaÃ§Ã£o CSAT\",\n\t\t\"b8ebd9c8-a56a-4b1e-b858-5e50131143c5\": \"Detrator\",\n\t\t\"7235f372-8973-4f8d-8dcc-903e4f86d1eb\": \"Neutro\",\n\t\t\"3b99a6d3-ba59-4b9a-905c-322551b0a2b3\": \"Promotor\",\n\t\t\"012b84ad-245f-4863-abc5-2e836d7cae98\": \"Coleta comentÃ¡rio CSAT\",\n\t\t\"9932d082-f698-4ff8-b301-fba44ff67d10\": \"Encerra avaliaÃ§Ã£o\",\n\t\t\"2f9035ce-4a81-4f1c-bb45-aec2117a96f8\": \"Erro persistente 2x\",\n\t\t\"81e8919b-9bde-4a27-8652-fa2005132dd0\": \"[Menu] Erro comum\",\n\t\t\"122e0c83-96a3-453a-98b0-4999c487eaf3\": \"[GO TO][Erro persistente] Algo mais\",\n\t\t\"1e092268-d9b5-4a45-930f-6abe3c80e787\": \"SugestÃ£o\",\n\t\t\"6cf34963-1712-4de4-bd2a-a264d99bf142\": \"Report de erro\",\n\t\t\"88697dd9-b21f-4de8-9f00-4f6830a6bc2d\": \"Novo tema\",\n\t\t\"40e0dbe6-042f-45f8-b78c-0f099ec1011b\": \"[GO TO][SugestÃ£o] Menu gestor\",\n\t\t\"6edb74e1-6e34-42f7-b5f4-e0250cdfcbde\": \"[GO TO][SugestÃ£o] Menu principal\",\n\t\t\"9c2100ba-aedd-4bd5-8584-850c6455a20c\": \"Dados de folha\",\n\t\t\"869b00dd-81be-411d-ba3f-b36c154ae4af\": \"Menu holerite\",\n\t\t\"47a1588e-8aa4-4aa1-a995-8b6e1e1c0601\": \"1Âª parcela pagamento 13Âº\",\n\t\t\"30ae53ca-d572-4ac0-ba40-89ffe8014b85\": \"2Âª parcela pagamento 13Âº\",\n\t\t\"13102dcc-d2a8-48d3-a308-5b62f1670021\": \"[API] Calendario de pagamento\",\n\t\t\"85612eaf-6b19-406c-89e6-5445798b1494\": \"[API] Calendario 13Âº salÃ¡rio\",\n\t\t\"322fc6e3-8d4a-4158-8c8d-fd6e21404fe1\": \"[GO TO][Principal] Menu folha\",\n\t\t\"f2f4f7ad-d8ec-4ea1-87d2-6d1d0de11f95\": \"[Redirect] ATH\",\n\t\t\"fd88c489-85a1-449d-b662-d41eef9abc28\": \"[Redirect] HML\",\n\t\t\"05a158bf-3a50-4a85-81ca-b3cf6c01ba96\": \"[GO TO][Principal] SugestÃ£o\",\n\t\t\"98b224e7-3230-4e44-bbd8-433d4703effb\": \"Agradece report de erro\",\n\t\t\"3d058116-b3a0-4221-855e-b9dc13755979\": \"Agradece novo tema\",\n\t\t\"7f7bfb69-b6f2-4b82-9b71-ad01a212740a\": \"Mensagem nÃ£o abrir chamado\",\n\t\t\"ed96a1fe-5177-4471-b412-ed7d3450eab0\": \"Inatividade\",\n\t\t\"4ee143c6-90ef-49b4-9bae-a175bc2d60b7\": \"MÃªs de pagamento\",\n\t\t\"9101ed0e-bafd-4e76-a8d5-8bd094f0d771\": \"[API] Holerite\",\n\t\t\"4675ba58-d159-4af3-aa9f-4c5727113ac4\": \"Menu fÃ©rias\",\n\t\t\"7951c1c9-d26c-40e9-a03c-826300ab3b87\": \"[GO TO][Principal] Menu fÃ©rias\",\n\t\t\"d07b37a4-f32e-4f90-9a24-ffe2becc2989\": \"[API] Saldo fÃ©rias\",\n\t\t\"07c14769-1f20-4b5e-b415-66ef10b338b1\": \"Informa saldo de fÃ©rias\",\n\t\t\"8ce61f41-738b-4283-8d8c-014c7918c000\": \"[GO TO][Ferias] Menu\",\n\t\t\"475597e1-6113-4f74-90e4-4711512ec6fd\": \"[API] Folha de pagamento\",\n\t\t\"437bec32-19a5-4e68-9d12-9f6831959053\": \"[API] Busca fÃ©rias\",\n\t\t\"c2058332-130e-4bf8-b74e-53a103dc88b1\": \"[API] Busca recibo inÃ­cio\",\n\t\t\"1b452f23-652b-40ce-a733-3f077b7081a8\": \"[API] Busca recibo fim\",\n\t\t\"67a90df9-39a9-4e27-95a1-d1ad777bca88\": \"Menu fÃ©rias anteriores\",\n\t\t\"3388a4b1-20ea-49da-9c34-78b7ce0d117f\": \"[GO TO][Ferias anteriores] Busca recibo\",\n\t\t\"a9bfec56-a680-4fc9-9fa3-1a7ce08dc3ba\": \"[GO TO][Ferias anteriores] GO_BACK\",\n\t\t\"b36390d6-0dbc-4fad-8881-ba340de7111f\": \"[GO TO][Ferias anteriores] Menu\",\n\t\t\"e3bfe3f0-2cfd-4076-a708-fc209bf297ff\": \"[MAIN] Inatividade\",\n\t\t\"e0807109-fdb0-42a6-be1d-73a1a82bf9a6\": \"MarcaÃ§Ã£o de fÃ©rias\",\n\t\t\"c91973cf-38f3-4149-964d-2f7446405825\": \"[API] Aviso de fÃ©rias\",\n\t\t\"e6b25c73-2721-4c7c-b685-153b085faa6b\": \"Aviso de fÃ©rias\",\n\t\t\"96e5e18c-0452-426e-890a-92b444358cf5\": \"[API] Lista meses pagamento\",\n\t\t\"ff20daef-1d32-4652-91f4-06976a5fcdd0\": \"[GO TO][Principal] Holerite\",\n\t\t\"6c58f46b-9751-44d2-8c1e-3fa463fcbdd0\": \"Sem registro de fÃ©rias\",\n\t\t\"3926058c-3f9d-4fbb-913f-92af6ea8496c\": \"Lista meses estÃ¡ticos\",\n\t\t\"4ceeb9c3-a5e5-4b5a-9468-352fb3ddf525\": \"[REDIRECT] Main\",\n\t\t\"a4f5afaa-4ca6-43a0-9689-06a2f9d38f39\": \"Validar intenÃ§Ã£o RegEx\",\n\t\t\"aa0f724d-64e8-4c1b-bcf9-9484da74dacf\": \"Intent: Despedida\",\n\t\t\"700a024c-357d-4011-bdfb-e30ea7584f5d\": \"Valida por origem: Start\",\n\t\t\"140708a7-0021-461f-8234-a2dbd4e5f9dc\": \"[GO TO][Start] Validar intenÃ§Ã£o Regex\",\n\t\t\"280fb914-9871-4f19-b8a7-eb1d81c71849\": \"Valida por origem: Exceptions\",\n\t\t\"2445bfcc-a50e-4c2e-adc7-176f78a0f1bc\": \"[GO TO][Exceptions] Validar intenÃ§Ã£o Regex\",\n\t\t\"c1af5124-9ac3-44d9-a06a-45947b343507\": \"P4P nÃ£o encontrado\",\n\t\t\"8efe123b-14d0-427a-8165-7e865e087ab2\": \"[GO TO][Start] Algo mais\",\n\t\t\"0c495718-1cd2-4f37-93eb-4be55a5272da\": \"Redirect FAQ\",\n\t\t\"0d7642fc-8910-42b3-95d9-d8c60211fc2d\": \"Intent: Ath\",\n\t\t\"c742c3a8-b3e2-467b-920f-2647ae09ebf3\": \"[GO TO][Intent] Ath - Default\",\n\t\t\"9f45ebdb-f529-488f-8e5e-20106ccc892b\": \"Intent: Ponto\",\n\t\t\"72db954c-7595-42de-8c3c-00813d133f9c\": \"CPF erro persistente\",\n\t\t\"d51fa683-357a-4187-8f15-01f54a1545de\": \"[GO TO][Erro CPF] Pergunta CPF\",\n\t\t\"90a5b753-05fd-4016-b7f5-a49ffca7b00a\": \"[Valida] Regras para acessar intenÃ§Ã£o\",\n\t\t\"f7cb5d75-f715-4258-818c-6448142d5382\": \"[Valida] Intent Regex\",\n\t\t\"6536db58-63c4-4f29-9936-d5eece83acb0\": \"Colaborador nÃ£o selecionado\",\n\t\t\"0752e4de-36f9-4f38-af5d-a179f2e99ec4\": \"Intent: Espelho de ponto\",\n\t\t\"fd379cd7-b845-40b7-9571-bbf06ad803e6\": \"Intent: Marcar ponto\",\n\t\t\"adb63186-7acd-4c05-9c0c-d6e1452f28f5\": \"Colaborador gestor\",\n\t\t\"1945f330-f75a-459c-a399-c595622072c4\": \"Intent: Banco de horas\",\n\t\t\"d4d74ab0-b802-4aec-b309-a5fd7dcad4e9\": \"Intent: FÃ©rias\",\n\t\t\"5e7e79dd-17f2-45e0-af72-0e3486212580\": \"Intent: Aviso de fÃ©rias\",\n\t\t\"92bca793-b768-41da-a723-05ec70534f83\": \"[GO TO] DWNT Erro PadrÃ£o\",\n\t\t\"e1b84b25-ebaa-448c-9f6b-206cbad8e3b7\": \"[GO TO] Welcome back\",\n\t\t\"5c06fa46-51a2-49b7-872e-47565b91e652\": \"Intent: Saldo de fÃ©rias\",\n\t\t\"dbe1a863-b055-4fa0-8f87-69d2bda6bf38\": \"Intent: Pagamento de fÃ©rias\",\n\t\t\"56d005c6-a4f6-4cf4-a3d0-e0f9f250f4b2\": \"Intent: Marcar fÃ©rias\",\n\t\t\"f5de0deb-e4b4-4662-80c1-cfe2c88aadc6\": \"Intent: Recibo fÃ©rias\",\n\t\t\"1a4c8d4e-3de8-4429-8f71-458f12047680\": \"Intent: SugestÃ£o\",\n\t\t\"edf245c0-d576-4219-a7f8-a3a5bc7197c3\": \"Intent: Dados cadastrais\",\n\t\t\"de381c4f-a8fc-49f6-8484-3ae61ef26d39\": \"Intent: Holerite\",\n\t\t\"e19f9c36-d2d1-4320-8b2e-f7f457000a3d\": \"Intent: Calendario pagamento\",\n\t\t\"f7dfbd78-0350-4d0e-a3f2-805b1c447437\": \"Intent: Dados de folha\",\n\t\t\"e7da0b7e-fc93-4907-aeed-e2c1529dc5ba\": \"Talk BLU\",\n\t\t\"81534408-4de8-44c9-a7c2-8d19e346db70\": \"[Valida] Percentual entendimento\",\n\t\t\"61bd8839-b607-4b4d-ba74-3fa79360e050\": \"Resposta BLU\",\n\t\t\"a7bea458-e279-4ece-8eed-d8142761159f\": \"[GO TO][Talk BLU] Welcome Back\",\n\t\t\"ce15bef4-9050-4b40-a0ce-ad475e4efd01\": \"[GO TO][Dados folha] Menu principal\",\n\t\t\"d77d4d6d-b1b0-419f-9a86-cd0df97a0dbb\": \"[GO TO][Ponto] Menu principal\",\n\t\t\"2d1b641f-ff9d-40fd-b16a-404fc250f77a\": \"[GO TO][Confirma Dados] Menu principal\",\n\t\t\"2afe6ae9-03f6-4e85-ba3a-e5c8c3b738fb\": \"Holerite nÃ£o encontrado\",\n\t\t\"d2a50ed0-870e-47bd-a4dc-d2c3d6f2aac8\": \"Menu erro API\",\n\t\t\"312cae2d-8be2-45e2-9b20-29da191f351b\": \"[GO TO][Erro API] Ath\",\n\t\t\"df008c4b-9886-4276-9e6e-3a5e4fdd0bc9\": \"Link informe de rendimentos\",\n\t\t\"DWN/ERR_BLK#dbaa315a-b338-43cb-bd45-1e24881760fd\": \"DWN Error\",\n\t\t\"DWN/TAGS_BLK#2450f0ee-a0d1-42a4-8d4a-d011f37126e6\": \"DWN Tags\"\n\t};\n  try {\n    core = JSON.parse(coreStr || \"{}\");\n  } catch (err) {\n    warnings.push(`[update-core] Unexpected core JSON ${String(err)}`);\n    core = {};\n  }\n  try {\n    local = JSON.parse(localStr);\n  } catch (err) {\n    warnings.push(`[update-core] Unexpected localConfig JSON ${String(err)}`);\n    local = {};\n  }\n  try {\n    global = JSON.parse(globalStr || \"{}\");\n  } catch (err) {\n    warnings.push(`[update-core] Unexpected globalConfig JSON ${String(err)}`);\n    global = {};\n  }\n  try {\n    prepare = JSON.parse(prepareStr || \"null\");\n  } catch (err) {\n    warnings.push(`[update-core] Unexpected prepare JSON ${String(err)}`);\n    prepare = undefined;\n  }\n  try {\n    states = JSON.parse(statesStr || \"{}\");\n  } catch (err) {\n    warnings.push(`[update-core] Unexpected states JSON ${String(err)}`);\n    states = {};\n  }\n  try {\n    if (error && error.type === \"MISCONFIGURATION_ERROR\") {\n      throw error;\n    }\n    const service = local.service && local.service.current || \"\";\n    _states = Object.keys(_states).reduce((acc, key) => {\n      acc[`${key}@${service}`] = _states[key];\n      return acc;\n    }, {});\n    states = {\n      ...states,\n      ..._states\n    };\n    await context.setVariableAsync(\"dwnStates\", JSON.stringify(states));\n    await context.setVariableAsync(dwnGlobalConfig, JSON.stringify(global));\n    local = sanitizeLocalConfig(local, service, states);\n    global = sanitizeGlobalConfig(global, service, states);\n    const state = enforceState(\n      stateId || \"onboarding\",\n      service,\n      states\n    );\n    prepare = sanitizePrepare(prepare, service, states);\n    config = createConfig(global, local, prepare);\n    if (prepare.stack > config.threshold.maxStack) {\n      throw new DwnError(\n        \"MISCONFIGURATION_ERROR\",\n        `Stack size (prepare.stack) is greater than the maximum stack size (config.threshold.maxStack).`,\n        { goto: null }\n      );\n    }\n    let replyContent = inputContent || \"\";\n    let replyType = inputType || \"text/plain\";\n    let replyMessage = inputMessage || \"\";\n    let replyPayload = undefined;\n    let replyIntent = null;\n    let replyError = null;\n    let replyState = null;\n    try {\n      const EXPECTED_ERRORS = [\"RUNTIME_ERROR\"];\n      if (error && EXPECTED_ERRORS.includes(error.type)) {\n        throw error;\n      }\n      const content = JSON.parse(inputContent || \"\");\n      if (content.state && content.service) {\n        replyState = {\n          id: content.state,\n          service: content.service\n        };\n        const payload = content;\n        if (payload.payload) {\n          replyPayload = payload.payload;\n        }\n        if (payload.intent) {\n          replyIntent = payload.intent;\n        }\n        if (payload.error) {\n          replyError = payload.error;\n        }\n      }\n    } catch (err) {\n    }\n    try {\n      const metadata = JSON.parse(inputMessage || \"\").metadata;\n      if (metadata && metadata[\"#replyContent\"]) {\n        const replyMenu = JSON.parse(metadata[\"#replyContent\"]);\n        replyContent = replyMenu[\"replied\"][\"value\"];\n        replyType = replyMenu[\"replied\"][\"type\"];\n      }\n    } catch (err) {\n    }\n    const reply = {\n      content: replyContent,\n      type: replyType,\n      message: replyMessage,\n      payload: replyPayload\n    };\n    let intent = null;\n    if (replyIntent) {\n      intent = {\n        id: replyIntent,\n        type: \"static\",\n        scope: \"redirect\",\n        label: `Intent redirect ${replyIntent}`,\n        event: \"dwn-redirect-intents\",\n        pattern: \"\",\n        score: 0\n      };\n    }\n    if (replyError && replyError !== \"PROPAGATE\" && replyState) {\n      if (replyError === \"GOTO\") {\n        error = new DwnError(\"GOTO\", \"Goto error\", {\n          goto: replyState\n        });\n      } else {\n        error = new DwnError(replyError, \"Redirect error\", {\n          state: replyState\n        });\n      }\n    }\n    if (error && error.type === \"PROPAGATE\" && core.error) {\n      error = DwnError.fromJson(core.error);\n    }\n    const stack = core.intents ? core.intents.stack || [] : [];\n    const intents = prepare.intents.length ? [\n      {\n        id: `prepare-${state.service}-${state.id}`,\n        intents: prepare.intents,\n        scope: \"prepare\",\n        event: prepare.id\n      }\n    ] : [];\n    let groups = [\n      ...intents,\n      ...stack,\n      {\n        id: \"config\",\n        intents: config.intents,\n        scope: \"config\",\n        event: \"config\"\n      }\n    ];\n    const checkpoints = core.checkpoints || [];\n    if (checkpoints.length === 0) {\n      config.disabled.intents.push(\"CHECKPOINT_BACK\");\n    }\n    if (config.disabled.intents.length > 0) {\n      groups = groups.map((group) => {\n        group.intents = group.intents.filter((intent2) => {\n          return !config.disabled.intents.includes(intent2.id);\n        });\n        return group;\n      });\n    }\n    config.error.default = prepare.error.default || config.error.default;\n    config.error.inactivity = prepare.error.inactivity || config.error.inactivity;\n    let services = core.services || [];\n    const serviceIndex = services.findIndex((_service) => _service === service);\n    if (serviceIndex >= 0) {\n      services.splice(0, serviceIndex + 1);\n    }\n    services.unshift(service);\n    let propagate = config.propagate ? config.propagate : services[1];\n    if (config.service.current === propagate) {\n      propagate = undefined;\n    }\n    core.version = \"1.1.0\";\n    core.messages = prepare.messages || [];\n    core.errors = core.errors || [];\n    core.checkpoint = prepare.checkpoint || false;\n    core.checkpoints = core.checkpoints || [];\n    core.services = services;\n    core.intent = intent;\n    core.intents = { stack, groups };\n    core.prepare = prepare;\n    core.state = state;\n    core.reply = reply;\n    core.group = core.group || \"A\";\n    core.journey = core.journey || \"{{random.guid}}\";\n    core.sessions = core.sessions || 1;\n    core.service = config.service.current;\n    core.visits = core.visits || [];\n    core.main = config.service.current === config.service.main || undefined;\n    core.propagate = propagate;\n    core.redirect = undefined;\n    await context.setVariableAsync(\"dwnConfig\", JSON.stringify(config));\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[update-core] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\"RUNTIME_ERROR\", description, {\n        stack,\n        goto: null\n      });\n    }\n    error = err;\n  } finally {\n    if (!core || typeof core !== \"object\") {\n      core = {};\n    }\n    core.warnings = warnings;\n    core.error = error ? error.toJson() : null;\n    core.fallback = \"fallback\";\n    coreStr = JSON.stringify(core);\n  }\n  if (prepare) {\n    await context.deleteVariableAsync(\"dwnPrepare\");\n  }\n  if (config && typeof config === \"object\") {\n    await context.setVariableAsync(\"dwnConfig\", JSON.stringify(config));\n  }\n  if (error && error.toString() !== errorStr) {\n    await context.setVariableAsync(\"dwnError\", error.toString());\n  }\n  return coreStr;\n}\nfunction sanitizeLocalConfig(config, service, states) {\n  if (!config.service || !config.service.current || !config.service.main || !config.gmt) {\n    throw new DwnError(\n      \"RUNTIME_ERROR\",\n      `Local config must have 'service.current' property.`,\n      { goto: null }\n    );\n  }\n  const intents = config.intents || [];\n  config.intents = intents.map(\n    (intent) => sanitizeIntentSpec(intent, service, states)\n  );\n  return config;\n}\nfunction sanitizeGlobalConfig(config, service, states) {\n  const intents = config.intents || [];\n  config.intents = intents.map(\n    (intent) => sanitizeIntentSpec(intent, service, states, true)\n  );\n  return config;\n}\nfunction createConfig(global, local, prepare) {\n  const config = merge(global, local);\n  if (!config.service.current || !config.service.main || !config.gmt) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `Config must have 'service.current', 'service.main', and 'gmt' properties.`,\n      { goto: null }\n    );\n  }\n  if (!config.label[\"UNEXPECTED\"]) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `Label for 'unexpected' (config.label['${\"UNEXPECTED\"}']) input is required in the configuration.`,\n      { goto: null }\n    );\n  }\n  const minScore = config.threshold.minScore || prepare.score;\n  if (!minScore) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      \"Threshold score (config.threshold.score) is required in the configuration.\",\n      { goto: null }\n    );\n  }\n  config.threshold.minScore = minScore;\n  config.error = merge(config.error, prepare.error);\n  if (!config.error.default) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      \"Default error (config.error.default) is required in the configuration.\",\n      { goto: null }\n    );\n  }\n  if (!config.error.inactivity) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      \"Default error (config.error.inactivity) is required in the configuration.\",\n      { goto: null }\n    );\n  }\n  config.disabled = merge(config.disabled, prepare.disabled);\n  config.disabled.intents = Array.from(new Set(config.disabled.intents));\n  return config;\n}\nfunction sanitizePrepare(prepare, service, states) {\n  if (!prepare) {\n    prepare = { id: \"prepare-not-set\" };\n  } else {\n    if (!prepare.id) {\n      throw new DwnError(\n        \"MISCONFIGURATION_ERROR\",\n        `Prepare must have 'id' property.`,\n        { goto: null }\n      );\n    }\n  }\n  prepare.id = kebabCase(prepare.id);\n  prepare.checkpoint = prepare.checkpoint || false;\n  prepare.stack = prepare.stack || 0;\n  prepare.score = prepare.score;\n  prepare.disabled = prepare.disabled || {};\n  prepare.disabled.inactivity = prepare.disabled.inactivity || false;\n  prepare.disabled.intents = prepare.disabled.intents || [];\n  prepare.error = prepare.error || {};\n  prepare.error.default = prepare.error.default || \"UNEXPECTED_INPUT\";\n  prepare.error.inactivity = prepare.error.inactivity || \"INACTIVITY\";\n  prepare.label = prepare.label;\n  prepare.intents = prepare.intents || [];\n  prepare.models = prepare.models || [];\n  prepare.types = prepare.types || [];\n  prepare.messages = prepare.messages || [];\n  prepare.intents = prepare.intents.map(\n    (intent) => sanitizeIntentSpec(intent, service, states)\n  );\n  return prepare;\n}\nfunction sanitizeIntentSpec(intent, service, states, global = false) {\n  if (!intent.id || !intent.label) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `Intent ${JSON.stringify(intent)} must have 'id' and 'label' properties.`,\n      { goto: null }\n    );\n  }\n  intent.type = intent.type || \"static\";\n  intent.patterns = intent.patterns || [];\n  intent.payload = intent.payload || null;\n  if (global) {\n    const incompleteGoto = intent.goto && !intent.goto.service;\n    if (incompleteGoto) {\n      throw new DwnError(\n        \"MISCONFIGURATION_ERROR\",\n        `Intent ${JSON.stringify(\n          intent\n        )} has an incomplete goto. Service is required in the global config.`,\n        { goto: null }\n      );\n    }\n  }\n  intent.goto = enforceState(intent.goto, service, states);\n  return intent;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n\n\nfunction enforceState(state, currentService, states) {\n  if (!state && typeof state !== \"string\") {\n    return state;\n  }\n  const id = typeof state === \"string\" ? state : state.id;\n  if (!id) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `State ${JSON.stringify(state)} must have 'id' property.`\n    );\n  }\n  const key = `${id}@${currentService}`;\n  let service = typeof state === \"string\" ? currentService : state.service;\n  if (!service) {\n    service = currentService;\n  }\n  let name = typeof state === \"string\" ? \"\" : state.name;\n  if (!name) {\n    name = states[key] || undefined;\n  }\n  return { id, service, name };\n}\n\n\nfunction kebabCase(str) {\n  if (!str) return \"\";\n  const matches = str.match(\n    /[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g\n  );\n  if (!matches) return \"\";\n  return matches.map((x) => x.toLowerCase()).join(\"-\");\n}\n\n\nfunction deepClone(source) {\n  if (source === null || typeof source !== \"object\") {\n    return source;\n  }\n  if (source instanceof Date) {\n    return new Date(source.getTime());\n  }\n  if (Array.isArray(source)) {\n    const newArray = [];\n    for (let i = 0; i < source.length; i++) {\n      newArray[i] = deepClone(source[i]);\n    }\n    return newArray;\n  }\n  const newObject = {};\n  for (const key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      newObject[key] = deepClone(source[key]);\n    }\n  }\n  return newObject;\n}\nfunction internalMerge(...objects) {\n  const validObjects = objects.filter((obj) => obj && typeof obj === \"object\");\n  if (validObjects.length === 0) return {};\n  const result = deepClone(validObjects[0] || {});\n  for (let i = 1; i < validObjects.length; i++) {\n    const source = validObjects[i];\n    for (const key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        const sourceValue = source[key];\n        const resultValue = result[key];\n        const isPlainObject = (v) => v && typeof v === \"object\" && !Array.isArray(v);\n        if (isPlainObject(resultValue) && isPlainObject(sourceValue)) {\n          result[key] = internalMerge(resultValue, sourceValue);\n        } else if (Array.isArray(resultValue) && Array.isArray(sourceValue)) {\n          result[key] = [...sourceValue, ...resultValue];\n        } else {\n          result[key] = deepClone(sourceValue);\n        }\n      }\n    }\n  }\n  return result;\n}\nfunction merge(...objects) {\n  return internalMerge(...objects);\n}\n",
                    "inputVariables": [
                        "dwnCore",
                        "dwnLocalConfig",
                        "resource.dwnGlobalConfig",
                        "dwnStates",
                        "dwnPrepare",
                        "dwnError",
                        "input.content",
                        "input.type",
                        "input.message",
                        "state.id"
                    ],
                    "outputVariable": "dwnCore"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "notExists",
                        "variable": "dwnBypass"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_UPD_DWN#51956452-fdda-4a5f-9987-88da8b8d8ad0",
                "$typeOfContent": "",
                "type": "ExecuteScriptV2",
                "$title": "DWN Update DWN",
                "settings": {
                    "function": "dwnRun",
                    "source": "/**\n * @author     [Beuren Bechlin] <beuren.bechlin@dawntech.dev>\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n *\n * ---\n *\n * This software is the proprietary property of Dawntech.\n * Possession, use, duplication, or dissemination of this software is strictly\n * prohibited unless you have received prior written permission from\n * Dawntech.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nasync function dwnRun(dwnStr, coreStr, configStr, statesStr, errorStr, listsConfigStr, tunnelOriginator, contactSerialized) {\n  dwnStr = dwnStr || \"\";\n  coreStr = coreStr || \"\";\n  configStr = configStr || \"\";\n  statesStr = statesStr || \"\";\n  errorStr = errorStr || \"\";\n  listsConfigStr = listsConfigStr || \"\";\n  let warnings = [];\n  let error = DwnError.fromDwnError(errorStr);\n  let dwn = null;\n  let core = null;\n  let config = null;\n  let contact;\n  let states = {};\n  let intent = null;\n  let goto = undefined;\n  let lists = { allow: [], block: [] };\n  try {\n    try {\n      core = JSON.parse(coreStr);\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected core JSON ${String(err)}`);\n      throw new Error(`core parsing ${String(err)}`);\n    }\n    warnings = core.warnings;\n    const EXPECTED_ERRORS = [\n      \"RUNTIME_ERROR\",\n      \"MISCONFIGURATION_ERROR\",\n      \"PROPAGATE\"\n    ];\n    if (error && EXPECTED_ERRORS.includes(error.type)) {\n      throw error;\n    }\n    try {\n      dwn = JSON.parse(dwnStr || \"{}\");\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected dwn JSON ${String(err)}`);\n      dwn = {};\n    }\n    try {\n      states = JSON.parse(statesStr);\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected states JSON ${String(err)}`);\n      states = {};\n    }\n    try {\n      config = JSON.parse(configStr);\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected config JSON ${String(err)}`);\n      throw new Error(`config parsing ${String(err)}`);\n    }\n    try {\n      contact = JSON.parse(contactSerialized);\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected contact JSON ${String(err)}`);\n      throw new Error(`contact parsing ${String(err)}`);\n    }\n    try {\n      lists = JSON.parse(listsConfigStr || \"{}\");\n    } catch (err) {\n      warnings.push(`[update-dwn] Unexpected listsConfig JSON ${String(err)}`);\n      throw new Error(`listsConfig parsing ${String(err)}`);\n    }\n    dwn.error = undefined;\n    dwn.intent = undefined;\n    const prepare = core.prepare;\n    let allowList = [];\n    try {\n      if (!config.list.allow) {\n        throw new Error(\"DISABLED_LIST\");\n      }\n      if (!Array.isArray(lists.allow) || lists.allow.length === 0) {\n        throw new Error(\"allow list is not filled or invalid\");\n      }\n      allowList = lists.allow.map(\n        (id) => user__id(id, contact.identity)\n      );\n    } catch (err) {\n      allowList = [];\n      const _err = err instanceof Error ? err.message : String(err);\n      if (_err !== \"DISABLED_LIST\") {\n        warnings.push(`[update-dwn] Unexpected allowList JSON ${String(err)}`);\n      }\n    }\n    let blockList = [];\n    try {\n      if (!config.list.block) {\n        throw new Error(\"DISABLED_LIST\");\n      }\n      if (!Array.isArray(lists.block) || lists.block.length === 0) {\n        throw new Error(\"blockList is not filled or invalid\");\n      }\n      blockList = lists.block.map(\n        (id) => user__id(id, contact.identity)\n      );\n    } catch (err) {\n      blockList = [];\n      const _err = err instanceof Error ? err.message : String(err);\n      if (_err !== \"DISABLED_LIST\") {\n        warnings.push(`[update-dwn] Unexpected blockList JSON ${err}`);\n      }\n    }\n    let calendar = datetime__process(new Date(), config.gmt);\n    let daypart = daypart__find(calendar.hour, config.daypart);\n    let user = user__process(\n      contact,\n      tunnelOriginator,\n      !Boolean(dwn.user),\n      config.debug,\n      core.group,\n      core.sessions,\n      allowList,\n      blockList\n    );\n    if (user.blocked) {\n      let _error = new DwnError(\n        \"BLOCKED_CONTACT\",\n        \"Blocked contact\",\n        {\n          recurrence: { type: -1, state: -1, combined: -1 },\n          goto: null\n        }\n      );\n      error = error || _error;\n    }\n    let input = input__process(core.reply, prepare.models);\n    if (input.model == \"DEBUG\" && input.payload[\"password\"] === config.password) {\n      user.debug = !user.debug || undefined;\n      const _error = new DwnError(\n        \"DEBUG\",\n        `Debug mode toggled ${user.debug ? \"on\" : \"off\"}`\n      );\n      error = error || _error;\n    }\n    if (input.model == \"GOTO\" && input.payload[\"password\"] === config.password && user.debug) {\n      goto = {\n        id: input.payload.state,\n        service: input.payload.service\n      };\n      const _error = new DwnError(\n        \"GOTO\",\n        `Force state change`,\n        { goto }\n      );\n      error = error || _error;\n    }\n    if (input.type === \"INACTIVITY\" && !config.disabled.inactivity) {\n      const _error = new DwnError(\n        config.error.inactivity,\n        \"Inactivity detected\",\n        { goto: null }\n      );\n      error = error || _error;\n    }\n    if (!intent) {\n      const [_intent, _goto] = redirect__intent(\n        core.intent,\n        core.intents.groups\n      );\n      if (_intent) {\n        intent = _intent;\n        goto = _goto;\n      }\n    }\n    if (!intent) {\n      const [_intent, _goto, _payload] = user__intent(\n        contact,\n        core.intents.groups\n      );\n      if (_intent) {\n        intent = _intent;\n        goto = _goto;\n        input.payload = input.payload || _payload;\n        let _error = new DwnError(\n          \"INTENT\",\n          `Contact intent ${intent.id} matched.`,\n          { goto }\n        );\n        error = error || _error;\n      }\n    }\n    if (!intent) {\n      for (const intentSpec of core.intents.groups) {\n        let [_intent, _goto, _payload] = reply__intent(\n          core.reply,\n          intentSpec,\n          config\n        );\n        if (_intent) {\n          intent = _intent;\n          goto = _goto;\n          input.payload = input.payload || _payload;\n          break;\n        }\n      }\n    }\n    if (intent && intent.id === \"CHECKPOINT_BACK\") {\n      const _goto = core.checkpoints.shift();\n      if (_goto) {\n        goto = goto || _goto;\n      } else {\n        intent = null;\n      }\n    }\n    if (intent && (intent.scope !== \"prepare\" || goto)) {\n      const _error = new DwnError(\n        \"INTENT\",\n        `Intent ${intent.id} in scope ${intent.scope} matched.`,\n        { goto }\n      );\n      error = error || _error;\n    }\n    if (!intent && prepare) {\n      const messages = prepare.messages || [];\n      if (prepare.models && prepare.models.length > 0 && !input.model) {\n        const _error = new DwnError(\n          config.error.default,\n          `Unexpected input model. Expected one of: ${prepare.models.join(\n            \", \"\n          )}`,\n          { messages }\n        );\n        error = error || _error;\n      } else if (prepare.types && prepare.types.length > 0 && input.type && !prepare.types.includes(input.type)) {\n        const _error = new DwnError(\n          config.error.default,\n          `Unexpected input type: ${input.type}. Expected one of: ${prepare.types.join(\", \")}`,\n          { messages }\n        );\n        error = error || _error;\n      } else if (prepare.intents && prepare.intents.length > 0) {\n        intent = {\n          id: undefined,\n          type: \"static\",\n          label: config.label[\"UNEXPECTED\"],\n          scope: \"prepare\",\n          event: prepare.id,\n          pattern: \"\",\n          score: 0\n        };\n      }\n    }\n    if (core.checkpoint) {\n      const checkpointIndex = core.checkpoints.findIndex(\n        (checkpoint) => checkpoint.id === core.state.id && checkpoint.service === core.service\n      );\n      if (checkpointIndex >= 0) {\n        core.checkpoints.splice(0, checkpointIndex + 1);\n      }\n      core.checkpoints.unshift(core.state);\n      core.checkpoints = core.checkpoints.slice(\n        0,\n        config.stackSize.checkpoints\n      );\n    }\n    if (prepare.intents && prepare.stack > 0) {\n      const intentsGroup = {\n        id: prepare.id,\n        intents: prepare.intents,\n        scope: \"stack\",\n        event: prepare.id\n      };\n      const stackLastIndex = core.intents.stack.reduce(\n        (lastIndex, intent2, index) => intent2.id === prepare.id ? index : lastIndex,\n        -1\n      );\n      if (stackLastIndex >= 0) {\n        core.intents.stack.splice(0, stackLastIndex + 1);\n      }\n      const groups = new Array(prepare.stack).fill(intentsGroup);\n      core.intents.stack.unshift(...groups);\n      core.intents.stack = core.intents.stack.slice(\n        0,\n        config.stackSize.intents\n      );\n    }\n    dwn.journey = core.journey;\n    dwn.daypart = daypart;\n    dwn.greeting = config.messages.greeting[daypart];\n    dwn.calendar = calendar;\n    dwn.input = input;\n    dwn.user = user;\n    dwn.service = config.service.current;\n    dwn.main = core.main || false;\n    dwn.error = undefined;\n    if (error) {\n      error.goto = enforceState(error.goto, config.service.current, states);\n      dwn.error = error.toJson();\n    }\n    dwn.intent = intent || undefined;\n    core.intent = intent || null;\n  } catch (err) {\n    if (!(err instanceof DwnError)) {\n      const description = `[update-dwn] Unexpected error ${String(err)}`;\n      const stack = err.stack || \"\";\n      err = new DwnError(\"RUNTIME_ERROR\", description, {\n        stack,\n        goto: null\n      });\n    }\n    error = err;\n  } finally {\n    if (!core || typeof core !== \"object\") {\n      core = {};\n    }\n    if (!dwn || typeof dwn !== \"object\") {\n      dwn = {};\n    }\n    if (error) {\n      dwn.error = error.toJson();\n    }\n    core.warnings = warnings;\n    if (core.warnings.length > 0) {\n      dwn.warnings = core.warnings.join(\"\\n\");\n    }\n    dwnStr = JSON.stringify(dwn);\n  }\n  if (core && typeof core === \"object\") {\n    await context.setVariableAsync(\"dwnCore\", JSON.stringify(core));\n  }\n  if (error && error.toString() !== errorStr) {\n    await context.setVariableAsync(\"dwnError\", error.toString());\n  }\n  return dwnStr;\n}\nfunction user__source(contactIdentity) {\n  contactIdentity = String(contactIdentity);\n  if (contactIdentity.includes(\"@0mn.io\")) return \"BLIP_CHAT\";\n  if (contactIdentity.includes(\"@mailgun.gw.msging.net\"))\n    return \"E_MAIL\";\n  if (contactIdentity.includes(\"@messenger.gw.msging.net\"))\n    return \"MESSENGER\";\n  if (contactIdentity.includes(\"@skype.gw.msging.net\"))\n    return \"SKYPE\";\n  if (contactIdentity.includes(\"@take.io\")) return \"SMS_TAKE\";\n  if (contactIdentity.includes(\"@tangram.com.br\"))\n    return \"SMS_TANGRAM\";\n  if (contactIdentity.includes(\"@telegram.gw.msging.net\"))\n    return \"TELEGRAM\";\n  if (contactIdentity.includes(\"@wa.gw.msging.net\"))\n    return \"WHATSAPP\";\n  if (contactIdentity.includes(\"@instagram.gw.msging.net\"))\n    return \"INSTAGRAM\";\n  if (contactIdentity.includes(\"@googlercs.gw.msging.net\"))\n    return \"GOOGLE_RCS\";\n  if (contactIdentity.includes(\"@abs.gw.msging.net\"))\n    return \"MICROSOFT_TEAMS\";\n  if (contactIdentity.includes(\"@businesschat.gw.msging.net\"))\n    return \"APPLE_BUSINESS_CHAT\";\n  if (contactIdentity.includes(\"@workplace.gw.msging.net\"))\n    return \"WORKPLACE\";\n  return \"OUTRO\";\n}\nfunction user__id(contactPrefix, contactId) {\n  if (contactPrefix.includes(\"@\")) return contactPrefix;\n  const source = user__source(contactId);\n  const domains = {\n    [\"BLIP_CHAT\"]: \"@0mn.io\",\n    [\"E_MAIL\"]: \"@mailgun.gw.msging.net\",\n    [\"MESSENGER\"]: \"@messenger.gw.msging.net\",\n    [\"SKYPE\"]: \"@skype.gw.msging.net\",\n    [\"SMS_TAKE\"]: \"@take.io\",\n    [\"SMS_TANGRAM\"]: \"@tangram.com.br\",\n    [\"TELEGRAM\"]: \"@telegram.gw.msging.net\",\n    [\"WHATSAPP\"]: \"@wa.gw.msging.net\",\n    [\"INSTAGRAM\"]: \"@instagram.gw.msging.net\",\n    [\"GOOGLE_RCS\"]: \"@googlercs.gw.msging.net\",\n    [\"MICROSOFT_TEAMS\"]: \"@abs.gw.msging.net\",\n    [\"APPLE_BUSINESS_CHAT\"]: \"@businesschat.gw.msging.net\",\n    [\"WORKPLACE\"]: \"@workplace.gw.msging.net\",\n    [\"OUTRO\"]: \"\"\n  };\n  return `${contactPrefix}${domains[source] || \"\"}`;\n}\nfunction redirect__intent(intent, groups) {\n  const { id, scope } = intent || {};\n  let goto = undefined;\n  const group = groups.find((group2) => group2.id === \"config\");\n  intent = null;\n  if (id && group && scope === \"redirect\") {\n    const _intent = group.intents.find((_intent2) => _intent2.id === id);\n    if (_intent) {\n      intent = {\n        id: _intent.id,\n        type: \"static\",\n        label: `Intent redirect ${_intent.id}`,\n        scope: \"redirect\",\n        event: \"dwn-redirect-intents\",\n        pattern: \"\",\n        score: 0\n      };\n      goto = _intent.goto || undefined;\n    }\n  }\n  return [intent, goto];\n}\nfunction user__intent(contact, groups) {\n  let intent = null;\n  let goto = undefined;\n  let payload = null;\n  let id = undefined;\n  let event = \"dwn-contact-intents\";\n  const group = groups.find((group2) => group2.id === \"config\");\n  try {\n    if (!contact.extras[\"intent\"]) throw new Error(\"Intent not found\");\n    let extras = {};\n    const [intent2, extrasStr] = contact.extras[\"intent\"].split(\"-|-\");\n    id = intent2 || undefined;\n    try {\n      extras = JSON.parse(extrasStr || \"{}\");\n    } catch (e) {\n    }\n    if (extras.event) {\n      event = extras.event;\n    }\n    if (extras.payload) {\n      payload = extras.payload;\n    }\n    if (extras.dueDate && extras.expired && extras.expired.intent) {\n      const date = new Date(extras.dueDate || 0);\n      if ((new Date()).getTime() > date.getTime()) {\n        id = extras.expired.intent;\n      }\n      if (extras.expired.event) {\n        event = extras.expired.event;\n      }\n    }\n  } catch (e) {\n  }\n  if (id && group) {\n    const intentSpec = group.intents.find((intent2) => intent2.id === id);\n    if (intentSpec) {\n      goto = intentSpec.goto;\n      intent = {\n        id: id ? id.trim() : undefined,\n        type: \"static\",\n        label: `Intent contact extra ${id}`,\n        scope: \"contact\",\n        event,\n        pattern: \"\",\n        score: 0\n      };\n    }\n  }\n  return [intent, goto, payload];\n}\nfunction user__process(contact, tunnelOriginator, newUser, configDebug, group, sessions, allowList, blockList) {\n  const id = tunnelOriginator ? tunnelOriginator : contact.identity;\n  const source = user__source(contact.identity);\n  const debug = Boolean(contact.extras && contact.extras[\"debug\"]) || configDebug || undefined;\n  const blocked = blockList.some(\n    (id2) => contact.identity === user__id(id2, contact.identity)\n  );\n  const allowed = allowList.some(\n    (id2) => contact.identity === user__id(id2, contact.identity)\n  );\n  const phone = source === \"WHATSAPP\" ? contact.identity.split(\"@\")[0] : undefined;\n  const cellphone = source === \"WHATSAPP\" ? contact.identity.split(\"@\")[0].substring(2) : undefined;\n  const DDD = source === \"WHATSAPP\" ? contact.identity.split(\"@\")[0].substring(2, 4) : undefined;\n  return {\n    id,\n    source,\n    new: newUser || undefined,\n    blocked,\n    allowed,\n    group,\n    sessions,\n    cellphone,\n    phone,\n    DDD,\n    debug\n  };\n}\nfunction datetime__to_iso_with_offset(date, tzOffset) {\n  const dateTz = new Date(date.getTime() + tzOffset * 36e5);\n  const dateFormatted = dateTz.toISOString().split(\".\")[0];\n  const offsetSign = tzOffset >= 0 ? \"+\" : \"-\";\n  const offsetHours = Math.abs(Math.floor(tzOffset)).toString().padStart(2, \"0\");\n  const offsetMinutes = Math.abs(tzOffset % 1 * 60).toString().padStart(2, \"0\");\n  return `${dateFormatted}${offsetSign}${offsetHours}:${offsetMinutes}`;\n}\nfunction datetime__process(date, tzOffset) {\n  const datetime = datetime__to_iso_with_offset(date, tzOffset);\n  const calendar = {\n    datetime,\n    date: datetime.split(\"T\")[0],\n    time: datetime.split(\"T\")[1].split(\".\")[0].substring(0, 8),\n    hour: parseInt(datetime.split(\"T\")[1].substring(0, 2)),\n    minute: parseInt(datetime.split(\"T\")[1].substring(3, 5)),\n    GMT: tzOffset\n  };\n  return calendar;\n}\nfunction daypart__find(hour, daypart) {\n  if (isNaN(hour) || hour < 0 || hour > 23) {\n    throw new DwnError(\n      \"RUNTIME_ERROR\",\n      `Invalid hour: ${hour}`,\n      { goto: null }\n    );\n  }\n  if (!daypart || !daypart.MORNING || !daypart.AFTERNOON || !daypart.EVENING || !daypart.NIGHT) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      \"Daypart configuration is incomplete\",\n      { goto: null }\n    );\n  }\n  if (daypart.MORNING.includes(hour)) return \"MORNING\";\n  if (daypart.AFTERNOON.includes(hour)) return \"AFTERNOON\";\n  if (daypart.EVENING.includes(hour)) return \"EVENING\";\n  if (daypart.NIGHT.includes(hour)) return \"NIGHT\";\n  throw new DwnError(\n    \"MISCONFIGURATION_ERROR\",\n    `Hour ${hour} not found in any daypart`,\n    { goto: null }\n  );\n}\nfunction type__inactivity(reply) {\n  return reply.content === \"\" ? null : undefined;\n}\nfunction type__flows(reply) {\n  try {\n    return JSON.parse(\n      JSON.parse(reply.message).metadata[\"#wa.interactive.nfm_reply.json_response\"]\n    );\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__ctwa(reply) {\n  try {\n    const { metadata } = JSON.parse(reply.message || \"{}\");\n    if (metadata && metadata[\"#wa.referral.source_id\"]) {\n      return {\n        headline: metadata[\"#wa.referral.headline\"],\n        body: metadata[\"#wa.referral.body\"],\n        source_type: metadata[\"#wa.referral.source_type\"],\n        source_id: metadata[\"#wa.referral.source_id\"],\n        source_url: metadata[\"#wa.referral.source_url\"],\n        media_id: metadata[\"#wa.referral.image.id\"]\n      };\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__cart(reply) {\n  if (reply.type.includes(\"x-whatsapp-order+json\")) {\n    return null;\n  }\n  return undefined;\n}\nfunction type__text(reply) {\n  return reply.type === \"text/plain\" ? null : undefined;\n}\nfunction type__image(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"image\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__sticker(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"sticker\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__video(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"video\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__audio(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"audio\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__document(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"application\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction type__location(reply) {\n  try {\n    const _content = JSON.parse(reply.content);\n    let _type = _content && _content.type && _content.type.toLowerCase() || \"\";\n    if (_type.includes(\"location\")) {\n      return null;\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction model__cep(reply) {\n  const text = reply.content;\n  const cleaned = text.replace(/\\D/g, \"\");\n  if (cleaned.length !== 8) {\n    return undefined;\n  }\n  return {\n    value: cleaned,\n    pretty: `${cleaned.slice(0, 5)}-${cleaned.slice(5)}`\n  };\n}\nfunction model__cpf(reply) {\n  const text = reply.content;\n  const cpf = text.replace(/\\D/g, \"\");\n  if (cpf.length !== 11 || /^(\\d)\\1{10}$/.test(cpf)) {\n    return undefined;\n  }\n  let sum = 0;\n  let remainder;\n  for (let i = 1; i <= 9; i++) {\n    sum = sum + parseInt(cpf.substring(i - 1, i)) * (11 - i);\n  }\n  remainder = sum * 10 % 11;\n  if (remainder === 10 || remainder === 11) {\n    remainder = 0;\n  }\n  if (remainder !== parseInt(cpf.substring(9, 10))) {\n    return undefined;\n  }\n  sum = 0;\n  for (let i = 1; i <= 10; i++) {\n    sum = sum + parseInt(cpf.substring(i - 1, i)) * (12 - i);\n  }\n  remainder = sum * 10 % 11;\n  if (remainder === 10 || remainder === 11) {\n    remainder = 0;\n  }\n  if (remainder !== parseInt(cpf.substring(10, 11))) {\n    return undefined;\n  }\n  return {\n    value: cpf,\n    pretty: cpf.replace(/(\\d{3})(\\d{3})(\\d{3})(\\d{2})/, \"$1.$2.$3-$4\")\n  };\n}\nfunction model__cnpj(reply) {\n  const text = reply.content;\n  const cnpj = text.replace(/\\D/g, \"\");\n  if (cnpj.length !== 14 || /^(\\d)\\1{13}$/.test(cnpj)) {\n    return undefined;\n  }\n  let size = cnpj.length - 2;\n  let numbers = cnpj.substring(0, size);\n  const digits = cnpj.substring(size);\n  let sum = 0;\n  let pos = size - 7;\n  for (let i = size; i >= 1; i--) {\n    sum += parseInt(numbers.charAt(size - i)) * pos--;\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n  let result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n  if (result !== parseInt(digits.charAt(0))) {\n    return undefined;\n  }\n  size = size + 1;\n  numbers = cnpj.substring(0, size);\n  sum = 0;\n  pos = size - 7;\n  for (let i = size; i >= 1; i--) {\n    sum += parseInt(numbers.charAt(size - i)) * pos--;\n    if (pos < 2) {\n      pos = 9;\n    }\n  }\n  result = sum % 11 < 2 ? 0 : 11 - sum % 11;\n  if (result !== parseInt(digits.charAt(1))) {\n    return undefined;\n  }\n  return {\n    value: cnpj,\n    pretty: cnpj.replace(\n      /(\\d{2})(\\d{3})(\\d{3})(\\d{4})(\\d{2})/,\n      \"$1.$2.$3/$4-$5\"\n    )\n  };\n}\nfunction model__birth_day(reply) {\n  const text = reply.content;\n  const match = text.trim().match(/^(\\d{1,2})[\\/.-](\\d{1,2})[\\/.-](\\d{4})$/);\n  if (!match) return undefined;\n  const day = parseInt(match[1], 10);\n  const month = parseInt(match[2], 10);\n  const year = parseInt(match[3], 10);\n  const date = new Date(year, month - 1, day);\n  if (date.getFullYear() !== year || date.getMonth() + 1 !== month || date.getDate() !== day) {\n    return undefined;\n  }\n  const dayStr = String(day).padStart(2, \"0\");\n  const monthStr = String(month).padStart(2, \"0\");\n  const yearStr = String(year);\n  return {\n    year: yearStr,\n    month: monthStr,\n    day: dayStr,\n    pretty: `${dayStr}/${monthStr}/${yearStr}`\n  };\n}\nfunction model__name(reply) {\n  const text = reply.content;\n  const cleaned = text.trim();\n  const nameRegex = /^[a-zA-Z\\u00C0-\\u017F]+$/;\n  if (nameRegex.test(cleaned) && cleaned.split(/\\s+/).length === 1) {\n    const lowercase = cleaned.toLowerCase();\n    const pretty = lowercase.charAt(0).toUpperCase() + lowercase.slice(1);\n    return {\n      value: lowercase,\n      pretty\n    };\n  }\n  return undefined;\n}\nfunction model__full_name(reply) {\n  const text = reply.content;\n  const cleaned = text.trim();\n  const fullNameRegex = /^[a-zA-Z\\u00C0-\\u017F]+(?:\\s[a-zA-Z\\u00C0-\\u017F]+)+$/;\n  if (fullNameRegex.test(cleaned)) {\n    const names = cleaned.split(/\\s+/).map((n) => n.toLowerCase());\n    if (names.length < 2) return undefined;\n    const prettyNames = names.map(\n      (name) => name.charAt(0).toUpperCase() + name.slice(1)\n    );\n    const first = prettyNames[0];\n    const last = prettyNames.slice(1).join(\" \");\n    const pretty = prettyNames.join(\" \");\n    return {\n      first,\n      last,\n      names,\n      lowercase: cleaned.toLowerCase(),\n      pretty\n    };\n  }\n  return undefined;\n}\nfunction model__email(reply) {\n  const text = reply.content;\n  const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  const lowercasedText = text.toLowerCase().trim();\n  if (emailRegex.test(lowercasedText)) {\n    const parts = lowercasedText.split(\"@\");\n    return {\n      host: parts[0],\n      domain: parts[1],\n      pretty: lowercasedText\n    };\n  }\n  return undefined;\n}\nfunction model__debug(reply) {\n  const text = reply.content;\n  const match = text.trim().match(/^#debug\\s+(\\S+)$/i);\n  if (match) {\n    const [_, password] = match;\n    return { password };\n  }\n  return undefined;\n}\nfunction model__goto(reply) {\n  const text = reply.content;\n  const match = text.trim().match(/^#goto\\s+(\\S+)\\s+(\\S+)(?:\\s+(\\S+))?$/i);\n  if (match) {\n    const [_, password, state, service] = match;\n    return { password, state, service };\n  }\n  return undefined;\n}\nfunction model__ctwa(reply) {\n  const message = reply.message;\n  try {\n    const { metadata } = JSON.parse(message || \"{}\");\n    if (metadata && metadata[\"#wa.referral.source_id\"]) {\n      return {\n        headline: metadata[\"#wa.referral.headline\"],\n        body: metadata[\"#wa.referral.body\"],\n        source_type: metadata[\"#wa.referral.source_type\"],\n        source_id: metadata[\"#wa.referral.source_id\"],\n        source_url: metadata[\"#wa.referral.source_url\"],\n        media_id: metadata[\"#wa.referral.image.id\"]\n      };\n    }\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction model__flows(reply) {\n  const message = reply.message;\n  try {\n    return JSON.parse(\n      JSON.parse(message).metadata[\"#wa.interactive.nfm_reply.json_response\"]\n    );\n  } catch (err) {\n  }\n  return undefined;\n}\nfunction model__cart(reply) {\n  if (reply.type.includes(\"x-whatsapp-order+json\")) {\n    return null;\n  }\n  return undefined;\n}\nfunction input__process(reply, models) {\n  let content = reply.content;\n  let model = undefined;\n  let payload = null;\n  let type = \"TEXT\";\n  const _types = [\n    \"INACTIVITY\",\n    \"FLOWS\",\n    \"CTWA\",\n    \"CART\",\n    \"TEXT\",\n    \"IMAGE\",\n    \"STICKER\",\n    \"VIDEO\",\n    \"AUDIO\",\n    \"DOCUMENT\",\n    \"LOCATION\"\n  ];\n  const typeExec = {\n    [\"INACTIVITY\"]: type__inactivity,\n    [\"FLOWS\"]: type__flows,\n    [\"CTWA\"]: type__ctwa,\n    [\"CART\"]: type__cart,\n    [\"TEXT\"]: type__text,\n    [\"IMAGE\"]: type__image,\n    [\"STICKER\"]: type__sticker,\n    [\"VIDEO\"]: type__video,\n    [\"AUDIO\"]: type__audio,\n    [\"DOCUMENT\"]: type__document,\n    [\"LOCATION\"]: type__location\n  };\n  const modelExec = {\n    [\"GOTO\"]: model__goto,\n    [\"DEBUG\"]: model__debug,\n    [\"CEP\"]: model__cep,\n    [\"CPF\"]: model__cpf,\n    [\"CNPJ\"]: model__cnpj,\n    [\"BIRTH_DAY\"]: model__birth_day,\n    [\"NAME\"]: model__name,\n    [\"FULL_NAME\"]: model__full_name,\n    [\"EMAIL\"]: model__email,\n    [\"CTWA\"]: model__ctwa,\n    [\"FLOWS\"]: model__flows,\n    [\"CART\"]: model__cart\n  };\n  type = _types.find((input_type) => typeExec[input_type](reply) !== undefined) || \"TEXT\";\n  payload = typeExec[type](reply);\n  const _models = [\n    \"GOTO\",\n    \"DEBUG\",\n    ...models || []\n  ];\n  const MODELS = [\n    \"GOTO\",\n    \"DEBUG\",\n    \"CEP\",\n    \"CPF\",\n    \"CNPJ\",\n    \"BIRTH_DAY\",\n    \"NAME\",\n    \"FULL_NAME\",\n    \"EMAIL\",\n    \"CTWA\",\n    \"FLOWS\",\n    \"CART\"\n  ];\n  const invalids = _models.filter((model2) => !MODELS.includes(model2));\n  if (invalids.length > 0) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `Invalid model '${invalids.join(\", \")}'. Must be one of: ${MODELS.join(\n        \", \"\n      )}`,\n      { goto: null }\n    );\n  }\n  model = _models.find(\n    (input_model) => modelExec[input_model](reply) !== undefined\n  );\n  if (model) {\n    payload = modelExec[model](reply);\n  }\n  if (reply.payload) {\n    payload = reply.payload;\n  }\n  return {\n    content,\n    type,\n    payload,\n    model\n  };\n}\nfunction input__content(text) {\n  return String(text).trim().toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\").replace(/[^a-z0-9\\s]/g, \"\");\n}\nfunction reply__intent(reply, intentGroup, config) {\n  const { threshold } = config;\n  let minScore = threshold && threshold.minScore ? threshold.minScore : 0.75;\n  let intent = null;\n  let goto = undefined;\n  let payload = null;\n  for (const intentSpec of intentGroup.intents) {\n    const { type } = intentSpec;\n    if (type === \"fuzzy\") {\n      const _intent = intent__fuzzy(reply, intentSpec, intentGroup);\n      if (_intent && (!intent || intent.score < _intent.score)) {\n        intent = _intent;\n        goto = intentSpec.goto;\n        payload = intentSpec.payload || null;\n        continue;\n      }\n    }\n    if (type === \"regex\") {\n      const _intent = intent__regex(reply, intentSpec, intentGroup);\n      if (_intent) {\n        intent = _intent;\n        goto = intentSpec.goto;\n        payload = intentSpec.payload || null;\n        break;\n      }\n    }\n    if (type === \"static\") {\n      const _intent = intent__static(reply, intentSpec, intentGroup);\n      if (_intent) {\n        intent = _intent;\n        goto = intentSpec.goto;\n        payload = intentSpec.payload || null;\n        break;\n      }\n    }\n  }\n  if (intent && intent.type === \"fuzzy\" && intent.score < minScore) {\n    intent = null;\n    goto = undefined;\n  }\n  return [intent, goto, payload];\n}\nfunction intent__regex(reply, intentSpec, intentGroup) {\n  const { scope, event } = intentGroup;\n  const { id, patterns, label } = intentSpec;\n  let intent = null;\n  const score = 0;\n  const type = \"regex\";\n  try {\n    for (const pattern of patterns || []) {\n      if (new RegExp(pattern, \"i\").test(reply.content)) {\n        intent = {\n          id,\n          type,\n          scope,\n          label,\n          event,\n          pattern,\n          score\n        };\n      }\n    }\n  } catch (err) {\n    throw new DwnError(\n      \"RUNTIME_ERROR\",\n      `Error processing regex intent ${intentSpec.id}, error: ${err.message}`,\n      { goto: null }\n    );\n  }\n  return intent;\n}\nfunction intent__fuzzy(reply, intentSpec, intentGroup) {\n  const { scope, event } = intentGroup;\n  const { id, patterns, label } = intentSpec;\n  const content = input__content(reply.content);\n  const type = \"fuzzy\";\n  let intent = null;\n  let highest = 0;\n  function similarity_score(a, b) {\n    const maxLen = Math.max(a.length, b.length);\n    if (maxLen === 0) return 1;\n    return 1 - levenshtein_distance(a, b) / maxLen;\n  }\n  function levenshtein_distance(a, b) {\n    const matrix = [];\n    for (let i = 0; i <= b.length; i++) matrix[i] = [i];\n    for (let j = 0; j <= a.length; j++) matrix[0][j] = j;\n    for (let i = 1; i <= b.length; i++) {\n      for (let j = 1; j <= a.length; j++) {\n        if (b[i - 1] === a[j - 1]) {\n          matrix[i][j] = matrix[i - 1][j - 1];\n        } else {\n          matrix[i][j] = Math.min(\n            matrix[i - 1][j - 1] + 1,\n            matrix[i][j - 1] + 1,\n            matrix[i - 1][j] + 1\n          );\n        }\n      }\n    }\n    return matrix[b.length][a.length];\n  }\n  for (const pattern of patterns || []) {\n    const example = input__content(pattern);\n    const score = similarity_score(content, example);\n    if (score > highest) {\n      highest = score;\n      intent = {\n        id,\n        type,\n        scope,\n        label,\n        event,\n        pattern,\n        score\n      };\n    }\n  }\n  return intent;\n}\nfunction intent__static(reply, intentSpec, intentGroup) {\n  const { scope, event } = intentGroup;\n  const { id, patterns, label } = intentSpec;\n  let intent = null;\n  const score = 0;\n  const type = \"static\";\n  try {\n    let words = patterns || [];\n    if (words.includes(reply.content)) {\n      intent = {\n        id,\n        type,\n        scope,\n        label,\n        event,\n        pattern: reply.content,\n        score\n      };\n    }\n  } catch (err) {\n    throw new DwnError(\n      \"RUNTIME_ERROR\",\n      `Error processing regex intent ${intentSpec.id}, error: ${err.message}`,\n      { goto: null }\n    );\n  }\n  return intent;\n}\n/**\n * @imports\n * @version    1.1.0\n * @copyright  2025 Dawntech. All rights reserved.\n * @license    All Rights Reserved\n */\nvar DwnError = class _DwnError extends Error {\n  /**\n   * Creates a new DwnError instance.\n   *\n   * @param {string} type The error type identifier (e.g., \"VALIDATION_ERROR\", \"SCRIPT_ERROR\")\n   * @param {string} description Human-readable description of what went wrong\n   * @param {{message?: string, messages?: string[], stack?: string, goto?: State | null, state?: State, at?: string, intent?: string | null, content?: string, recurrence?: ErrorRecurrence, code?: string | null, status?: FINALIZATION_STATUS}} [extras] Optional additional error context and metadata:\n   * - `message`: Primary error message for user display\n   * - `messages`: Array of error messages for different contexts\n   * - `stack`: Stack trace or execution context information\n   * - `goto`: Target state to redirect to on error (null means terminate)\n   * - `state`: Flow state where the error occurred\n   * - `at`: Location or context where the error occurred\n   * - `intent`: Associated intent that caused the error\n   * - `content`: Additional error content or context\n   * - `recurrence`: Information about error recurrence patterns\n   * - `code`: Error code for programmatic error handling\n   * - `status`: Finalization status indicating how the error was resolved\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid input provided\");\n   *\n   * const contextError = new DwnError(\"SCRIPT_ERROR\", \"Script execution failed\", {\n   *   state: { id: \"state-123\", service: \"main\" },\n   *   intent: \"user-input\",\n   *   content: \"invalid data\",\n   *   messages: [\"First attempt failed\", \"Retry failed\"],\n   *   goto: { id: \"error-handler\", service: \"main\" }\n   * });\n   * ```\n   */\n  constructor(type, description, extras) {\n    super();\n    this.name = \"DwnError\";\n    const _extras = _DwnError.enforceExtras(extras);\n    this.type = type;\n    this.description = description;\n    this.at = _extras.at;\n    this.content = _extras.content;\n    this.state = _extras.state;\n    this.recurrence = _extras.recurrence;\n    this.goto = _extras.goto;\n    this.message = _extras.message || undefined;\n    this.messages = _extras.messages || [];\n    this.intent = _extras.intent || undefined;\n    this.code = _extras.code || undefined;\n    this.status = _extras.status || undefined;\n    this.stack = _extras.stack || undefined;\n    if (!this.stack) {\n      if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, _DwnError);\n      }\n    }\n  }\n  /**\n   * Creates a DwnError instance from a serialized error string.\n   *\n   * Parses a DWN error string in the format \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\"\n   * and reconstructs the original DwnError instance.\n   *\n   * @param {string} dwnErrorString Serialized error string from toString() method\n   * @returns {DwnError | undefined} DwnError instance or undefined if parsing fails\n   *\n   * @example\n   * ```typescript\n   * const errorString = \"SCRIPT_ERROR -|- Execution failed -|- {...}\";\n   * const error = DwnError.fromDwnError(errorString);\n   * ```\n   */\n  static fromDwnError(dwnErrorString) {\n    if (!dwnErrorString) return undefined;\n    const parts = dwnErrorString.split(\"-|-\");\n    let type = parts.shift();\n    if (!type) {\n      return undefined;\n    }\n    type = type.trim();\n    let description = parts.shift() || \"\";\n    if (description) {\n      description = description.trim();\n    }\n    let extras = undefined;\n    try {\n      extras = JSON.parse(parts.shift() || \"{}\");\n    } catch (e) {\n    }\n    if (extras) {\n      return new _DwnError(type, description, extras);\n    }\n    return new _DwnError(type, description);\n  }\n  /**\n   * Creates a DwnError instance from a JSON object.\n   *\n   * Converts a generic Error object or JSON representation into a properly\n   * structured DwnError instance with all required properties.\n   *\n   * @param {Error} data Error object or JSON data to convert\n   * @returns {DwnError} New DwnError instance\n   *\n   * @example\n   * ```typescript\n   * const jsonData = { type: \"API_ERROR\", description: \"Request failed\" };\n   * const error = DwnError.fromJson(jsonData);\n   * ```\n   */\n  static fromJson(data) {\n    const extras = _DwnError.enforceExtras(data);\n    return new _DwnError(data.type, data.description, extras);\n  }\n  /**\n   * Normalizes and validates error extras properties.\n   *\n   * Ensures all optional properties have default values and validates the structure\n   * of the extras object. Used internally to maintain consistency across error instances.\n   *\n   * @param {DwnError | DwnErrorExtras} [entity] Error entity or extras object to normalize\n   * @returns {Required<DwnErrorExtras>} Normalized extras object with all required properties\n   *\n   * @internal\n   */\n  static enforceExtras(entity) {\n    if (!entity) entity = {};\n    const extras = {};\n    extras.message = entity.message || \"\";\n    extras.messages = entity.messages || [];\n    extras.stack = entity.stack || \"\";\n    extras.goto = entity.goto;\n    extras.state = entity.state || { id: \"\", service: \"\" };\n    extras.at = entity.at || (new Date()).toISOString();\n    extras.intent = entity.intent || \"\";\n    extras.content = entity.content || \"\";\n    extras.recurrence = entity.recurrence || { type: 1, state: 1, combined: 1 };\n    extras.code = entity.code || undefined;\n    extras.status = entity.status || undefined;\n    return extras;\n  }\n  /**\n   * Serializes the error to a string format.\n   *\n   * Converts the DwnError instance into a parseable string format using the pattern\n   * \"TYPE -|- DESCRIPTION -|- EXTRAS_JSON\" for storage or transmission.\n   *\n   * @returns {string} Serialized error string\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"API_ERROR\", \"Request failed\");\n   * const serialized = error.toString();\n   * // \"API_ERROR -|- Request failed -|- {...}\"\n   * ```\n   */\n  toString() {\n    const extras = JSON.stringify(_DwnError.enforceExtras(this));\n    return `${this.type} -|- ${this.description} -|- ${extras}`;\n  }\n  /**\n   * Converts the error to a JSON object.\n   *\n   * Serializes all error properties into a plain JavaScript object suitable\n   * for JSON serialization, API responses, or logging.\n   *\n   * @returns {Error} Plain object representation of the error\n   *\n   * @example\n   * ```typescript\n   * const error = new DwnError(\"VALIDATION_ERROR\", \"Invalid data\");\n   * const json = error.toJson();\n   * console.log(JSON.stringify(json, null, 2));\n   * ```\n   */\n  toJson() {\n    return {\n      type: this.type,\n      at: this.at,\n      description: this.description,\n      message: this.message,\n      messages: this.messages || [],\n      stack: this.stack || \"\",\n      intent: this.intent,\n      content: this.content,\n      goto: this.goto,\n      state: this.state,\n      recurrence: this.recurrence\n    };\n  }\n};\nvar SYSTEM_DWN_ERRORS = [\n  \"RUNTIME_ERROR\",\n  \"MISCONFIGURATION_ERROR\"\n];\n\n\nfunction enforceState(state, currentService, states) {\n  if (!state && typeof state !== \"string\") {\n    return state;\n  }\n  const id = typeof state === \"string\" ? state : state.id;\n  if (!id) {\n    throw new DwnError(\n      \"MISCONFIGURATION_ERROR\",\n      `State ${JSON.stringify(state)} must have 'id' property.`\n    );\n  }\n  const key = `${id}@${currentService}`;\n  let service = typeof state === \"string\" ? currentService : state.service;\n  if (!service) {\n    service = currentService;\n  }\n  let name = typeof state === \"string\" ? \"\" : state.name;\n  if (!name) {\n    name = states[key] || undefined;\n  }\n  return { id, service, name };\n}\n",
                    "inputVariables": [
                        "dwn",
                        "dwnCore",
                        "dwnConfig",
                        "dwnStates",
                        "dwnError",
                        "resource.dwnListConfig",
                        "tunnel.originator",
                        "contact.serialized"
                    ],
                    "outputVariable": "dwn"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "notExists",
                        "variable": "dwnBypass"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_RST_INT_CNT#92d7d914-b85d-4817-b217-d4a880c6d301",
                "$typeOfContent": "",
                "type": "MergeContact",
                "$title": "DWN Reset contact intent",
                "settings": {
                    "extras": {
                        "intent": ""
                    }
                },
                "conditions": [
                    {
                        "source": "context",
                        "comparison": "exists",
                        "values": [],
                        "variable": "contact.extras.intent"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_PREP_INT#0af78d08-e755-4510-ac41-23c4b09b329c",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Prepare Intents",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-prepare-intents-{{dwn@intent.event}}",
                    "action": "{{dwn@intent.label}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "prepare"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent.id"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent.label"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_PREP_INT_UNX#5e24439c-8cc1-4315-b0da-7a26270e730e",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Prepare Intents with unexpected",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-prepare-intents-{{dwn@intent.event}}",
                    "action": "{{dwn@intent.label}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "prepare"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent.label"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_PREP_INT_GLB_UNX#01e3fd65-fee3-4d8d-a289-4f3f1c64cd65",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Prepare unexpected intents",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-prepare-intents-global-unexpected",
                    "action": "{{dwnCore@state.name}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "prepare"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "notExists",
                        "variable": "dwn@intent.id"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwnCore@state.name"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_PREP_INT_LST#163e74c8-9057-4ba6-a642-4fd8fe9dff60",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Stack Intent List",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-prepare-intents-list-{{dwn@intent.event}}",
                    "action": " | {{dwn@calendar.datetime}} | {{contact.identity}} | {{dwn@intent.label}} | {{dwn@intent.type}} | {{dwn@input.content}} | {{dwn@intent.pattern}} | {{dwn@intent.score}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "prepare"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_PREP_INT_UNM_LST#46e9ceb9-49ca-4b8c-9d63-c25e87fbe0aa",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Prepare Unmatched Intent List",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-prepare-intents-list-unmatched",
                    "action": " | {{dwn@calendar.datetime}} | {{contact.identity}} | {{dwn@intent.type}} | {{dwn@input.content}} | {{dwn@intent.score}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "prepare"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_INA#0eaf4a72-d379-4a07-92a6-68573a201b83",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Inactivity",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-inactivity",
                    "action": "{{dwnCore@state.name}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "input",
                        "comparison": "notExists"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwnCore@state.name"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_STK_INT#19b7a4a9-619a-4eee-8d08-838b995ec1bd",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Stack Intent",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-stack-intents-{{dwn@intent.event}}",
                    "action": "{{dwn@intent.label}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "stack"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent.label"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_STK_INT_LST#b4b4b41c-034e-47d2-83e5-8f6cc83bc1e9",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Stack Intent List",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-stack-intents-list",
                    "action": " | {{dwn@calendar.datetime}} | {{contact.identity}} | {{dwn@intent.event}} | {{dwn@intent.label}} | {{dwn@intent.type}} | {{dwn@input.content}} | {{dwn@intent.pattern}} | {{dwn@intent.score}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "stack"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_CFG_INT#9b2b8aac-5829-4eda-b160-346fa938fe11",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Config Intent",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-config-intents-{{dwn@intent.event}}",
                    "action": "{{dwn@intent.label}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "config"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    },
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent.label"
                    }
                ],
                "$invalid": false
            },
            {
                "$id": "DWN/GLB_TRK_CFG_INT_LST#ba208724-9bb1-4442-97b4-2d1ee947ae5c",
                "$typeOfContent": "",
                "type": "TrackEvent",
                "$title": "DWN Config Intent List",
                "settings": {
                    "extras": {
                        "journey": "{{dwn@journey}}"
                    },
                    "category": "dwn-config-intents-list",
                    "action": " | {{dwn@calendar.datetime}} | {{contact.identity}} | {{dwn@intent.event}} | {{dwn@intent.label}} | {{dwn@intent.type}} | {{dwn@input.content}} | {{dwn@intent.pattern}} | {{dwn@intent.score}}"
                },
                "conditions": [
                    {
                        "values": [],
                        "source": "context",
                        "comparison": "exists",
                        "variable": "dwn@intent"
                    },
                    {
                        "values": [
                            "config"
                        ],
                        "source": "context",
                        "comparison": "equals",
                        "variable": "dwn@intent.scope"
                    }
                ],
                "$invalid": false
            }
        ],
        "$leavingCustomActions": [],
        "$inputSuggestions": [],
        "$defaultOutput": {
            "stateId": "fallback",
            "$invalid": false
        },
        "isAiGenerated": false,
        "$tags": [],
        "id": "global-actions",
        "$invalidContentActions": false,
        "$invalidOutputs": false,
        "$invalidCustomActions": false,
        "$invalid": false
    }
}